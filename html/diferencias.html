
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>

<head>
    <meta http-equiv="Content-Type"
          content="text/html; charset=utf-8" />
    <title></title>
    <link rel="stylesheet" type="text/css" href="../css/resetStyle.css">
    <link rel="stylesheet" type="text/css" href="../css/diff.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&display=swap" rel="stylesheet">
    <style type="text/css">
        table.diff {font-family:'JetBrains Mono';}
        .diff_header {background-color:#e0e0e0; font-family: 'DM Sans';}
        td.diff_num {text-align:right; font-family: 'JetBrains Mono'; padding-right: 6px; color: #0F0F32; font-weight: bold;}
        td.diff_line {font-family: 'JetBrains Mono'; padding-left: 6px; color: #0F0F32; font-weight: bold;}
        .diff_next {background-color:#c0c0c0; }
        .diff_add {background-color:#26F052}
        .diff_chg {background-color:#FFF500}
        .diff_sub {background-color:#FF2D2D}
    </style>
</head>

<body>
    <div class="container"><div class="height-container">
    <table class="diff" id="difflib_chg_from0__top"
           cellspacing="0" cellpadding="0" rules="groups" >

    

        <tr><th colspan="3" class="diff_header"><img src="../img/V1.png" class="folder">version1.cpp</th></tr>
        
<tr><td class="diff_next" id="difflib_chg_to0__0"><a href="#difflib_chg_to0__0">▼</a></td><td class="diff_num" id="from0_1">1</td><td wrap="wrap" class="diff_line">/*</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2">2</td><td wrap="wrap" class="diff_line">&nbsp;*&nbsp;Diff&nbsp;Match&nbsp;and&nbsp;Patch</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_3">3</td><td wrap="wrap" class="diff_line">&nbsp;*&nbsp;Copyright&nbsp;2018&nbsp;The&nbsp;diff-match-patch&nbsp;Authors.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_4">4</td><td wrap="wrap" class="diff_line">&nbsp;*&nbsp;https://github.com/google/diff-match-patch</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_5">5</td><td wrap="wrap" class="diff_line">&nbsp;*</td><tr><td class="diff_next"><a href="#difflib_chg_to0__1">▼</a></td><td class="diff_num" id="from0_6">6</td><td wrap="wrap" class="diff_line">&nbsp;*&nbsp;Licensed&nbsp;under&nbsp;the&nbsp;Apache&nbsp;Licen<span class="diff_chg">ciado</span>,&nbsp;Version&nbsp;2.0&nbsp;(the&nbsp;"License");</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_7">7</td><td wrap="wrap" class="diff_line">&nbsp;*&nbsp;you&nbsp;may&nbsp;not&nbsp;use&nbsp;this&nbsp;file&nbsp;except&nbsp;in&nbsp;compliance&nbsp;with&nbsp;the&nbsp;License.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_8">8</td><td wrap="wrap" class="diff_line">&nbsp;*&nbsp;You&nbsp;may&nbsp;obtain&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;License&nbsp;at</td><tr><td class="diff_next" id="difflib_chg_to0__1"></td><td class="diff_num" id="from0_9">9</td><td wrap="wrap" class="diff_line">&nbsp;*</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_10">10</td><td wrap="wrap" class="diff_line">&nbsp;*&nbsp;&nbsp;&nbsp;http://www.apache.org/licenses/LICENSE-2.0</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_11">11</td><td wrap="wrap" class="diff_line">&nbsp;*</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_12">12</td><td wrap="wrap" class="diff_line">&nbsp;*&nbsp;Unless&nbsp;required&nbsp;by&nbsp;applicable&nbsp;law&nbsp;or&nbsp;agreed&nbsp;to&nbsp;in&nbsp;writing,&nbsp;software</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_13">13</td><td wrap="wrap" class="diff_line">&nbsp;*&nbsp;distributed&nbsp;under&nbsp;the&nbsp;License&nbsp;is&nbsp;distributed&nbsp;on&nbsp;an&nbsp;"AS&nbsp;IS"&nbsp;BASIS,</td><tr><td class="diff_next"><a href="#difflib_chg_to0__2">▼</a></td><td class="diff_num" id="from0_14">14</td><td wrap="wrap" class="diff_line"><span class="diff_sub">&nbsp;*&nbsp;WITHOUT&nbsp;WARRANTIES&nbsp;OR&nbsp;CONDITIONS&nbsp;OF&nbsp;ANY&nbsp;KIND,&nbsp;either&nbsp;express&nbsp;or&nbsp;implied.sssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss</span></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_15">15</td><td wrap="wrap" class="diff_line">&nbsp;*&nbsp;See&nbsp;the&nbsp;License&nbsp;for&nbsp;the&nbsp;specific&nbsp;language&nbsp;governing&nbsp;permissions&nbsp;and</td><tr><td class="diff_next" id="difflib_chg_to0__2"></td><td class="diff_num" id="from0_16">16</td><td wrap="wrap" class="diff_line">&nbsp;*&nbsp;limitations&nbsp;under&nbsp;the&nbsp;License.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_17">17</td><td wrap="wrap" class="diff_line">&nbsp;*/</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_18">18</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_19">19</td><td wrap="wrap" class="diff_line">#include&nbsp;&lt;algorithm&gt;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_20">20</td><td wrap="wrap" class="diff_line">#include&nbsp;&lt;limits&gt;</td><tr><td class="diff_next"><a href="#difflib_chg_to0__3">▼</a></td><td class="diff_num" id="from0_21">21</td><td wrap="wrap" class="diff_line">//&nbsp;Code&nbsp;known&nbsp;to&nbsp;compile&nbsp;and&nbsp;run<span class="diff_sub">n</span>&nbsp;with&nbsp;Qt&nbsp;4.3&nbsp;through&nbsp;Qt&nbsp;4.7.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_22">22</td><td wrap="wrap" class="diff_line">#include&nbsp;&lt;QtCore&gt;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_23">23</td><td wrap="wrap" class="diff_line">#include&nbsp;&lt;time.h&gt;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_24">24</td><td wrap="wrap" class="diff_line">#include&nbsp;"diff_match_patch.h"</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_25">25</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_26">26</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_27">27</td><td wrap="wrap" class="diff_line">//////////////////////////</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_28">28</td><td wrap="wrap" class="diff_line">//</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_29">29</td><td wrap="wrap" class="diff_line">//&nbsp;Diff&nbsp;Class</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_30">30</td><td wrap="wrap" class="diff_line">//</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_31">31</td><td wrap="wrap" class="diff_line">//////////////////////////</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_32">32</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_33">33</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_34">34</td><td wrap="wrap" class="diff_line">/**</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_35">35</td><td wrap="wrap" class="diff_line">&nbsp;*&nbsp;Constructor.&nbsp;&nbsp;Initializes&nbsp;the&nbsp;diff&nbsp;with&nbsp;the&nbsp;provided&nbsp;values.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_36">36</td><td wrap="wrap" class="diff_line">&nbsp;*&nbsp;@param&nbsp;operation&nbsp;One&nbsp;of&nbsp;INSERT,&nbsp;DELETE&nbsp;or&nbsp;EQUAL</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_37">37</td><td wrap="wrap" class="diff_line">&nbsp;*&nbsp;@param&nbsp;text&nbsp;The&nbsp;text&nbsp;being&nbsp;applied</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_38">38</td><td wrap="wrap" class="diff_line">&nbsp;*/</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_39">39</td><td wrap="wrap" class="diff_line">Diff::Diff(Operation&nbsp;_operation,&nbsp;const&nbsp;QString&nbsp;&amp;_text)&nbsp;:</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_40">40</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;operation(_operation),&nbsp;text(_text)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_41">41</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Construct&nbsp;a&nbsp;diff&nbsp;with&nbsp;the&nbsp;specified&nbsp;operation&nbsp;and&nbsp;text.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_42">42</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_43">43</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_44">44</td><td wrap="wrap" class="diff_line">Diff::Diff()&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_45">45</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_46">46</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_47">47</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_48">48</td><td wrap="wrap" class="diff_line">QString&nbsp;Diff::strOperation(Operation&nbsp;op)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_49">49</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;switch&nbsp;(op)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_50">50</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;INSERT:</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_51">51</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;"INSERT";</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_52">52</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;DELETE:</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_53">53</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;"DELETE";</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_54">54</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;EQUAL:</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_55">55</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;"EQUAL";</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_56">56</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_57">57</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;throw&nbsp;"Invalid&nbsp;operation.";</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_58">58</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_59">59</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_60">60</td><td wrap="wrap" class="diff_line">/**</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_61">61</td><td wrap="wrap" class="diff_line">&nbsp;*&nbsp;Display&nbsp;a&nbsp;human-readable&nbsp;version&nbsp;of&nbsp;this&nbsp;Diff.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_62">62</td><td wrap="wrap" class="diff_line">&nbsp;*&nbsp;@return&nbsp;text&nbsp;version</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_63">63</td><td wrap="wrap" class="diff_line">&nbsp;*/</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_64">64</td><td wrap="wrap" class="diff_line">QString&nbsp;Diff::toString()&nbsp;const&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_65">65</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;prettyText&nbsp;=&nbsp;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_66">66</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Replace&nbsp;linebreaks&nbsp;with&nbsp;Pilcrow&nbsp;signs.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_67">67</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;prettyText.replace('\n',&nbsp;L'\u00b6');</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_68">68</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;QString("Diff(")&nbsp;+&nbsp;strOperation(operation)&nbsp;+&nbsp;QString(",\"")</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_69">69</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;prettyText&nbsp;+&nbsp;QString("\")");</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_70">70</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_71">71</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_72">72</td><td wrap="wrap" class="diff_line">/**</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_73">73</td><td wrap="wrap" class="diff_line">&nbsp;*&nbsp;Is&nbsp;this&nbsp;Diff&nbsp;equivalent&nbsp;to&nbsp;another&nbsp;Diff?</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_74">74</td><td wrap="wrap" class="diff_line">&nbsp;*&nbsp;@param&nbsp;d&nbsp;Another&nbsp;Diff&nbsp;to&nbsp;compare&nbsp;against</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_75">75</td><td wrap="wrap" class="diff_line">&nbsp;*&nbsp;@return&nbsp;true&nbsp;or&nbsp;false</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_76">76</td><td wrap="wrap" class="diff_line">&nbsp;*/</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_77">77</td><td wrap="wrap" class="diff_line">bool&nbsp;Diff::operator==(const&nbsp;Diff&nbsp;&amp;d)&nbsp;const&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_78">78</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;(d.operation&nbsp;==&nbsp;this-&gt;operation)&nbsp;&amp;&amp;&nbsp;(d.text&nbsp;==&nbsp;this-&gt;text);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_79">79</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_80">80</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_81">81</td><td wrap="wrap" class="diff_line">bool&nbsp;Diff::operator!=(const&nbsp;Diff&nbsp;&amp;d)&nbsp;const&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_82">82</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;!(operator&nbsp;==&nbsp;(d));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_83">83</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_84">84</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_85">85</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_86">86</td><td wrap="wrap" class="diff_line">/////////////////////////////////////////////</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_87">87</td><td wrap="wrap" class="diff_line">//</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_88">88</td><td wrap="wrap" class="diff_line">//&nbsp;Patch&nbsp;Class</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_89">89</td><td wrap="wrap" class="diff_line">//</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_90">90</td><td wrap="wrap" class="diff_line">/////////////////////////////////////////////</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_91">91</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_92">92</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_93">93</td><td wrap="wrap" class="diff_line">/**</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_94">94</td><td wrap="wrap" class="diff_line">&nbsp;*&nbsp;Constructor.&nbsp;&nbsp;Initializes&nbsp;with&nbsp;an&nbsp;empty&nbsp;list&nbsp;of&nbsp;diffs.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_95">95</td><td wrap="wrap" class="diff_line">&nbsp;*/</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_96">96</td><td wrap="wrap" class="diff_line">Patch::Patch()&nbsp;:</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_97">97</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;start1(0),&nbsp;start2(0),</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_98">98</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;length1(0),&nbsp;length2(0)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_99">99</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_100">100</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_101">101</td><td wrap="wrap" class="diff_line">bool&nbsp;Patch::isNull()&nbsp;const&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_102">102</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(start1&nbsp;==&nbsp;0&nbsp;&amp;&amp;&nbsp;start2&nbsp;==&nbsp;0&nbsp;&amp;&amp;&nbsp;length1&nbsp;==&nbsp;0&nbsp;&amp;&amp;&nbsp;length2&nbsp;==&nbsp;0</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_103">103</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;&nbsp;diffs.size()&nbsp;==&nbsp;0)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_104">104</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_105">105</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_106">106</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;false;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_107">107</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_108">108</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_109">109</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_110">110</td><td wrap="wrap" class="diff_line">/**</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_111">111</td><td wrap="wrap" class="diff_line">&nbsp;*&nbsp;Emulate&nbsp;GNU&nbsp;diff's&nbsp;format.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_112">112</td><td wrap="wrap" class="diff_line">&nbsp;*&nbsp;Header:&nbsp;@@&nbsp;-382,8&nbsp;+481,9&nbsp;@@</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_113">113</td><td wrap="wrap" class="diff_line">&nbsp;*&nbsp;Indices&nbsp;are&nbsp;printed&nbsp;as&nbsp;1-based,&nbsp;not&nbsp;0-based.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_114">114</td><td wrap="wrap" class="diff_line">&nbsp;*&nbsp;@return&nbsp;The&nbsp;GNU&nbsp;diff&nbsp;string</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_115">115</td><td wrap="wrap" class="diff_line">&nbsp;*/</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_116">116</td><td wrap="wrap" class="diff_line">QString&nbsp;Patch::toString()&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_117">117</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;coords1,&nbsp;coords2;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_118">118</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(length1&nbsp;==&nbsp;0)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_119">119</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;coords1&nbsp;=&nbsp;QString::number(start1)&nbsp;+&nbsp;QString(",0");</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_120">120</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(length1&nbsp;==&nbsp;1)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_121">121</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;coords1&nbsp;=&nbsp;QString::number(start1&nbsp;+&nbsp;1);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_122">122</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_123">123</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;coords1&nbsp;=&nbsp;QString::number(start1&nbsp;+&nbsp;1)&nbsp;+&nbsp;QString(",")</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_124">124</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;QString::number(length1);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_125">125</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_126">126</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(length2&nbsp;==&nbsp;0)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_127">127</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;coords2&nbsp;=&nbsp;QString::number(start2)&nbsp;+&nbsp;QString(",0");</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_128">128</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(length2&nbsp;==&nbsp;1)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_129">129</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;coords2&nbsp;=&nbsp;QString::number(start2&nbsp;+&nbsp;1);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_130">130</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_131">131</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;coords2&nbsp;=&nbsp;QString::number(start2&nbsp;+&nbsp;1)&nbsp;+&nbsp;QString(",")</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_132">132</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;QString::number(length2);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_133">133</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_134">134</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_135">135</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;text&nbsp;=&nbsp;QString("@@&nbsp;-")&nbsp;+&nbsp;coords1&nbsp;+&nbsp;QString("&nbsp;+")&nbsp;+&nbsp;coords2</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_136">136</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;QString("&nbsp;@@\n");</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_137">137</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Escape&nbsp;the&nbsp;body&nbsp;of&nbsp;the&nbsp;patch&nbsp;with&nbsp;%xx&nbsp;notation.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_138">138</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;foreach&nbsp;(Diff&nbsp;aDiff,&nbsp;diffs)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_139">139</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;switch&nbsp;(aDiff.operation)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_140">140</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;INSERT:</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_141">141</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text&nbsp;+=&nbsp;QString('+');</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_142">142</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_143">143</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;DELETE:</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_144">144</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text&nbsp;+=&nbsp;QString('-');</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_145">145</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_146">146</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;EQUAL:</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_147">147</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text&nbsp;+=&nbsp;QString('&nbsp;');</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_148">148</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_149">149</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_150">150</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;text&nbsp;+=&nbsp;QString(QUrl::toPercentEncoding(aDiff.text,&nbsp;"&nbsp;!~*'();/?:@&amp;=+$,#"))</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_151">151</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;QString("\n");</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_152">152</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_153">153</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_154">154</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_155">155</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_156">156</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_157">157</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_158">158</td><td wrap="wrap" class="diff_line">/////////////////////////////////////////////</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_159">159</td><td wrap="wrap" class="diff_line">//</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_160">160</td><td wrap="wrap" class="diff_line">//&nbsp;diff_match_patch&nbsp;Class</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_161">161</td><td wrap="wrap" class="diff_line">//</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_162">162</td><td wrap="wrap" class="diff_line">/////////////////////////////////////////////</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_163">163</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_164">164</td><td wrap="wrap" class="diff_line">diff_match_patch::diff_match_patch()&nbsp;:</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_165">165</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Diff_Timeout(1.0f),</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_166">166</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Diff_EditCost(4),</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_167">167</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Match_Threshold(0.5f),</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_168">168</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Match_Distance(1000),</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_169">169</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Patch_DeleteThreshold(0.5f),</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_170">170</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Patch_Margin(4),</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_171">171</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Match_MaxBits(32)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_172">172</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_173">173</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_174">174</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_175">175</td><td wrap="wrap" class="diff_line">QList&lt;Diff&gt;&nbsp;diff_match_patch::diff_main(const&nbsp;QString&nbsp;&amp;text1,</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_176">176</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QString&nbsp;&amp;text2)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_177">177</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;diff_main(text1,&nbsp;text2,&nbsp;true);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_178">178</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_179">179</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_180">180</td><td wrap="wrap" class="diff_line">QList&lt;Diff&gt;&nbsp;diff_match_patch::diff_main(const&nbsp;QString&nbsp;&amp;text1,</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_181">181</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QString&nbsp;&amp;text2,&nbsp;bool&nbsp;checklines)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_182">182</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Set&nbsp;a&nbsp;deadline&nbsp;by&nbsp;which&nbsp;time&nbsp;the&nbsp;diff&nbsp;must&nbsp;be&nbsp;complete.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_183">183</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;clock_t&nbsp;deadline;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_184">184</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(Diff_Timeout&nbsp;&lt;=&nbsp;0)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_185">185</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;deadline&nbsp;=&nbsp;std::numeric_limits&lt;clock_t&gt;::max();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_186">186</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next" id="difflib_chg_to0__3"></td><td class="diff_num" id="from0_187">187</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;deadline&nbsp;=&nbsp;clock()&nbsp;+&nbsp;(clock_t)(Diff_Timeout&nbsp;*&nbsp;CLOCKS_PER_SEC);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_188">188</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_189">189</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;diff_main(text1,&nbsp;text2,&nbsp;checklines,&nbsp;deadline);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_190">190</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_191">191</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"><a href="#difflib_chg_to0__4">▼</a></td><td class="diff_num" id="from0_192">192</td><td wrap="wrap" class="diff_line"><span class="diff_sub">QList&lt;Diff&gt;&nbsp;diff_match_patch::diff_main(const&nbsp;QString&nbsp;&amp;text1,</span></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_193">193</td><td wrap="wrap" class="diff_line"><span class="diff_sub">&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QString&nbsp;&amp;text2,&nbsp;bool&nbsp;checklines,&nbsp;clock_t&nbsp;deadline)&nbsp;{</span></td><tr><td class="diff_next" id="difflib_chg_to0__4"></td><td class="diff_num" id="from0_194">194</td><td wrap="wrap" class="diff_line"><span class="diff_sub">&nbsp;&nbsp;//&nbsp;Check&nbsp;for&nbsp;null&nbsp;inputs.</span></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_195">195</td><td wrap="wrap" class="diff_line"><span class="diff_sub">&nbsp;&nbsp;if&nbsp;(text1.isNull()&nbsp;||&nbsp;text2.isNull())&nbsp;{</span></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_196">196</td><td wrap="wrap" class="diff_line"><span class="diff_sub">&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;"Null&nbsp;inputs.&nbsp;(diff_main)";</span></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_197">197</td><td wrap="wrap" class="diff_line"><span class="diff_sub">&nbsp;&nbsp;}</span></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_198">198</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"><a href="#difflib_chg_to0__5">▼</a></td><td class="diff_num" id="from0_199">199</td><td wrap="wrap" class="diff_line"><span class="diff_sub">&nbsp;&nbsp;//&nbsp;Check&nbsp;for&nbsp;equality&nbsp;(speedup).</span></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_200">200</td><td wrap="wrap" class="diff_line"><span class="diff_sub">&nbsp;&nbsp;QList&lt;Diff&gt;&nbsp;diffs;</span></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_201">201</td><td wrap="wrap" class="diff_line"><span class="diff_sub">&nbsp;&nbsp;if&nbsp;(text1&nbsp;==&nbsp;text2)&nbsp;{</span></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_202">202</td><td wrap="wrap" class="diff_line"><span class="diff_sub">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!text1.isEmpty())&nbsp;{</span></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_203">203</td><td wrap="wrap" class="diff_line"><span class="diff_sub">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;diffs.append(Diff(EQUAL,&nbsp;text1));</span></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_204">204</td><td wrap="wrap" class="diff_line"><span class="diff_sub">&nbsp;&nbsp;&nbsp;&nbsp;}</span></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_205">205</td><td wrap="wrap" class="diff_line"><span class="diff_sub">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;diffs;</span></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_206">206</td><td wrap="wrap" class="diff_line"><span class="diff_sub">&nbsp;&nbsp;}</span></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_207">207</td><td wrap="wrap" class="diff_line"><span class="diff_sub">&nbsp;</span></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_208">208</td><td wrap="wrap" class="diff_line"><span class="diff_sub">&nbsp;&nbsp;//&nbsp;Trim&nbsp;off&nbsp;common&nbsp;prefix&nbsp;(speedup).</span></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_209">209</td><td wrap="wrap" class="diff_line"><span class="diff_sub">&nbsp;&nbsp;int&nbsp;commonlength&nbsp;=&nbsp;diff_commonPrefix(text1,&nbsp;text2);</span></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_210">210</td><td wrap="wrap" class="diff_line"><span class="diff_sub">&nbsp;&nbsp;const&nbsp;QString&nbsp;&amp;commonprefix&nbsp;=&nbsp;text1.left(commonlength);</span></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_211">211</td><td wrap="wrap" class="diff_line"><span class="diff_sub">&nbsp;&nbsp;QString&nbsp;textChopped1&nbsp;=&nbsp;text1.mid(commonlength);</span></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_212">212</td><td wrap="wrap" class="diff_line"><span class="diff_sub">&nbsp;&nbsp;QString&nbsp;textChopped2&nbsp;=&nbsp;text2.mid(commonlength);</span></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_213">213</td><td wrap="wrap" class="diff_line"><span class="diff_sub">&nbsp;</span></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_214">214</td><td wrap="wrap" class="diff_line"><span class="diff_sub">&nbsp;&nbsp;//&nbsp;Trim&nbsp;off&nbsp;common&nbsp;suffix&nbsp;(speedup).</span></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_215">215</td><td wrap="wrap" class="diff_line"><span class="diff_sub">&nbsp;&nbsp;commonlength&nbsp;=&nbsp;diff_commonSuffix(textChopped1,&nbsp;textChopped2);</span></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_216">216</td><td wrap="wrap" class="diff_line"><span class="diff_sub">&nbsp;&nbsp;const&nbsp;QString&nbsp;&amp;commonsuffix&nbsp;=&nbsp;textChopped1.right(commonlength);</span></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_217">217</td><td wrap="wrap" class="diff_line"><span class="diff_sub">&nbsp;&nbsp;textChopped1&nbsp;=&nbsp;textChopped1.left(textChopped1.length()&nbsp;-&nbsp;commonlength);</span></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_218">218</td><td wrap="wrap" class="diff_line"><span class="diff_sub">&nbsp;&nbsp;textChopped2&nbsp;=&nbsp;textChopped2.left(textChopped2.length()&nbsp;-&nbsp;commonlength);</span></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_219">219</td><td wrap="wrap" class="diff_line"><span class="diff_sub">&nbsp;</span></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_220">220</td><td wrap="wrap" class="diff_line"><span class="diff_sub">&nbsp;&nbsp;//&nbsp;Compute&nbsp;the&nbsp;diff&nbsp;on&nbsp;the&nbsp;middle&nbsp;block.</span></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_221">221</td><td wrap="wrap" class="diff_line"><span class="diff_sub">&nbsp;&nbsp;diffs&nbsp;=&nbsp;diff_compute(textChopped1,&nbsp;textChopped2,&nbsp;checklines,&nbsp;deadline);</span></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_222">222</td><td wrap="wrap" class="diff_line"><span class="diff_sub">&nbsp;</span></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_223">223</td><td wrap="wrap" class="diff_line"><span class="diff_sub">&nbsp;&nbsp;//&nbsp;Restore&nbsp;the&nbsp;prefix&nbsp;and&nbsp;suffix.</span></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_224">224</td><td wrap="wrap" class="diff_line"><span class="diff_sub">&nbsp;&nbsp;if&nbsp;(!commonprefix.isEmpty())&nbsp;{</span></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_225">225</td><td wrap="wrap" class="diff_line"><span class="diff_sub">&nbsp;&nbsp;&nbsp;&nbsp;diffs.prepend(Diff(EQUAL,&nbsp;commonprefix));</span></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_226">226</td><td wrap="wrap" class="diff_line"><span class="diff_sub">&nbsp;&nbsp;}</span></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_227">227</td><td wrap="wrap" class="diff_line"><span class="diff_sub">&nbsp;&nbsp;if&nbsp;(!commonsuffix.isEmpty())&nbsp;{</span></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_228">228</td><td wrap="wrap" class="diff_line"><span class="diff_sub">&nbsp;&nbsp;&nbsp;&nbsp;diffs.append(Diff(EQUAL,&nbsp;commonsuffix));</span></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_229">229</td><td wrap="wrap" class="diff_line"><span class="diff_sub">&nbsp;&nbsp;}</span></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_230">230</td><td wrap="wrap" class="diff_line"><span class="diff_sub">&nbsp;</span></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_231">231</td><td wrap="wrap" class="diff_line"><span class="diff_sub">&nbsp;&nbsp;diff_cleanupMerge(diffs);</span></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_232">232</td><td wrap="wrap" class="diff_line"><span class="diff_sub">&nbsp;</span></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_233">233</td><td wrap="wrap" class="diff_line"><span class="diff_sub">&nbsp;&nbsp;return&nbsp;diffs;</span></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_234">234</td><td wrap="wrap" class="diff_line"><span class="diff_sub">}</span></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_235">235</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_236">236</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_237">237</td><td wrap="wrap" class="diff_line">QList&lt;Diff&gt;&nbsp;diff_match_patch::diff_compute(QString&nbsp;text1,&nbsp;QString&nbsp;text2,</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_238">238</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;checklines,&nbsp;clock_t&nbsp;deadline)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_239">239</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QList&lt;Diff&gt;&nbsp;diffs;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_240">240</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_241">241</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(text1.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_242">242</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Just&nbsp;add&nbsp;some&nbsp;text&nbsp;(speedup).</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_243">243</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;diffs.append(Diff(INSERT,&nbsp;text2));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_244">244</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;diffs;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_245">245</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_246">246</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_247">247</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(text2.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_248">248</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Just&nbsp;delete&nbsp;some&nbsp;text&nbsp;(speedup).</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_249">249</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;diffs.append(Diff(DELETE,&nbsp;text1));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_250">250</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;diffs;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_251">251</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_252">252</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_253">253</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_254">254</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QString&nbsp;longtext&nbsp;=&nbsp;text1.length()&nbsp;&gt;&nbsp;text2.length()&nbsp;?&nbsp;text1&nbsp;:&nbsp;text2;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_255">255</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QString&nbsp;shorttext&nbsp;=&nbsp;text1.length()&nbsp;&gt;&nbsp;text2.length()&nbsp;?&nbsp;text2&nbsp;:&nbsp;text1;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_256">256</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;int&nbsp;i&nbsp;=&nbsp;longtext.indexOf(shorttext);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_257">257</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(i&nbsp;!=&nbsp;-1)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_258">258</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Shorter&nbsp;text&nbsp;is&nbsp;inside&nbsp;the&nbsp;longer&nbsp;text&nbsp;(speedup).</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_259">259</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;Operation&nbsp;op&nbsp;=&nbsp;(text1.length()&nbsp;&gt;&nbsp;text2.length())&nbsp;?&nbsp;DELETE&nbsp;:&nbsp;INSERT;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_260">260</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;diffs.append(Diff(op,&nbsp;longtext.left(i)));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_261">261</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;diffs.append(Diff(EQUAL,&nbsp;shorttext));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_262">262</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;diffs.append(Diff(op,&nbsp;safeMid(longtext,&nbsp;i&nbsp;+&nbsp;shorttext.length())));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_263">263</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;diffs;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_264">264</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_265">265</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_266">266</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(shorttext.length()&nbsp;==&nbsp;1)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_267">267</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Single&nbsp;character&nbsp;string.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_268">268</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;After&nbsp;the&nbsp;previous&nbsp;speedup,&nbsp;the&nbsp;character&nbsp;can't&nbsp;be&nbsp;an&nbsp;equality.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_269">269</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;diffs.append(Diff(DELETE,&nbsp;text1));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_270">270</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;diffs.append(Diff(INSERT,&nbsp;text2));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_271">271</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;diffs;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_272">272</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_273">273</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Garbage&nbsp;collect&nbsp;longtext&nbsp;and&nbsp;shorttext&nbsp;by&nbsp;scoping&nbsp;out.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_274">274</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_275">275</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_276">276</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Check&nbsp;to&nbsp;see&nbsp;if&nbsp;the&nbsp;problem&nbsp;can&nbsp;be&nbsp;split&nbsp;in&nbsp;two.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_277">277</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;QStringList&nbsp;hm&nbsp;=&nbsp;diff_halfMatch(text1,&nbsp;text2);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_278">278</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(hm.count()&nbsp;&gt;&nbsp;0)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_279">279</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;A&nbsp;half-match&nbsp;was&nbsp;found,&nbsp;sort&nbsp;out&nbsp;the&nbsp;return&nbsp;data.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_280">280</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QString&nbsp;text1_a&nbsp;=&nbsp;hm[0];</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_281">281</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QString&nbsp;text1_b&nbsp;=&nbsp;hm[1];</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_282">282</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QString&nbsp;text2_a&nbsp;=&nbsp;hm[2];</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_283">283</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QString&nbsp;text2_b&nbsp;=&nbsp;hm[3];</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_284">284</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QString&nbsp;mid_common&nbsp;=&nbsp;hm[4];</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_285">285</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Send&nbsp;both&nbsp;pairs&nbsp;off&nbsp;for&nbsp;separate&nbsp;processing.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_286">286</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QList&lt;Diff&gt;&nbsp;diffs_a&nbsp;=&nbsp;diff_main(text1_a,&nbsp;text2_a,</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_287">287</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;checklines,&nbsp;deadline);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_288">288</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QList&lt;Diff&gt;&nbsp;diffs_b&nbsp;=&nbsp;diff_main(text1_b,&nbsp;text2_b,</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_289">289</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;checklines,&nbsp;deadline);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_290">290</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Merge&nbsp;the&nbsp;results.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_291">291</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;diffs&nbsp;=&nbsp;diffs_a;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_292">292</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;diffs.append(Diff(EQUAL,&nbsp;mid_common));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_293">293</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;diffs&nbsp;+=&nbsp;diffs_b;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_294">294</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;diffs;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_295">295</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_296">296</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_297">297</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Perform&nbsp;a&nbsp;real&nbsp;diff.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_298">298</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(checklines&nbsp;&amp;&amp;&nbsp;text1.length()&nbsp;&gt;&nbsp;100&nbsp;&amp;&amp;&nbsp;text2.length()&nbsp;&gt;&nbsp;100)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_299">299</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;diff_lineMode(text1,&nbsp;text2,&nbsp;deadline);</td><tr><td class="diff_next" id="difflib_chg_to0__5"></td><td class="diff_num" id="from0_300">300</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_301">301</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_302">302</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;diff_bisect(text1,&nbsp;text2,&nbsp;deadline);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_303">303</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_304">304</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"><a href="#difflib_chg_to0__top">▲</a></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_305">305</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_306">306</td><td wrap="wrap" class="diff_line">QList&lt;Diff&gt;&nbsp;diff_match_patch::diff_lineMode(QString&nbsp;text1,&nbsp;QString&nbsp;text2,</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_307">307</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;clock_t&nbsp;deadline)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_308">308</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Scan&nbsp;the&nbsp;text&nbsp;on&nbsp;a&nbsp;line-by-line&nbsp;basis&nbsp;first.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_309">309</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;QList&lt;QVariant&gt;&nbsp;b&nbsp;=&nbsp;diff_linesToChars(text1,&nbsp;text2);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_310">310</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;text1&nbsp;=&nbsp;b[0].toString();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_311">311</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;text2&nbsp;=&nbsp;b[1].toString();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_312">312</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QStringList&nbsp;linearray&nbsp;=&nbsp;b[2].toStringList();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_313">313</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_314">314</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QList&lt;Diff&gt;&nbsp;diffs&nbsp;=&nbsp;diff_main(text1,&nbsp;text2,&nbsp;false,&nbsp;deadline);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_315">315</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_316">316</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Convert&nbsp;the&nbsp;diff&nbsp;back&nbsp;to&nbsp;original&nbsp;text.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_317">317</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;diff_charsToLines(diffs,&nbsp;linearray);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_318">318</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Eliminate&nbsp;freak&nbsp;matches&nbsp;(e.g.&nbsp;blank&nbsp;lines)</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_319">319</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;diff_cleanupSemantic(diffs);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_320">320</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_321">321</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Rediff&nbsp;any&nbsp;replacement&nbsp;blocks,&nbsp;this&nbsp;time&nbsp;character-by-character.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_322">322</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Add&nbsp;a&nbsp;dummy&nbsp;entry&nbsp;at&nbsp;the&nbsp;end.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_323">323</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;diffs.append(Diff(EQUAL,&nbsp;""));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_324">324</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;count_delete&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_325">325</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;count_insert&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_326">326</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;text_delete&nbsp;=&nbsp;"";</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_327">327</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;text_insert&nbsp;=&nbsp;"";</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_328">328</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_329">329</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QMutableListIterator&lt;Diff&gt;&nbsp;pointer(diffs);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_330">330</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Diff&nbsp;*thisDiff&nbsp;=&nbsp;pointer.hasNext()&nbsp;?&nbsp;&amp;pointer.next()&nbsp;:&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_331">331</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;while&nbsp;(thisDiff&nbsp;!=&nbsp;NULL)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_332">332</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;switch&nbsp;(thisDiff-&gt;operation)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_333">333</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;INSERT:</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_334">334</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;count_insert++;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_335">335</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text_insert&nbsp;+=&nbsp;thisDiff-&gt;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_336">336</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_337">337</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;DELETE:</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_338">338</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;count_delete++;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_339">339</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text_delete&nbsp;+=&nbsp;thisDiff-&gt;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_340">340</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_341">341</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;EQUAL:</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_342">342</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Upon&nbsp;reaching&nbsp;an&nbsp;equality,&nbsp;check&nbsp;for&nbsp;prior&nbsp;redundancies.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_343">343</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(count_delete&nbsp;&gt;=&nbsp;1&nbsp;&amp;&amp;&nbsp;count_insert&nbsp;&gt;=&nbsp;1)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_344">344</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Delete&nbsp;the&nbsp;offending&nbsp;records&nbsp;and&nbsp;add&nbsp;the&nbsp;merged&nbsp;ones.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_345">345</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.previous();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_346">346</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(int&nbsp;j&nbsp;=&nbsp;0;&nbsp;j&nbsp;&lt;&nbsp;count_delete&nbsp;+&nbsp;count_insert;&nbsp;j++)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_347">347</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.previous();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_348">348</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.remove();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_349">349</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_350">350</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach(Diff&nbsp;newDiff,</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_351">351</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;diff_main(text_delete,&nbsp;text_insert,&nbsp;false,&nbsp;deadline))&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_352">352</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.insert(newDiff);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_353">353</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_354">354</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_355">355</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;count_insert&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_356">356</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;count_delete&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_357">357</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text_delete&nbsp;=&nbsp;"";</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_358">358</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text_insert&nbsp;=&nbsp;"";</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_359">359</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_360">360</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_361">361</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;thisDiff&nbsp;=&nbsp;pointer.hasNext()&nbsp;?&nbsp;&amp;pointer.next()&nbsp;:&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_362">362</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_363">363</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;diffs.removeLast();&nbsp;&nbsp;//&nbsp;Remove&nbsp;the&nbsp;dummy&nbsp;entry&nbsp;at&nbsp;the&nbsp;end.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_364">364</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_365">365</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;diffs;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_366">366</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_367">367</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_368">368</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_369">369</td><td wrap="wrap" class="diff_line">QList&lt;Diff&gt;&nbsp;diff_match_patch::diff_bisect(const&nbsp;QString&nbsp;&amp;text1,</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_370">370</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QString&nbsp;&amp;text2,&nbsp;clock_t&nbsp;deadline)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_371">371</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Cache&nbsp;the&nbsp;text&nbsp;lengths&nbsp;to&nbsp;prevent&nbsp;multiple&nbsp;calls.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_372">372</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;int&nbsp;text1_length&nbsp;=&nbsp;text1.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_373">373</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;int&nbsp;text2_length&nbsp;=&nbsp;text2.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_374">374</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;int&nbsp;max_d&nbsp;=&nbsp;(text1_length&nbsp;+&nbsp;text2_length&nbsp;+&nbsp;1)&nbsp;/&nbsp;2;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_375">375</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;int&nbsp;v_offset&nbsp;=&nbsp;max_d;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_376">376</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;int&nbsp;v_length&nbsp;=&nbsp;2&nbsp;*&nbsp;max_d;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_377">377</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;*v1&nbsp;=&nbsp;new&nbsp;int[v_length];</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_378">378</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;*v2&nbsp;=&nbsp;new&nbsp;int[v_length];</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_379">379</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;for&nbsp;(int&nbsp;x&nbsp;=&nbsp;0;&nbsp;x&nbsp;&lt;&nbsp;v_length;&nbsp;x++)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_380">380</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;v1[x]&nbsp;=&nbsp;-1;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_381">381</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;v2[x]&nbsp;=&nbsp;-1;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_382">382</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_383">383</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;v1[v_offset&nbsp;+&nbsp;1]&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_384">384</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;v2[v_offset&nbsp;+&nbsp;1]&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_385">385</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;int&nbsp;delta&nbsp;=&nbsp;text1_length&nbsp;-&nbsp;text2_length;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_386">386</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;If&nbsp;the&nbsp;total&nbsp;number&nbsp;of&nbsp;characters&nbsp;is&nbsp;odd,&nbsp;then&nbsp;the&nbsp;front&nbsp;path&nbsp;will</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_387">387</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;collide&nbsp;with&nbsp;the&nbsp;reverse&nbsp;path.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_388">388</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;bool&nbsp;front&nbsp;=&nbsp;(delta&nbsp;%&nbsp;2&nbsp;!=&nbsp;0);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_389">389</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Offsets&nbsp;for&nbsp;start&nbsp;and&nbsp;end&nbsp;of&nbsp;k&nbsp;loop.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_390">390</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Prevents&nbsp;mapping&nbsp;of&nbsp;space&nbsp;beyond&nbsp;the&nbsp;grid.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_391">391</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;k1start&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_392">392</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;k1end&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_393">393</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;k2start&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_394">394</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;k2end&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_395">395</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;for&nbsp;(int&nbsp;d&nbsp;=&nbsp;0;&nbsp;d&nbsp;&lt;&nbsp;max_d;&nbsp;d++)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_396">396</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Bail&nbsp;out&nbsp;if&nbsp;deadline&nbsp;is&nbsp;reached.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_397">397</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(clock()&nbsp;&gt;&nbsp;deadline)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_398">398</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_399">399</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_400">400</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_401">401</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Walk&nbsp;the&nbsp;front&nbsp;path&nbsp;one&nbsp;step.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_402">402</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(int&nbsp;k1&nbsp;=&nbsp;-d&nbsp;+&nbsp;k1start;&nbsp;k1&nbsp;&lt;=&nbsp;d&nbsp;-&nbsp;k1end;&nbsp;k1&nbsp;+=&nbsp;2)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_403">403</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;int&nbsp;k1_offset&nbsp;=&nbsp;v_offset&nbsp;+&nbsp;k1;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_404">404</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;x1;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_405">405</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(k1&nbsp;==&nbsp;-d&nbsp;||&nbsp;(k1&nbsp;!=&nbsp;d&nbsp;&amp;&amp;&nbsp;v1[k1_offset&nbsp;-&nbsp;1]&nbsp;&lt;&nbsp;v1[k1_offset&nbsp;+&nbsp;1]))&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_406">406</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x1&nbsp;=&nbsp;v1[k1_offset&nbsp;+&nbsp;1];</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_407">407</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_408">408</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x1&nbsp;=&nbsp;v1[k1_offset&nbsp;-&nbsp;1]&nbsp;+&nbsp;1;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_409">409</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_410">410</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;y1&nbsp;=&nbsp;x1&nbsp;-&nbsp;k1;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_411">411</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(x1&nbsp;&lt;&nbsp;text1_length&nbsp;&amp;&amp;&nbsp;y1&nbsp;&lt;&nbsp;text2_length</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_412">412</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;&nbsp;text1[x1]&nbsp;==&nbsp;text2[y1])&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_413">413</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x1++;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_414">414</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y1++;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_415">415</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_416">416</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v1[k1_offset]&nbsp;=&nbsp;x1;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_417">417</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(x1&nbsp;&gt;&nbsp;text1_length)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_418">418</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Ran&nbsp;off&nbsp;the&nbsp;right&nbsp;of&nbsp;the&nbsp;graph.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_419">419</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;k1end&nbsp;+=&nbsp;2;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_420">420</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(y1&nbsp;&gt;&nbsp;text2_length)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_421">421</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Ran&nbsp;off&nbsp;the&nbsp;bottom&nbsp;of&nbsp;the&nbsp;graph.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_422">422</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;k1start&nbsp;+=&nbsp;2;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_423">423</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(front)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_424">424</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;k2_offset&nbsp;=&nbsp;v_offset&nbsp;+&nbsp;delta&nbsp;-&nbsp;k1;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_425">425</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(k2_offset&nbsp;&gt;=&nbsp;0&nbsp;&amp;&amp;&nbsp;k2_offset&nbsp;&lt;&nbsp;v_length&nbsp;&amp;&amp;&nbsp;v2[k2_offset]&nbsp;!=&nbsp;-1)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_426">426</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Mirror&nbsp;x2&nbsp;onto&nbsp;top-left&nbsp;coordinate&nbsp;system.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_427">427</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;x2&nbsp;=&nbsp;text1_length&nbsp;-&nbsp;v2[k2_offset];</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_428">428</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(x1&nbsp;&gt;=&nbsp;x2)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_429">429</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Overlap&nbsp;detected.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_430">430</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete&nbsp;[]&nbsp;v1;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_431">431</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete&nbsp;[]&nbsp;v2;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_432">432</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;diff_bisectSplit(text1,&nbsp;text2,&nbsp;x1,&nbsp;y1,&nbsp;deadline);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_433">433</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_434">434</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_435">435</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_436">436</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_437">437</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_438">438</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Walk&nbsp;the&nbsp;reverse&nbsp;path&nbsp;one&nbsp;step.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_439">439</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(int&nbsp;k2&nbsp;=&nbsp;-d&nbsp;+&nbsp;k2start;&nbsp;k2&nbsp;&lt;=&nbsp;d&nbsp;-&nbsp;k2end;&nbsp;k2&nbsp;+=&nbsp;2)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_440">440</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;int&nbsp;k2_offset&nbsp;=&nbsp;v_offset&nbsp;+&nbsp;k2;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_441">441</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;x2;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_442">442</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(k2&nbsp;==&nbsp;-d&nbsp;||&nbsp;(k2&nbsp;!=&nbsp;d&nbsp;&amp;&amp;&nbsp;v2[k2_offset&nbsp;-&nbsp;1]&nbsp;&lt;&nbsp;v2[k2_offset&nbsp;+&nbsp;1]))&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_443">443</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x2&nbsp;=&nbsp;v2[k2_offset&nbsp;+&nbsp;1];</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_444">444</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_445">445</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x2&nbsp;=&nbsp;v2[k2_offset&nbsp;-&nbsp;1]&nbsp;+&nbsp;1;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_446">446</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_447">447</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;y2&nbsp;=&nbsp;x2&nbsp;-&nbsp;k2;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_448">448</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(x2&nbsp;&lt;&nbsp;text1_length&nbsp;&amp;&amp;&nbsp;y2&nbsp;&lt;&nbsp;text2_length</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_449">449</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;&nbsp;text1[text1_length&nbsp;-&nbsp;x2&nbsp;-&nbsp;1]&nbsp;==&nbsp;text2[text2_length&nbsp;-&nbsp;y2&nbsp;-&nbsp;1])&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_450">450</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x2++;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_451">451</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y2++;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_452">452</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_453">453</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v2[k2_offset]&nbsp;=&nbsp;x2;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_454">454</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(x2&nbsp;&gt;&nbsp;text1_length)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_455">455</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Ran&nbsp;off&nbsp;the&nbsp;left&nbsp;of&nbsp;the&nbsp;graph.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_456">456</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;k2end&nbsp;+=&nbsp;2;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_457">457</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(y2&nbsp;&gt;&nbsp;text2_length)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_458">458</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Ran&nbsp;off&nbsp;the&nbsp;top&nbsp;of&nbsp;the&nbsp;graph.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_459">459</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;k2start&nbsp;+=&nbsp;2;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_460">460</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(!front)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_461">461</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;k1_offset&nbsp;=&nbsp;v_offset&nbsp;+&nbsp;delta&nbsp;-&nbsp;k2;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_462">462</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(k1_offset&nbsp;&gt;=&nbsp;0&nbsp;&amp;&amp;&nbsp;k1_offset&nbsp;&lt;&nbsp;v_length&nbsp;&amp;&amp;&nbsp;v1[k1_offset]&nbsp;!=&nbsp;-1)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_463">463</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;x1&nbsp;=&nbsp;v1[k1_offset];</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_464">464</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;y1&nbsp;=&nbsp;v_offset&nbsp;+&nbsp;x1&nbsp;-&nbsp;k1_offset;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_465">465</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Mirror&nbsp;x2&nbsp;onto&nbsp;top-left&nbsp;coordinate&nbsp;system.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_466">466</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x2&nbsp;=&nbsp;text1_length&nbsp;-&nbsp;x2;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_467">467</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(x1&nbsp;&gt;=&nbsp;x2)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_468">468</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Overlap&nbsp;detected.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_469">469</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete&nbsp;[]&nbsp;v1;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_470">470</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete&nbsp;[]&nbsp;v2;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_471">471</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;diff_bisectSplit(text1,&nbsp;text2,&nbsp;x1,&nbsp;y1,&nbsp;deadline);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_472">472</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_473">473</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_474">474</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_475">475</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_476">476</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_477">477</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;delete&nbsp;[]&nbsp;v1;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_478">478</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;delete&nbsp;[]&nbsp;v2;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_479">479</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Diff&nbsp;took&nbsp;too&nbsp;long&nbsp;and&nbsp;hit&nbsp;the&nbsp;deadline&nbsp;or</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_480">480</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;number&nbsp;of&nbsp;diffs&nbsp;equals&nbsp;number&nbsp;of&nbsp;characters,&nbsp;no&nbsp;commonality&nbsp;at&nbsp;all.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_481">481</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QList&lt;Diff&gt;&nbsp;diffs;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_482">482</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;diffs.append(Diff(DELETE,&nbsp;text1));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_483">483</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;diffs.append(Diff(INSERT,&nbsp;text2));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_484">484</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;diffs;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_485">485</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_486">486</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_487">487</td><td wrap="wrap" class="diff_line">QList&lt;Diff&gt;&nbsp;diff_match_patch::diff_bisectSplit(const&nbsp;QString&nbsp;&amp;text1,</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_488">488</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QString&nbsp;&amp;text2,&nbsp;int&nbsp;x,&nbsp;int&nbsp;y,&nbsp;clock_t&nbsp;deadline)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_489">489</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;text1a&nbsp;=&nbsp;text1.left(x);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_490">490</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;text2a&nbsp;=&nbsp;text2.left(y);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_491">491</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;text1b&nbsp;=&nbsp;safeMid(text1,&nbsp;x);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_492">492</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;text2b&nbsp;=&nbsp;safeMid(text2,&nbsp;y);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_493">493</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_494">494</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Compute&nbsp;both&nbsp;diffs&nbsp;serially.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_495">495</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QList&lt;Diff&gt;&nbsp;diffs&nbsp;=&nbsp;diff_main(text1a,&nbsp;text2a,&nbsp;false,&nbsp;deadline);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_496">496</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QList&lt;Diff&gt;&nbsp;diffsb&nbsp;=&nbsp;diff_main(text1b,&nbsp;text2b,&nbsp;false,&nbsp;deadline);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_497">497</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_498">498</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;diffs&nbsp;+&nbsp;diffsb;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_499">499</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_500">500</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_501">501</td><td wrap="wrap" class="diff_line">QList&lt;QVariant&gt;&nbsp;diff_match_patch::diff_linesToChars(const&nbsp;QString&nbsp;&amp;text1,</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_502">502</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QString&nbsp;&amp;text2)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_503">503</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QStringList&nbsp;lineArray;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_504">504</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QMap&lt;QString,&nbsp;int&gt;&nbsp;lineHash;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_505">505</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;e.g.&nbsp;linearray[4]&nbsp;==&nbsp;"Hello\n"</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_506">506</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;e.g.&nbsp;linehash.get("Hello\n")&nbsp;==&nbsp;4</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_507">507</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_508">508</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;"\x00"&nbsp;is&nbsp;a&nbsp;valid&nbsp;character,&nbsp;but&nbsp;various&nbsp;debuggers&nbsp;don't&nbsp;like&nbsp;it.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_509">509</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;So&nbsp;we'll&nbsp;insert&nbsp;a&nbsp;junk&nbsp;entry&nbsp;to&nbsp;avoid&nbsp;generating&nbsp;a&nbsp;null&nbsp;character.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_510">510</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;lineArray.append("");</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_511">511</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_512">512</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;QString&nbsp;chars1&nbsp;=&nbsp;diff_linesToCharsMunge(text1,&nbsp;lineArray,&nbsp;lineHash);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_513">513</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;QString&nbsp;chars2&nbsp;=&nbsp;diff_linesToCharsMunge(text2,&nbsp;lineArray,&nbsp;lineHash);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_514">514</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_515">515</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QList&lt;QVariant&gt;&nbsp;listRet;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_516">516</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;listRet.append(QVariant::fromValue(chars1));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_517">517</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;listRet.append(QVariant::fromValue(chars2));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_518">518</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;listRet.append(QVariant::fromValue(lineArray));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_519">519</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;listRet;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_520">520</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_521">521</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_522">522</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_523">523</td><td wrap="wrap" class="diff_line">QString&nbsp;diff_match_patch::diff_linesToCharsMunge(const&nbsp;QString&nbsp;&amp;text,</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_524">524</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;QStringList&nbsp;&amp;lineArray,</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_525">525</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;QMap&lt;QString,&nbsp;int&gt;&nbsp;&amp;lineHash)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_526">526</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;lineStart&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_527">527</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;lineEnd&nbsp;=&nbsp;-1;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_528">528</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;line;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_529">529</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;chars;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_530">530</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Walk&nbsp;the&nbsp;text,&nbsp;pulling&nbsp;out&nbsp;a&nbsp;substring&nbsp;for&nbsp;each&nbsp;line.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_531">531</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;text.split('\n')&nbsp;would&nbsp;would&nbsp;temporarily&nbsp;double&nbsp;our&nbsp;memory&nbsp;footprint.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_532">532</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Modifying&nbsp;text&nbsp;would&nbsp;create&nbsp;many&nbsp;large&nbsp;strings&nbsp;to&nbsp;garbage&nbsp;collect.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_533">533</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;while&nbsp;(lineEnd&nbsp;&lt;&nbsp;text.length()&nbsp;-&nbsp;1)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_534">534</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;lineEnd&nbsp;=&nbsp;text.indexOf('\n',&nbsp;lineStart);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_535">535</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(lineEnd&nbsp;==&nbsp;-1)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_536">536</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lineEnd&nbsp;=&nbsp;text.length()&nbsp;-&nbsp;1;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_537">537</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_538">538</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;line&nbsp;=&nbsp;safeMid(text,&nbsp;lineStart,&nbsp;lineEnd&nbsp;+&nbsp;1&nbsp;-&nbsp;lineStart);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_539">539</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;lineStart&nbsp;=&nbsp;lineEnd&nbsp;+&nbsp;1;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_540">540</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_541">541</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(lineHash.contains(line))&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_542">542</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chars&nbsp;+=&nbsp;QChar(static_cast&lt;ushort&gt;(lineHash.value(line)));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_543">543</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_544">544</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lineArray.append(line);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_545">545</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lineHash.insert(line,&nbsp;lineArray.size()&nbsp;-&nbsp;1);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_546">546</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chars&nbsp;+=&nbsp;QChar(static_cast&lt;ushort&gt;(lineArray.size()&nbsp;-&nbsp;1));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_547">547</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_548">548</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_549">549</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;chars;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_550">550</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_551">551</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_552">552</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_553">553</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_554">554</td><td wrap="wrap" class="diff_line">void&nbsp;diff_match_patch::diff_charsToLines(QList&lt;Diff&gt;&nbsp;&amp;diffs,</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_555">555</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QStringList&nbsp;&amp;lineArray)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_556">556</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Qt&nbsp;has&nbsp;no&nbsp;mutable&nbsp;foreach&nbsp;construct.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_557">557</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QMutableListIterator&lt;Diff&gt;&nbsp;i(diffs);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_558">558</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;while&nbsp;(i.hasNext())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_559">559</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;Diff&nbsp;&amp;diff&nbsp;=&nbsp;i.next();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_560">560</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;QString&nbsp;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_561">561</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(int&nbsp;y&nbsp;=&nbsp;0;&nbsp;y&nbsp;&lt;&nbsp;diff.text.length();&nbsp;y++)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_562">562</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text&nbsp;+=&nbsp;lineArray.value(static_cast&lt;ushort&gt;(diff.text[y].unicode()));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_563">563</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_564">564</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;diff.text&nbsp;=&nbsp;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_565">565</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_566">566</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_567">567</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_568">568</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_569">569</td><td wrap="wrap" class="diff_line">int&nbsp;diff_match_patch::diff_commonPrefix(const&nbsp;QString&nbsp;&amp;text1,</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_570">570</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QString&nbsp;&amp;text2)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_571">571</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Performance&nbsp;analysis:&nbsp;http://neil.fraser.name/news/2007/10/09/</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_572">572</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;int&nbsp;n&nbsp;=&nbsp;std::min(text1.length(),&nbsp;text2.length());</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_573">573</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;for&nbsp;(int&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;n;&nbsp;i++)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_574">574</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(text1[i]&nbsp;!=&nbsp;text2[i])&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_575">575</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;i;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_576">576</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_577">577</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_578">578</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;n;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_579">579</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_580">580</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_581">581</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_582">582</td><td wrap="wrap" class="diff_line">int&nbsp;diff_match_patch::diff_commonSuffix(const&nbsp;QString&nbsp;&amp;text1,</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_583">583</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QString&nbsp;&amp;text2)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_584">584</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Performance&nbsp;analysis:&nbsp;http://neil.fraser.name/news/2007/10/09/</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_585">585</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;int&nbsp;text1_length&nbsp;=&nbsp;text1.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_586">586</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;int&nbsp;text2_length&nbsp;=&nbsp;text2.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_587">587</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;int&nbsp;n&nbsp;=&nbsp;std::min(text1_length,&nbsp;text2_length);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_588">588</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;for&nbsp;(int&nbsp;i&nbsp;=&nbsp;1;&nbsp;i&nbsp;&lt;=&nbsp;n;&nbsp;i++)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_589">589</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(text1[text1_length&nbsp;-&nbsp;i]&nbsp;!=&nbsp;text2[text2_length&nbsp;-&nbsp;i])&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_590">590</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;i&nbsp;-&nbsp;1;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_591">591</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_592">592</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_593">593</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;n;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_594">594</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_595">595</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_596">596</td><td wrap="wrap" class="diff_line">int&nbsp;diff_match_patch::diff_commonOverlap(const&nbsp;QString&nbsp;&amp;text1,</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_597">597</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QString&nbsp;&amp;text2)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_598">598</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Cache&nbsp;the&nbsp;text&nbsp;lengths&nbsp;to&nbsp;prevent&nbsp;multiple&nbsp;calls.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_599">599</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;int&nbsp;text1_length&nbsp;=&nbsp;text1.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_600">600</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;int&nbsp;text2_length&nbsp;=&nbsp;text2.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_601">601</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Eliminate&nbsp;the&nbsp;null&nbsp;case.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_602">602</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(text1_length&nbsp;==&nbsp;0&nbsp;||&nbsp;text2_length&nbsp;==&nbsp;0)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_603">603</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_604">604</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_605">605</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Truncate&nbsp;the&nbsp;longer&nbsp;string.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_606">606</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;text1_trunc&nbsp;=&nbsp;text1;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_607">607</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;text2_trunc&nbsp;=&nbsp;text2;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_608">608</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(text1_length&nbsp;&gt;&nbsp;text2_length)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_609">609</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;text1_trunc&nbsp;=&nbsp;text1.right(text2_length);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_610">610</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(text1_length&nbsp;&lt;&nbsp;text2_length)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_611">611</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;text2_trunc&nbsp;=&nbsp;text2.left(text1_length);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_612">612</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_613">613</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;int&nbsp;text_length&nbsp;=&nbsp;std::min(text1_length,&nbsp;text2_length);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_614">614</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Quick&nbsp;check&nbsp;for&nbsp;the&nbsp;worst&nbsp;case.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_615">615</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(text1_trunc&nbsp;==&nbsp;text2_trunc)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_616">616</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;text_length;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_617">617</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_618">618</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_619">619</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Start&nbsp;by&nbsp;looking&nbsp;for&nbsp;a&nbsp;single&nbsp;character&nbsp;match</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_620">620</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;and&nbsp;increase&nbsp;length&nbsp;until&nbsp;no&nbsp;match&nbsp;is&nbsp;found.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_621">621</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Performance&nbsp;analysis:&nbsp;http://neil.fraser.name/news/2010/11/04/</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_622">622</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;best&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_623">623</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;length&nbsp;=&nbsp;1;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_624">624</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;while&nbsp;(true)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_625">625</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;QString&nbsp;pattern&nbsp;=&nbsp;text1_trunc.right(length);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_626">626</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;found&nbsp;=&nbsp;text2_trunc.indexOf(pattern);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_627">627</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(found&nbsp;==&nbsp;-1)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_628">628</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;best;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_629">629</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_630">630</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;length&nbsp;+=&nbsp;found;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_631">631</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(found&nbsp;==&nbsp;0&nbsp;||&nbsp;text1_trunc.right(length)&nbsp;==&nbsp;text2_trunc.left(length))&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_632">632</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;best&nbsp;=&nbsp;length;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_633">633</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;length++;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_634">634</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_635">635</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_636">636</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_637">637</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_638">638</td><td wrap="wrap" class="diff_line">QStringList&nbsp;diff_match_patch::diff_halfMatch(const&nbsp;QString&nbsp;&amp;text1,</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_639">639</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QString&nbsp;&amp;text2)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_640">640</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(Diff_Timeout&nbsp;&lt;=&nbsp;0)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_641">641</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Don't&nbsp;risk&nbsp;returning&nbsp;a&nbsp;non-optimal&nbsp;diff&nbsp;if&nbsp;we&nbsp;have&nbsp;unlimited&nbsp;time.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_642">642</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;QStringList();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_643">643</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_644">644</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;QString&nbsp;longtext&nbsp;=&nbsp;text1.length()&nbsp;&gt;&nbsp;text2.length()&nbsp;?&nbsp;text1&nbsp;:&nbsp;text2;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_645">645</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;QString&nbsp;shorttext&nbsp;=&nbsp;text1.length()&nbsp;&gt;&nbsp;text2.length()&nbsp;?&nbsp;text2&nbsp;:&nbsp;text1;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_646">646</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(longtext.length()&nbsp;&lt;&nbsp;4&nbsp;||&nbsp;shorttext.length()&nbsp;*&nbsp;2&nbsp;&lt;&nbsp;longtext.length())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_647">647</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;QStringList();&nbsp;&nbsp;//&nbsp;Pointless.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_648">648</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_649">649</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_650">650</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;First&nbsp;check&nbsp;if&nbsp;the&nbsp;second&nbsp;quarter&nbsp;is&nbsp;the&nbsp;seed&nbsp;for&nbsp;a&nbsp;half-match.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_651">651</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;QStringList&nbsp;hm1&nbsp;=&nbsp;diff_halfMatchI(longtext,&nbsp;shorttext,</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_652">652</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(longtext.length()&nbsp;+&nbsp;3)&nbsp;/&nbsp;4);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_653">653</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Check&nbsp;again&nbsp;based&nbsp;on&nbsp;the&nbsp;third&nbsp;quarter.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_654">654</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;QStringList&nbsp;hm2&nbsp;=&nbsp;diff_halfMatchI(longtext,&nbsp;shorttext,</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_655">655</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(longtext.length()&nbsp;+&nbsp;1)&nbsp;/&nbsp;2);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_656">656</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QStringList&nbsp;hm;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_657">657</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(hm1.isEmpty()&nbsp;&amp;&amp;&nbsp;hm2.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_658">658</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;QStringList();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_659">659</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(hm2.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_660">660</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;hm&nbsp;=&nbsp;hm1;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_661">661</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(hm1.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_662">662</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;hm&nbsp;=&nbsp;hm2;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_663">663</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_664">664</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Both&nbsp;matched.&nbsp;&nbsp;Select&nbsp;the&nbsp;longest.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_665">665</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;hm&nbsp;=&nbsp;hm1[4].length()&nbsp;&gt;&nbsp;hm2[4].length()&nbsp;?&nbsp;hm1&nbsp;:&nbsp;hm2;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_666">666</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_667">667</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_668">668</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;A&nbsp;half-match&nbsp;was&nbsp;found,&nbsp;sort&nbsp;out&nbsp;the&nbsp;return&nbsp;data.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_669">669</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(text1.length()&nbsp;&gt;&nbsp;text2.length())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_670">670</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;hm;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_671">671</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_672">672</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;QStringList&nbsp;listRet;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_673">673</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;listRet&nbsp;&lt;&lt;&nbsp;hm[2]&nbsp;&lt;&lt;&nbsp;hm[3]&nbsp;&lt;&lt;&nbsp;hm[0]&nbsp;&lt;&lt;&nbsp;hm[1]&nbsp;&lt;&lt;&nbsp;hm[4];</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_674">674</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;listRet;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_675">675</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_676">676</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_677">677</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_678">678</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_679">679</td><td wrap="wrap" class="diff_line">QStringList&nbsp;diff_match_patch::diff_halfMatchI(const&nbsp;QString&nbsp;&amp;longtext,</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_680">680</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QString&nbsp;&amp;shorttext,</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_681">681</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;i)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_682">682</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Start&nbsp;with&nbsp;a&nbsp;1/4&nbsp;length&nbsp;substring&nbsp;at&nbsp;position&nbsp;i&nbsp;as&nbsp;a&nbsp;seed.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_683">683</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;QString&nbsp;seed&nbsp;=&nbsp;safeMid(longtext,&nbsp;i,&nbsp;longtext.length()&nbsp;/&nbsp;4);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_684">684</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;j&nbsp;=&nbsp;-1;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_685">685</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;best_common;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_686">686</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;best_longtext_a,&nbsp;best_longtext_b;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_687">687</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;best_shorttext_a,&nbsp;best_shorttext_b;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_688">688</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;while&nbsp;((j&nbsp;=&nbsp;shorttext.indexOf(seed,&nbsp;j&nbsp;+&nbsp;1))&nbsp;!=&nbsp;-1)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_689">689</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;int&nbsp;prefixLength&nbsp;=&nbsp;diff_commonPrefix(safeMid(longtext,&nbsp;i),</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_690">690</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;safeMid(shorttext,&nbsp;j));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_691">691</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;int&nbsp;suffixLength&nbsp;=&nbsp;diff_commonSuffix(longtext.left(i),</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_692">692</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shorttext.left(j));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_693">693</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(best_common.length()&nbsp;&lt;&nbsp;suffixLength&nbsp;+&nbsp;prefixLength)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_694">694</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;best_common&nbsp;=&nbsp;safeMid(shorttext,&nbsp;j&nbsp;-&nbsp;suffixLength,&nbsp;suffixLength)</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_695">695</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;safeMid(shorttext,&nbsp;j,&nbsp;prefixLength);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_696">696</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;best_longtext_a&nbsp;=&nbsp;longtext.left(i&nbsp;-&nbsp;suffixLength);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_697">697</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;best_longtext_b&nbsp;=&nbsp;safeMid(longtext,&nbsp;i&nbsp;+&nbsp;prefixLength);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_698">698</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;best_shorttext_a&nbsp;=&nbsp;shorttext.left(j&nbsp;-&nbsp;suffixLength);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_699">699</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;best_shorttext_b&nbsp;=&nbsp;safeMid(shorttext,&nbsp;j&nbsp;+&nbsp;prefixLength);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_700">700</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_701">701</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_702">702</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(best_common.length()&nbsp;*&nbsp;2&nbsp;&gt;=&nbsp;longtext.length())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_703">703</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;QStringList&nbsp;listRet;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_704">704</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;listRet&nbsp;&lt;&lt;&nbsp;best_longtext_a&nbsp;&lt;&lt;&nbsp;best_longtext_b&nbsp;&lt;&lt;&nbsp;best_shorttext_a</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_705">705</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;best_shorttext_b&nbsp;&lt;&lt;&nbsp;best_common;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_706">706</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;listRet;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_707">707</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_708">708</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;QStringList();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_709">709</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_710">710</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_711">711</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_712">712</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_713">713</td><td wrap="wrap" class="diff_line">void&nbsp;diff_match_patch::diff_cleanupSemantic(QList&lt;Diff&gt;&nbsp;&amp;diffs)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_714">714</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(diffs.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_715">715</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_716">716</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_717">717</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;bool&nbsp;changes&nbsp;=&nbsp;false;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_718">718</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QStack&lt;Diff&gt;&nbsp;equalities;&nbsp;&nbsp;//&nbsp;Stack&nbsp;of&nbsp;equalities.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_719">719</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;lastequality;&nbsp;&nbsp;//&nbsp;Always&nbsp;equal&nbsp;to&nbsp;equalities.lastElement().text</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_720">720</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QMutableListIterator&lt;Diff&gt;&nbsp;pointer(diffs);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_721">721</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Number&nbsp;of&nbsp;characters&nbsp;that&nbsp;changed&nbsp;prior&nbsp;to&nbsp;the&nbsp;equality.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_722">722</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;length_insertions1&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_723">723</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;length_deletions1&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_724">724</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Number&nbsp;of&nbsp;characters&nbsp;that&nbsp;changed&nbsp;after&nbsp;the&nbsp;equality.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_725">725</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;length_insertions2&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_726">726</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;length_deletions2&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_727">727</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Diff&nbsp;*thisDiff&nbsp;=&nbsp;pointer.hasNext()&nbsp;?&nbsp;&amp;pointer.next()&nbsp;:&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_728">728</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;while&nbsp;(thisDiff&nbsp;!=&nbsp;NULL)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_729">729</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(thisDiff-&gt;operation&nbsp;==&nbsp;EQUAL)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_730">730</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Equality&nbsp;found.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_731">731</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;equalities.push(*thisDiff);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_732">732</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;length_insertions1&nbsp;=&nbsp;length_insertions2;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_733">733</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;length_deletions1&nbsp;=&nbsp;length_deletions2;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_734">734</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;length_insertions2&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_735">735</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;length_deletions2&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_736">736</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lastequality&nbsp;=&nbsp;thisDiff-&gt;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_737">737</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_738">738</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;An&nbsp;insertion&nbsp;or&nbsp;deletion.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_739">739</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(thisDiff-&gt;operation&nbsp;==&nbsp;INSERT)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_740">740</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;length_insertions2&nbsp;+=&nbsp;thisDiff-&gt;text.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_741">741</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_742">742</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;length_deletions2&nbsp;+=&nbsp;thisDiff-&gt;text.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_743">743</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_744">744</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Eliminate&nbsp;an&nbsp;equality&nbsp;that&nbsp;is&nbsp;smaller&nbsp;or&nbsp;equal&nbsp;to&nbsp;the&nbsp;edits&nbsp;on&nbsp;both</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_745">745</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;sides&nbsp;of&nbsp;it.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_746">746</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!lastequality.isNull()</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_747">747</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;&nbsp;(lastequality.length()</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_748">748</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;=&nbsp;std::max(length_insertions1,&nbsp;length_deletions1))</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_749">749</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;&nbsp;(lastequality.length()</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_750">750</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;=&nbsp;std::max(length_insertions2,&nbsp;length_deletions2)))&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_751">751</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;printf("Splitting:&nbsp;'%s'\n",&nbsp;qPrintable(lastequality));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_752">752</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Walk&nbsp;back&nbsp;to&nbsp;offending&nbsp;equality.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_753">753</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(*thisDiff&nbsp;!=&nbsp;equalities.top())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_754">754</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisDiff&nbsp;=&nbsp;&amp;pointer.previous();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_755">755</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_756">756</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.next();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_757">757</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_758">758</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Replace&nbsp;equality&nbsp;with&nbsp;a&nbsp;delete.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_759">759</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.setValue(Diff(DELETE,&nbsp;lastequality));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_760">760</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Insert&nbsp;a&nbsp;corresponding&nbsp;an&nbsp;insert.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_761">761</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.insert(Diff(INSERT,&nbsp;lastequality));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_762">762</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_763">763</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;equalities.pop();&nbsp;&nbsp;//&nbsp;Throw&nbsp;away&nbsp;the&nbsp;equality&nbsp;we&nbsp;just&nbsp;deleted.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_764">764</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!equalities.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_765">765</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Throw&nbsp;away&nbsp;the&nbsp;previous&nbsp;equality&nbsp;(it&nbsp;needs&nbsp;to&nbsp;be&nbsp;reevaluated).</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_766">766</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;equalities.pop();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_767">767</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_768">768</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(equalities.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_769">769</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;There&nbsp;are&nbsp;no&nbsp;previous&nbsp;equalities,&nbsp;walk&nbsp;back&nbsp;to&nbsp;the&nbsp;start.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_770">770</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(pointer.hasPrevious())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_771">771</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.previous();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_772">772</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_773">773</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_774">774</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;There&nbsp;is&nbsp;a&nbsp;safe&nbsp;equality&nbsp;we&nbsp;can&nbsp;fall&nbsp;back&nbsp;to.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_775">775</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisDiff&nbsp;=&nbsp;&amp;equalities.top();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_776">776</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(*thisDiff&nbsp;!=&nbsp;pointer.previous())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_777">777</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Intentionally&nbsp;empty&nbsp;loop.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_778">778</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_779">779</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_780">780</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_781">781</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;length_insertions1&nbsp;=&nbsp;0;&nbsp;&nbsp;//&nbsp;Reset&nbsp;the&nbsp;counters.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_782">782</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;length_deletions1&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_783">783</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;length_insertions2&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_784">784</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;length_deletions2&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_785">785</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lastequality&nbsp;=&nbsp;QString();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_786">786</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;changes&nbsp;=&nbsp;true;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_787">787</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_788">788</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_789">789</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;thisDiff&nbsp;=&nbsp;pointer.hasNext()&nbsp;?&nbsp;&amp;pointer.next()&nbsp;:&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_790">790</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_791">791</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_792">792</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Normalize&nbsp;the&nbsp;diff.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_793">793</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(changes)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_794">794</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;diff_cleanupMerge(diffs);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_795">795</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_796">796</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;diff_cleanupSemanticLossless(diffs);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_797">797</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_798">798</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Find&nbsp;any&nbsp;overlaps&nbsp;between&nbsp;deletions&nbsp;and&nbsp;insertions.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_799">799</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;e.g:&nbsp;&lt;del&gt;abcxxx&lt;/del&gt;&lt;ins&gt;xxxdef&lt;/ins&gt;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_800">800</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;-&gt;&nbsp;&lt;del&gt;abc&lt;/del&gt;xxx&lt;ins&gt;def&lt;/ins&gt;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_801">801</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;e.g:&nbsp;&lt;del&gt;xxxabc&lt;/del&gt;&lt;ins&gt;defxxx&lt;/ins&gt;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_802">802</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;-&gt;&nbsp;&lt;ins&gt;def&lt;/ins&gt;xxx&lt;del&gt;abc&lt;/del&gt;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_803">803</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Only&nbsp;extract&nbsp;an&nbsp;overlap&nbsp;if&nbsp;it&nbsp;is&nbsp;as&nbsp;big&nbsp;as&nbsp;the&nbsp;edit&nbsp;ahead&nbsp;or&nbsp;behind&nbsp;it.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_804">804</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;pointer.toFront();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_805">805</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Diff&nbsp;*prevDiff&nbsp;=&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_806">806</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;thisDiff&nbsp;=&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_807">807</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(pointer.hasNext())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_808">808</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;prevDiff&nbsp;=&nbsp;&amp;pointer.next();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_809">809</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(pointer.hasNext())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_810">810</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisDiff&nbsp;=&nbsp;&amp;pointer.next();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_811">811</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_812">812</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_813">813</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;while&nbsp;(thisDiff&nbsp;!=&nbsp;NULL)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_814">814</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(prevDiff-&gt;operation&nbsp;==&nbsp;DELETE&nbsp;&amp;&amp;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_815">815</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisDiff-&gt;operation&nbsp;==&nbsp;INSERT)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_816">816</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;QString&nbsp;deletion&nbsp;=&nbsp;prevDiff-&gt;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_817">817</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;QString&nbsp;insertion&nbsp;=&nbsp;thisDiff-&gt;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_818">818</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;overlap_length1&nbsp;=&nbsp;diff_commonOverlap(deletion,&nbsp;insertion);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_819">819</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;overlap_length2&nbsp;=&nbsp;diff_commonOverlap(insertion,&nbsp;deletion);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_820">820</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(overlap_length1&nbsp;&gt;=&nbsp;overlap_length2)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_821">821</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(overlap_length1&nbsp;&gt;=&nbsp;deletion.length()&nbsp;/&nbsp;2.0&nbsp;||</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_822">822</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;overlap_length1&nbsp;&gt;=&nbsp;insertion.length()&nbsp;/&nbsp;2.0)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_823">823</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Overlap&nbsp;found.&nbsp;&nbsp;Insert&nbsp;an&nbsp;equality&nbsp;and&nbsp;trim&nbsp;the&nbsp;surrounding&nbsp;edits.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_824">824</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.previous();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_825">825</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.insert(Diff(EQUAL,&nbsp;insertion.left(overlap_length1)));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_826">826</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prevDiff-&gt;text&nbsp;=</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_827">827</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;deletion.left(deletion.length()&nbsp;-&nbsp;overlap_length1);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_828">828</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisDiff-&gt;text&nbsp;=&nbsp;safeMid(insertion,&nbsp;overlap_length1);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_829">829</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;pointer.insert&nbsp;inserts&nbsp;the&nbsp;element&nbsp;before&nbsp;the&nbsp;cursor,&nbsp;so&nbsp;there&nbsp;is</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_830">830</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;no&nbsp;need&nbsp;to&nbsp;step&nbsp;past&nbsp;the&nbsp;new&nbsp;element.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_831">831</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_832">832</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_833">833</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(overlap_length2&nbsp;&gt;=&nbsp;deletion.length()&nbsp;/&nbsp;2.0&nbsp;||</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_834">834</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;overlap_length2&nbsp;&gt;=&nbsp;insertion.length()&nbsp;/&nbsp;2.0)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_835">835</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Reverse&nbsp;overlap&nbsp;found.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_836">836</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Insert&nbsp;an&nbsp;equality&nbsp;and&nbsp;swap&nbsp;and&nbsp;trim&nbsp;the&nbsp;surrounding&nbsp;edits.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_837">837</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.previous();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_838">838</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.insert(Diff(EQUAL,&nbsp;deletion.left(overlap_length2)));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_839">839</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prevDiff-&gt;operation&nbsp;=&nbsp;INSERT;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_840">840</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prevDiff-&gt;text&nbsp;=</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_841">841</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;insertion.left(insertion.length()&nbsp;-&nbsp;overlap_length2);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_842">842</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisDiff-&gt;operation&nbsp;=&nbsp;DELETE;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_843">843</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisDiff-&gt;text&nbsp;=&nbsp;safeMid(deletion,&nbsp;overlap_length2);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_844">844</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;pointer.insert&nbsp;inserts&nbsp;the&nbsp;element&nbsp;before&nbsp;the&nbsp;cursor,&nbsp;so&nbsp;there&nbsp;is</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_845">845</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;no&nbsp;need&nbsp;to&nbsp;step&nbsp;past&nbsp;the&nbsp;new&nbsp;element.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_846">846</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_847">847</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_848">848</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisDiff&nbsp;=&nbsp;pointer.hasNext()&nbsp;?&nbsp;&amp;pointer.next()&nbsp;:&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_849">849</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_850">850</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;prevDiff&nbsp;=&nbsp;thisDiff;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_851">851</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;thisDiff&nbsp;=&nbsp;pointer.hasNext()&nbsp;?&nbsp;&amp;pointer.next()&nbsp;:&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_852">852</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_853">853</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_854">854</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_855">855</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_856">856</td><td wrap="wrap" class="diff_line">void&nbsp;diff_match_patch::diff_cleanupSemanticLossless(QList&lt;Diff&gt;&nbsp;&amp;diffs)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_857">857</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;equality1,&nbsp;edit,&nbsp;equality2;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_858">858</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;commonString;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_859">859</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;commonOffset;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_860">860</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;score,&nbsp;bestScore;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_861">861</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;bestEquality1,&nbsp;bestEdit,&nbsp;bestEquality2;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_862">862</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Create&nbsp;a&nbsp;new&nbsp;iterator&nbsp;at&nbsp;the&nbsp;start.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_863">863</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QMutableListIterator&lt;Diff&gt;&nbsp;pointer(diffs);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_864">864</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Diff&nbsp;*prevDiff&nbsp;=&nbsp;pointer.hasNext()&nbsp;?&nbsp;&amp;pointer.next()&nbsp;:&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_865">865</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Diff&nbsp;*thisDiff&nbsp;=&nbsp;pointer.hasNext()&nbsp;?&nbsp;&amp;pointer.next()&nbsp;:&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_866">866</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Diff&nbsp;*nextDiff&nbsp;=&nbsp;pointer.hasNext()&nbsp;?&nbsp;&amp;pointer.next()&nbsp;:&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_867">867</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_868">868</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Intentionally&nbsp;ignore&nbsp;the&nbsp;first&nbsp;and&nbsp;last&nbsp;element&nbsp;(don't&nbsp;need&nbsp;checking).</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_869">869</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;while&nbsp;(nextDiff&nbsp;!=&nbsp;NULL)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_870">870</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(prevDiff-&gt;operation&nbsp;==&nbsp;EQUAL&nbsp;&amp;&amp;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_871">871</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nextDiff-&gt;operation&nbsp;==&nbsp;EQUAL)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_872">872</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;This&nbsp;is&nbsp;a&nbsp;single&nbsp;edit&nbsp;surrounded&nbsp;by&nbsp;equalities.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_873">873</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;equality1&nbsp;=&nbsp;prevDiff-&gt;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_874">874</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;edit&nbsp;=&nbsp;thisDiff-&gt;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_875">875</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;equality2&nbsp;=&nbsp;nextDiff-&gt;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_876">876</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_877">877</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;First,&nbsp;shift&nbsp;the&nbsp;edit&nbsp;as&nbsp;far&nbsp;left&nbsp;as&nbsp;possible.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_878">878</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;commonOffset&nbsp;=&nbsp;diff_commonSuffix(equality1,&nbsp;edit);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_879">879</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(commonOffset&nbsp;!=&nbsp;0)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_880">880</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;commonString&nbsp;=&nbsp;safeMid(edit,&nbsp;edit.length()&nbsp;-&nbsp;commonOffset);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_881">881</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;equality1&nbsp;=&nbsp;equality1.left(equality1.length()&nbsp;-&nbsp;commonOffset);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_882">882</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;edit&nbsp;=&nbsp;commonString&nbsp;+&nbsp;edit.left(edit.length()&nbsp;-&nbsp;commonOffset);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_883">883</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;equality2&nbsp;=&nbsp;commonString&nbsp;+&nbsp;equality2;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_884">884</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_885">885</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_886">886</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Second,&nbsp;step&nbsp;character&nbsp;by&nbsp;character&nbsp;right,&nbsp;looking&nbsp;for&nbsp;the&nbsp;best&nbsp;fit.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_887">887</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bestEquality1&nbsp;=&nbsp;equality1;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_888">888</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bestEdit&nbsp;=&nbsp;edit;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_889">889</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bestEquality2&nbsp;=&nbsp;equality2;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_890">890</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bestScore&nbsp;=&nbsp;diff_cleanupSemanticScore(equality1,&nbsp;edit)</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_891">891</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;diff_cleanupSemanticScore(edit,&nbsp;equality2);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_892">892</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(!edit.isEmpty()&nbsp;&amp;&amp;&nbsp;!equality2.isEmpty()</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_893">893</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;&nbsp;edit[0]&nbsp;==&nbsp;equality2[0])&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_894">894</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;equality1&nbsp;+=&nbsp;edit[0];</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_895">895</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;edit&nbsp;=&nbsp;safeMid(edit,&nbsp;1)&nbsp;+&nbsp;equality2[0];</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_896">896</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;equality2&nbsp;=&nbsp;safeMid(equality2,&nbsp;1);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_897">897</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;score&nbsp;=&nbsp;diff_cleanupSemanticScore(equality1,&nbsp;edit)</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_898">898</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;diff_cleanupSemanticScore(edit,&nbsp;equality2);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_899">899</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;&gt;=&nbsp;encourages&nbsp;trailing&nbsp;rather&nbsp;than&nbsp;leading&nbsp;whitespace&nbsp;on&nbsp;edits.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_900">900</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(score&nbsp;&gt;=&nbsp;bestScore)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_901">901</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bestScore&nbsp;=&nbsp;score;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_902">902</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bestEquality1&nbsp;=&nbsp;equality1;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_903">903</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bestEdit&nbsp;=&nbsp;edit;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_904">904</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bestEquality2&nbsp;=&nbsp;equality2;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_905">905</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_906">906</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_907">907</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_908">908</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(prevDiff-&gt;text&nbsp;!=&nbsp;bestEquality1)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_909">909</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;We&nbsp;have&nbsp;an&nbsp;improvement,&nbsp;save&nbsp;it&nbsp;back&nbsp;to&nbsp;the&nbsp;diff.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_910">910</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!bestEquality1.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_911">911</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prevDiff-&gt;text&nbsp;=&nbsp;bestEquality1;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_912">912</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_913">913</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.previous();&nbsp;&nbsp;//&nbsp;Walk&nbsp;past&nbsp;nextDiff.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_914">914</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.previous();&nbsp;&nbsp;//&nbsp;Walk&nbsp;past&nbsp;thisDiff.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_915">915</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.previous();&nbsp;&nbsp;//&nbsp;Walk&nbsp;past&nbsp;prevDiff.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_916">916</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.remove();&nbsp;&nbsp;//&nbsp;Delete&nbsp;prevDiff.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_917">917</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.next();&nbsp;&nbsp;//&nbsp;Walk&nbsp;past&nbsp;thisDiff.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_918">918</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.next();&nbsp;&nbsp;//&nbsp;Walk&nbsp;past&nbsp;nextDiff.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_919">919</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_920">920</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisDiff-&gt;text&nbsp;=&nbsp;bestEdit;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_921">921</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!bestEquality2.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_922">922</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nextDiff-&gt;text&nbsp;=&nbsp;bestEquality2;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_923">923</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_924">924</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.remove();&nbsp;//&nbsp;Delete&nbsp;nextDiff.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_925">925</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nextDiff&nbsp;=&nbsp;thisDiff;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_926">926</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisDiff&nbsp;=&nbsp;prevDiff;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_927">927</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_928">928</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_929">929</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_930">930</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;prevDiff&nbsp;=&nbsp;thisDiff;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_931">931</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;thisDiff&nbsp;=&nbsp;nextDiff;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_932">932</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;nextDiff&nbsp;=&nbsp;pointer.hasNext()&nbsp;?&nbsp;&amp;pointer.next()&nbsp;:&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_933">933</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_934">934</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_935">935</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_936">936</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_937">937</td><td wrap="wrap" class="diff_line">int&nbsp;diff_match_patch::diff_cleanupSemanticScore(const&nbsp;QString&nbsp;&amp;one,</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_938">938</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QString&nbsp;&amp;two)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_939">939</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(one.isEmpty()&nbsp;||&nbsp;two.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_940">940</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Edges&nbsp;are&nbsp;the&nbsp;best.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_941">941</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;6;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_942">942</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_943">943</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_944">944</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Each&nbsp;port&nbsp;of&nbsp;this&nbsp;function&nbsp;behaves&nbsp;slightly&nbsp;differently&nbsp;due&nbsp;to</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_945">945</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;subtle&nbsp;differences&nbsp;in&nbsp;each&nbsp;language's&nbsp;definition&nbsp;of&nbsp;things&nbsp;like</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_946">946</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;'whitespace'.&nbsp;&nbsp;Since&nbsp;this&nbsp;function's&nbsp;purpose&nbsp;is&nbsp;largely&nbsp;cosmetic,</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_947">947</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;the&nbsp;choice&nbsp;has&nbsp;been&nbsp;made&nbsp;to&nbsp;use&nbsp;each&nbsp;language's&nbsp;native&nbsp;features</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_948">948</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;rather&nbsp;than&nbsp;force&nbsp;total&nbsp;conformity.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_949">949</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QChar&nbsp;char1&nbsp;=&nbsp;one[one.length()&nbsp;-&nbsp;1];</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_950">950</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QChar&nbsp;char2&nbsp;=&nbsp;two[0];</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_951">951</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;bool&nbsp;nonAlphaNumeric1&nbsp;=&nbsp;!char1.isLetterOrNumber();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_952">952</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;bool&nbsp;nonAlphaNumeric2&nbsp;=&nbsp;!char2.isLetterOrNumber();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_953">953</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;bool&nbsp;whitespace1&nbsp;=&nbsp;nonAlphaNumeric1&nbsp;&amp;&amp;&nbsp;char1.isSpace();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_954">954</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;bool&nbsp;whitespace2&nbsp;=&nbsp;nonAlphaNumeric2&nbsp;&amp;&amp;&nbsp;char2.isSpace();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_955">955</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;bool&nbsp;lineBreak1&nbsp;=&nbsp;whitespace1&nbsp;&amp;&amp;&nbsp;char1.category()&nbsp;==&nbsp;QChar::Other_Control;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_956">956</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;bool&nbsp;lineBreak2&nbsp;=&nbsp;whitespace2&nbsp;&amp;&amp;&nbsp;char2.category()&nbsp;==&nbsp;QChar::Other_Control;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_957">957</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;bool&nbsp;blankLine1&nbsp;=&nbsp;lineBreak1&nbsp;&amp;&amp;&nbsp;BLANKLINEEND.indexIn(one)&nbsp;!=&nbsp;-1;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_958">958</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;bool&nbsp;blankLine2&nbsp;=&nbsp;lineBreak2&nbsp;&amp;&amp;&nbsp;BLANKLINESTART.indexIn(two)&nbsp;!=&nbsp;-1;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_959">959</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_960">960</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(blankLine1&nbsp;||&nbsp;blankLine2)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_961">961</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Five&nbsp;points&nbsp;for&nbsp;blank&nbsp;lines.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_962">962</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;5;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_963">963</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(lineBreak1&nbsp;||&nbsp;lineBreak2)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_964">964</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Four&nbsp;points&nbsp;for&nbsp;line&nbsp;breaks.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_965">965</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;4;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_966">966</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(nonAlphaNumeric1&nbsp;&amp;&amp;&nbsp;!whitespace1&nbsp;&amp;&amp;&nbsp;whitespace2)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_967">967</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Three&nbsp;points&nbsp;for&nbsp;end&nbsp;of&nbsp;sentences.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_968">968</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;3;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_969">969</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(whitespace1&nbsp;||&nbsp;whitespace2)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_970">970</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Two&nbsp;points&nbsp;for&nbsp;whitespace.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_971">971</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;2;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_972">972</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(nonAlphaNumeric1&nbsp;||&nbsp;nonAlphaNumeric2)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_973">973</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;One&nbsp;point&nbsp;for&nbsp;non-alphanumeric.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_974">974</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;1;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_975">975</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_976">976</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_977">977</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_978">978</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_979">979</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_980">980</td><td wrap="wrap" class="diff_line">//&nbsp;Define&nbsp;some&nbsp;regex&nbsp;patterns&nbsp;for&nbsp;matching&nbsp;boundaries.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_981">981</td><td wrap="wrap" class="diff_line">QRegExp&nbsp;diff_match_patch::BLANKLINEEND&nbsp;=&nbsp;QRegExp("\\n\\r?\\n$");</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_982">982</td><td wrap="wrap" class="diff_line">QRegExp&nbsp;diff_match_patch::BLANKLINESTART&nbsp;=&nbsp;QRegExp("^\\r?\\n\\r?\\n");</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_983">983</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_984">984</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_985">985</td><td wrap="wrap" class="diff_line">void&nbsp;diff_match_patch::diff_cleanupEfficiency(QList&lt;Diff&gt;&nbsp;&amp;diffs)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_986">986</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(diffs.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_987">987</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_988">988</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_989">989</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;bool&nbsp;changes&nbsp;=&nbsp;false;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_990">990</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QStack&lt;Diff&gt;&nbsp;equalities;&nbsp;&nbsp;//&nbsp;Stack&nbsp;of&nbsp;equalities.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_991">991</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;lastequality;&nbsp;&nbsp;//&nbsp;Always&nbsp;equal&nbsp;to&nbsp;equalities.lastElement().text</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_992">992</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QMutableListIterator&lt;Diff&gt;&nbsp;pointer(diffs);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_993">993</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Is&nbsp;there&nbsp;an&nbsp;insertion&nbsp;operation&nbsp;before&nbsp;the&nbsp;last&nbsp;equality.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_994">994</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;bool&nbsp;pre_ins&nbsp;=&nbsp;false;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_995">995</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Is&nbsp;there&nbsp;a&nbsp;deletion&nbsp;operation&nbsp;before&nbsp;the&nbsp;last&nbsp;equality.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_996">996</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;bool&nbsp;pre_del&nbsp;=&nbsp;false;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_997">997</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Is&nbsp;there&nbsp;an&nbsp;insertion&nbsp;operation&nbsp;after&nbsp;the&nbsp;last&nbsp;equality.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_998">998</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;bool&nbsp;post_ins&nbsp;=&nbsp;false;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_999">999</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Is&nbsp;there&nbsp;a&nbsp;deletion&nbsp;operation&nbsp;after&nbsp;the&nbsp;last&nbsp;equality.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1000">1000</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;bool&nbsp;post_del&nbsp;=&nbsp;false;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1001">1001</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1002">1002</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Diff&nbsp;*thisDiff&nbsp;=&nbsp;pointer.hasNext()&nbsp;?&nbsp;&amp;pointer.next()&nbsp;:&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1003">1003</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Diff&nbsp;*safeDiff&nbsp;=&nbsp;thisDiff;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1004">1004</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1005">1005</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;while&nbsp;(thisDiff&nbsp;!=&nbsp;NULL)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1006">1006</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(thisDiff-&gt;operation&nbsp;==&nbsp;EQUAL)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1007">1007</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Equality&nbsp;found.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1008">1008</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(thisDiff-&gt;text.length()&nbsp;&lt;&nbsp;Diff_EditCost&nbsp;&amp;&amp;&nbsp;(post_ins&nbsp;||&nbsp;post_del))&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1009">1009</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Candidate&nbsp;found.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1010">1010</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;equalities.push(*thisDiff);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1011">1011</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pre_ins&nbsp;=&nbsp;post_ins;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1012">1012</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pre_del&nbsp;=&nbsp;post_del;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1013">1013</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lastequality&nbsp;=&nbsp;thisDiff-&gt;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1014">1014</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1015">1015</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Not&nbsp;a&nbsp;candidate,&nbsp;and&nbsp;can&nbsp;never&nbsp;become&nbsp;one.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1016">1016</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;equalities.clear();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1017">1017</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lastequality&nbsp;=&nbsp;QString();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1018">1018</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;safeDiff&nbsp;=&nbsp;thisDiff;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1019">1019</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1020">1020</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;post_ins&nbsp;=&nbsp;post_del&nbsp;=&nbsp;false;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1021">1021</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1022">1022</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;An&nbsp;insertion&nbsp;or&nbsp;deletion.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1023">1023</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(thisDiff-&gt;operation&nbsp;==&nbsp;DELETE)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1024">1024</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;post_del&nbsp;=&nbsp;true;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1025">1025</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1026">1026</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;post_ins&nbsp;=&nbsp;true;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1027">1027</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1028">1028</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1029">1029</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Five&nbsp;types&nbsp;to&nbsp;be&nbsp;split:</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1030">1030</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&lt;ins&gt;A&lt;/ins&gt;&lt;del&gt;B&lt;/del&gt;XY&lt;ins&gt;C&lt;/ins&gt;&lt;del&gt;D&lt;/del&gt;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1031">1031</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&lt;ins&gt;A&lt;/ins&gt;X&lt;ins&gt;C&lt;/ins&gt;&lt;del&gt;D&lt;/del&gt;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1032">1032</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&lt;ins&gt;A&lt;/ins&gt;&lt;del&gt;B&lt;/del&gt;X&lt;ins&gt;C&lt;/ins&gt;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1033">1033</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&lt;ins&gt;A&lt;/del&gt;X&lt;ins&gt;C&lt;/ins&gt;&lt;del&gt;D&lt;/del&gt;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1034">1034</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&lt;ins&gt;A&lt;/ins&gt;&lt;del&gt;B&lt;/del&gt;X&lt;del&gt;C&lt;/del&gt;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1035">1035</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1036">1036</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!lastequality.isNull()</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1037">1037</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;&nbsp;((pre_ins&nbsp;&amp;&amp;&nbsp;pre_del&nbsp;&amp;&amp;&nbsp;post_ins&nbsp;&amp;&amp;&nbsp;post_del)</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1038">1038</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;||&nbsp;((lastequality.length()&nbsp;&lt;&nbsp;Diff_EditCost&nbsp;/&nbsp;2)</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1039">1039</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;&nbsp;((pre_ins&nbsp;?&nbsp;1&nbsp;:&nbsp;0)&nbsp;+&nbsp;(pre_del&nbsp;?&nbsp;1&nbsp;:&nbsp;0)</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1040">1040</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;(post_ins&nbsp;?&nbsp;1&nbsp;:&nbsp;0)&nbsp;+&nbsp;(post_del&nbsp;?&nbsp;1&nbsp;:&nbsp;0))&nbsp;==&nbsp;3)))&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1041">1041</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;printf("Splitting:&nbsp;'%s'\n",&nbsp;qPrintable(lastequality));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1042">1042</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Walk&nbsp;back&nbsp;to&nbsp;offending&nbsp;equality.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1043">1043</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(*thisDiff&nbsp;!=&nbsp;equalities.top())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1044">1044</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisDiff&nbsp;=&nbsp;&amp;pointer.previous();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1045">1045</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1046">1046</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.next();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1047">1047</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1048">1048</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Replace&nbsp;equality&nbsp;with&nbsp;a&nbsp;delete.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1049">1049</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.setValue(Diff(DELETE,&nbsp;lastequality));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1050">1050</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Insert&nbsp;a&nbsp;corresponding&nbsp;an&nbsp;insert.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1051">1051</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.insert(Diff(INSERT,&nbsp;lastequality));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1052">1052</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisDiff&nbsp;=&nbsp;&amp;pointer.previous();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1053">1053</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.next();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1054">1054</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1055">1055</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;equalities.pop();&nbsp;&nbsp;//&nbsp;Throw&nbsp;away&nbsp;the&nbsp;equality&nbsp;we&nbsp;just&nbsp;deleted.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1056">1056</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lastequality&nbsp;=&nbsp;QString();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1057">1057</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(pre_ins&nbsp;&amp;&amp;&nbsp;pre_del)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1058">1058</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;No&nbsp;changes&nbsp;made&nbsp;which&nbsp;could&nbsp;affect&nbsp;previous&nbsp;entry,&nbsp;keep&nbsp;going.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1059">1059</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;post_ins&nbsp;=&nbsp;post_del&nbsp;=&nbsp;true;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1060">1060</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;equalities.clear();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1061">1061</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;safeDiff&nbsp;=&nbsp;thisDiff;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1062">1062</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1063">1063</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!equalities.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1064">1064</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Throw&nbsp;away&nbsp;the&nbsp;previous&nbsp;equality&nbsp;(it&nbsp;needs&nbsp;to&nbsp;be&nbsp;reevaluated).</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1065">1065</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;equalities.pop();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1066">1066</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1067">1067</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(equalities.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1068">1068</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;There&nbsp;are&nbsp;no&nbsp;previous&nbsp;questionable&nbsp;equalities,</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1069">1069</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;walk&nbsp;back&nbsp;to&nbsp;the&nbsp;last&nbsp;known&nbsp;safe&nbsp;diff.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1070">1070</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisDiff&nbsp;=&nbsp;safeDiff;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1071">1071</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1072">1072</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;There&nbsp;is&nbsp;an&nbsp;equality&nbsp;we&nbsp;can&nbsp;fall&nbsp;back&nbsp;to.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1073">1073</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisDiff&nbsp;=&nbsp;&amp;equalities.top();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1074">1074</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1075">1075</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(*thisDiff&nbsp;!=&nbsp;pointer.previous())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1076">1076</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Intentionally&nbsp;empty&nbsp;loop.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1077">1077</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1078">1078</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;post_ins&nbsp;=&nbsp;post_del&nbsp;=&nbsp;false;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1079">1079</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1080">1080</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1081">1081</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;changes&nbsp;=&nbsp;true;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1082">1082</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1083">1083</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1084">1084</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;thisDiff&nbsp;=&nbsp;pointer.hasNext()&nbsp;?&nbsp;&amp;pointer.next()&nbsp;:&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1085">1085</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1086">1086</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1087">1087</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(changes)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1088">1088</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;diff_cleanupMerge(diffs);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1089">1089</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1090">1090</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1091">1091</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1092">1092</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1093">1093</td><td wrap="wrap" class="diff_line">void&nbsp;diff_match_patch::diff_cleanupMerge(QList&lt;Diff&gt;&nbsp;&amp;diffs)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1094">1094</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;diffs.append(Diff(EQUAL,&nbsp;""));&nbsp;&nbsp;//&nbsp;Add&nbsp;a&nbsp;dummy&nbsp;entry&nbsp;at&nbsp;the&nbsp;end.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1095">1095</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QMutableListIterator&lt;Diff&gt;&nbsp;pointer(diffs);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1096">1096</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;count_delete&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1097">1097</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;count_insert&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1098">1098</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;text_delete&nbsp;=&nbsp;"";</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1099">1099</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;text_insert&nbsp;=&nbsp;"";</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1100">1100</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Diff&nbsp;*thisDiff&nbsp;=&nbsp;pointer.hasNext()&nbsp;?&nbsp;&amp;pointer.next()&nbsp;:&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1101">1101</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Diff&nbsp;*prevEqual&nbsp;=&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1102">1102</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;commonlength;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1103">1103</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;while&nbsp;(thisDiff&nbsp;!=&nbsp;NULL)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1104">1104</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;switch&nbsp;(thisDiff-&gt;operation)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1105">1105</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;INSERT:</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1106">1106</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;count_insert++;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1107">1107</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text_insert&nbsp;+=&nbsp;thisDiff-&gt;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1108">1108</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prevEqual&nbsp;=&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1109">1109</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1110">1110</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;DELETE:</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1111">1111</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;count_delete++;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1112">1112</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text_delete&nbsp;+=&nbsp;thisDiff-&gt;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1113">1113</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prevEqual&nbsp;=&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1114">1114</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1115">1115</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;EQUAL:</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1116">1116</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(count_delete&nbsp;+&nbsp;count_insert&nbsp;&gt;&nbsp;1)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1117">1117</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;both_types&nbsp;=&nbsp;count_delete&nbsp;!=&nbsp;0&nbsp;&amp;&amp;&nbsp;count_insert&nbsp;!=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1118">1118</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Delete&nbsp;the&nbsp;offending&nbsp;records.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1119">1119</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.previous();&nbsp;&nbsp;//&nbsp;Reverse&nbsp;direction.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1120">1120</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(count_delete--&nbsp;&gt;&nbsp;0)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1121">1121</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.previous();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1122">1122</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.remove();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1123">1123</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1124">1124</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(count_insert--&nbsp;&gt;&nbsp;0)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1125">1125</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.previous();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1126">1126</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.remove();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1127">1127</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1128">1128</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(both_types)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1129">1129</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Factor&nbsp;out&nbsp;any&nbsp;common&nbsp;prefixies.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1130">1130</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;commonlength&nbsp;=&nbsp;diff_commonPrefix(text_insert,&nbsp;text_delete);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1131">1131</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(commonlength&nbsp;!=&nbsp;0)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1132">1132</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(pointer.hasPrevious())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1133">1133</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisDiff&nbsp;=&nbsp;&amp;pointer.previous();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1134">1134</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(thisDiff-&gt;operation&nbsp;!=&nbsp;EQUAL)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1135">1135</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;"Previous&nbsp;diff&nbsp;should&nbsp;have&nbsp;been&nbsp;an&nbsp;equality.";</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1136">1136</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1137">1137</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisDiff-&gt;text&nbsp;+=&nbsp;text_insert.left(commonlength);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1138">1138</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.next();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1139">1139</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1140">1140</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.insert(Diff(EQUAL,&nbsp;text_insert.left(commonlength)));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1141">1141</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1142">1142</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text_insert&nbsp;=&nbsp;safeMid(text_insert,&nbsp;commonlength);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1143">1143</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text_delete&nbsp;=&nbsp;safeMid(text_delete,&nbsp;commonlength);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1144">1144</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1145">1145</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Factor&nbsp;out&nbsp;any&nbsp;common&nbsp;suffixies.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1146">1146</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;commonlength&nbsp;=&nbsp;diff_commonSuffix(text_insert,&nbsp;text_delete);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1147">1147</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(commonlength&nbsp;!=&nbsp;0)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1148">1148</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisDiff&nbsp;=&nbsp;&amp;pointer.next();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1149">1149</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisDiff-&gt;text&nbsp;=&nbsp;safeMid(text_insert,&nbsp;text_insert.length()</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1150">1150</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;commonlength)&nbsp;+&nbsp;thisDiff-&gt;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1151">1151</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text_insert&nbsp;=&nbsp;text_insert.left(text_insert.length()</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1152">1152</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;commonlength);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1153">1153</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text_delete&nbsp;=&nbsp;text_delete.left(text_delete.length()</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1154">1154</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;commonlength);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1155">1155</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.previous();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1156">1156</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1157">1157</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1158">1158</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Insert&nbsp;the&nbsp;merged&nbsp;records.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1159">1159</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!text_delete.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1160">1160</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.insert(Diff(DELETE,&nbsp;text_delete));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1161">1161</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1162">1162</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!text_insert.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1163">1163</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.insert(Diff(INSERT,&nbsp;text_insert));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1164">1164</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1165">1165</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Step&nbsp;forward&nbsp;to&nbsp;the&nbsp;equality.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1166">1166</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisDiff&nbsp;=&nbsp;pointer.hasNext()&nbsp;?&nbsp;&amp;pointer.next()&nbsp;:&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1167">1167</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1168">1168</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(prevEqual&nbsp;!=&nbsp;NULL)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1169">1169</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Merge&nbsp;this&nbsp;equality&nbsp;with&nbsp;the&nbsp;previous&nbsp;one.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1170">1170</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prevEqual-&gt;text&nbsp;+=&nbsp;thisDiff-&gt;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1171">1171</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.remove();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1172">1172</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisDiff&nbsp;=&nbsp;&amp;pointer.previous();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1173">1173</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.next();&nbsp;&nbsp;//&nbsp;Forward&nbsp;direction</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1174">1174</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1175">1175</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;count_insert&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1176">1176</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;count_delete&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1177">1177</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text_delete&nbsp;=&nbsp;"";</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1178">1178</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text_insert&nbsp;=&nbsp;"";</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1179">1179</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prevEqual&nbsp;=&nbsp;thisDiff;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1180">1180</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1181">1181</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1182">1182</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisDiff&nbsp;=&nbsp;pointer.hasNext()&nbsp;?&nbsp;&amp;pointer.next()&nbsp;:&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1183">1183</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1184">1184</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(diffs.back().text.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1185">1185</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;diffs.removeLast();&nbsp;&nbsp;//&nbsp;Remove&nbsp;the&nbsp;dummy&nbsp;entry&nbsp;at&nbsp;the&nbsp;end.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1186">1186</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1187">1187</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1188">1188</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;/*</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1189">1189</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;*&nbsp;Second&nbsp;pass:&nbsp;look&nbsp;for&nbsp;single&nbsp;edits&nbsp;surrounded&nbsp;on&nbsp;both&nbsp;sides&nbsp;by&nbsp;equalities</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1190">1190</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;*&nbsp;which&nbsp;can&nbsp;be&nbsp;shifted&nbsp;sideways&nbsp;to&nbsp;eliminate&nbsp;an&nbsp;equality.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1191">1191</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;*&nbsp;e.g:&nbsp;A&lt;ins&gt;BA&lt;/ins&gt;C&nbsp;-&gt;&nbsp;&lt;ins&gt;AB&lt;/ins&gt;AC</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1192">1192</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;*/</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1193">1193</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;bool&nbsp;changes&nbsp;=&nbsp;false;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1194">1194</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Create&nbsp;a&nbsp;new&nbsp;iterator&nbsp;at&nbsp;the&nbsp;start.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1195">1195</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;(As&nbsp;opposed&nbsp;to&nbsp;walking&nbsp;the&nbsp;current&nbsp;one&nbsp;back.)</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1196">1196</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;pointer.toFront();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1197">1197</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Diff&nbsp;*prevDiff&nbsp;=&nbsp;pointer.hasNext()&nbsp;?&nbsp;&amp;pointer.next()&nbsp;:&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1198">1198</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;thisDiff&nbsp;=&nbsp;pointer.hasNext()&nbsp;?&nbsp;&amp;pointer.next()&nbsp;:&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1199">1199</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Diff&nbsp;*nextDiff&nbsp;=&nbsp;pointer.hasNext()&nbsp;?&nbsp;&amp;pointer.next()&nbsp;:&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1200">1200</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1201">1201</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Intentionally&nbsp;ignore&nbsp;the&nbsp;first&nbsp;and&nbsp;last&nbsp;element&nbsp;(don't&nbsp;need&nbsp;checking).</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1202">1202</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;while&nbsp;(nextDiff&nbsp;!=&nbsp;NULL)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1203">1203</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(prevDiff-&gt;operation&nbsp;==&nbsp;EQUAL&nbsp;&amp;&amp;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1204">1204</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nextDiff-&gt;operation&nbsp;==&nbsp;EQUAL)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1205">1205</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;This&nbsp;is&nbsp;a&nbsp;single&nbsp;edit&nbsp;surrounded&nbsp;by&nbsp;equalities.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1206">1206</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(thisDiff-&gt;text.endsWith(prevDiff-&gt;text))&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1207">1207</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Shift&nbsp;the&nbsp;edit&nbsp;over&nbsp;the&nbsp;previous&nbsp;equality.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1208">1208</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisDiff-&gt;text&nbsp;=&nbsp;prevDiff-&gt;text</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1209">1209</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;thisDiff-&gt;text.left(thisDiff-&gt;text.length()</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1210">1210</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;prevDiff-&gt;text.length());</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1211">1211</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nextDiff-&gt;text&nbsp;=&nbsp;prevDiff-&gt;text&nbsp;+&nbsp;nextDiff-&gt;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1212">1212</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.previous();&nbsp;&nbsp;//&nbsp;Walk&nbsp;past&nbsp;nextDiff.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1213">1213</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.previous();&nbsp;&nbsp;//&nbsp;Walk&nbsp;past&nbsp;thisDiff.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1214">1214</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.previous();&nbsp;&nbsp;//&nbsp;Walk&nbsp;past&nbsp;prevDiff.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1215">1215</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.remove();&nbsp;&nbsp;//&nbsp;Delete&nbsp;prevDiff.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1216">1216</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.next();&nbsp;&nbsp;//&nbsp;Walk&nbsp;past&nbsp;thisDiff.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1217">1217</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisDiff&nbsp;=&nbsp;&amp;pointer.next();&nbsp;&nbsp;//&nbsp;Walk&nbsp;past&nbsp;nextDiff.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1218">1218</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nextDiff&nbsp;=&nbsp;pointer.hasNext()&nbsp;?&nbsp;&amp;pointer.next()&nbsp;:&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1219">1219</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;changes&nbsp;=&nbsp;true;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1220">1220</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(thisDiff-&gt;text.startsWith(nextDiff-&gt;text))&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1221">1221</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Shift&nbsp;the&nbsp;edit&nbsp;over&nbsp;the&nbsp;next&nbsp;equality.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1222">1222</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prevDiff-&gt;text&nbsp;+=&nbsp;nextDiff-&gt;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1223">1223</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisDiff-&gt;text&nbsp;=&nbsp;safeMid(thisDiff-&gt;text,&nbsp;nextDiff-&gt;text.length())</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1224">1224</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;nextDiff-&gt;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1225">1225</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.remove();&nbsp;//&nbsp;Delete&nbsp;nextDiff.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1226">1226</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nextDiff&nbsp;=&nbsp;pointer.hasNext()&nbsp;?&nbsp;&amp;pointer.next()&nbsp;:&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1227">1227</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;changes&nbsp;=&nbsp;true;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1228">1228</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1229">1229</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1230">1230</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;prevDiff&nbsp;=&nbsp;thisDiff;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1231">1231</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;thisDiff&nbsp;=&nbsp;nextDiff;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1232">1232</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;nextDiff&nbsp;=&nbsp;pointer.hasNext()&nbsp;?&nbsp;&amp;pointer.next()&nbsp;:&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1233">1233</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1234">1234</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;If&nbsp;shifts&nbsp;were&nbsp;made,&nbsp;the&nbsp;diff&nbsp;needs&nbsp;reordering&nbsp;and&nbsp;another&nbsp;shift&nbsp;sweep.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1235">1235</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(changes)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1236">1236</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;diff_cleanupMerge(diffs);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1237">1237</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1238">1238</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1239">1239</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1240">1240</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1241">1241</td><td wrap="wrap" class="diff_line">int&nbsp;diff_match_patch::diff_xIndex(const&nbsp;QList&lt;Diff&gt;&nbsp;&amp;diffs,&nbsp;int&nbsp;loc)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1242">1242</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;chars1&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1243">1243</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;chars2&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1244">1244</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;last_chars1&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1245">1245</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;last_chars2&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1246">1246</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Diff&nbsp;lastDiff;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1247">1247</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;foreach(Diff&nbsp;aDiff,&nbsp;diffs)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1248">1248</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(aDiff.operation&nbsp;!=&nbsp;INSERT)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1249">1249</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Equality&nbsp;or&nbsp;deletion.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1250">1250</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chars1&nbsp;+=&nbsp;aDiff.text.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1251">1251</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1252">1252</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(aDiff.operation&nbsp;!=&nbsp;DELETE)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1253">1253</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Equality&nbsp;or&nbsp;insertion.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1254">1254</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chars2&nbsp;+=&nbsp;aDiff.text.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1255">1255</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1256">1256</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(chars1&nbsp;&gt;&nbsp;loc)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1257">1257</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Overshot&nbsp;the&nbsp;location.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1258">1258</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lastDiff&nbsp;=&nbsp;aDiff;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1259">1259</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1260">1260</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1261">1261</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;last_chars1&nbsp;=&nbsp;chars1;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1262">1262</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;last_chars2&nbsp;=&nbsp;chars2;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1263">1263</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1264">1264</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(lastDiff.operation&nbsp;==&nbsp;DELETE)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1265">1265</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;location&nbsp;was&nbsp;deleted.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1266">1266</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;last_chars2;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1267">1267</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1268">1268</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Add&nbsp;the&nbsp;remaining&nbsp;character&nbsp;length.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1269">1269</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;last_chars2&nbsp;+&nbsp;(loc&nbsp;-&nbsp;last_chars1);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1270">1270</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1271">1271</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1272">1272</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1273">1273</td><td wrap="wrap" class="diff_line">QString&nbsp;diff_match_patch::diff_prettyHtml(const&nbsp;QList&lt;Diff&gt;&nbsp;&amp;diffs)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1274">1274</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;html;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1275">1275</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1276">1276</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;foreach(Diff&nbsp;aDiff,&nbsp;diffs)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1277">1277</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;text&nbsp;=&nbsp;aDiff.text;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1278">1278</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;text.replace("&amp;",&nbsp;"&amp;amp;").replace("&lt;",&nbsp;"&amp;lt;")</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1279">1279</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.replace("&gt;",&nbsp;"&amp;gt;").replace("\n",&nbsp;"&amp;para;&lt;br&gt;");</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1280">1280</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;switch&nbsp;(aDiff.operation)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1281">1281</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;INSERT:</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1282">1282</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;+=&nbsp;QString("&lt;ins&nbsp;style=\"background:#e6ffe6;\"&gt;")&nbsp;+&nbsp;text</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1283">1283</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;QString("&lt;/ins&gt;");</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1284">1284</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1285">1285</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;DELETE:</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1286">1286</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;+=&nbsp;QString("&lt;del&nbsp;style=\"background:#ffe6e6;\"&gt;")&nbsp;+&nbsp;text</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1287">1287</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;QString("&lt;/del&gt;");</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1288">1288</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1289">1289</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;EQUAL:</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1290">1290</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;+=&nbsp;QString("&lt;span&gt;")&nbsp;+&nbsp;text&nbsp;+&nbsp;QString("&lt;/span&gt;");</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1291">1291</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1292">1292</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1293">1293</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1294">1294</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;html;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1295">1295</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1296">1296</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1297">1297</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1298">1298</td><td wrap="wrap" class="diff_line">QString&nbsp;diff_match_patch::diff_text1(const&nbsp;QList&lt;Diff&gt;&nbsp;&amp;diffs)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1299">1299</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1300">1300</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;foreach(Diff&nbsp;aDiff,&nbsp;diffs)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1301">1301</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(aDiff.operation&nbsp;!=&nbsp;INSERT)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1302">1302</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text&nbsp;+=&nbsp;aDiff.text;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1303">1303</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1304">1304</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1305">1305</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1306">1306</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1307">1307</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1308">1308</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1309">1309</td><td wrap="wrap" class="diff_line">QString&nbsp;diff_match_patch::diff_text2(const&nbsp;QList&lt;Diff&gt;&nbsp;&amp;diffs)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1310">1310</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1311">1311</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;foreach(Diff&nbsp;aDiff,&nbsp;diffs)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1312">1312</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(aDiff.operation&nbsp;!=&nbsp;DELETE)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1313">1313</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text&nbsp;+=&nbsp;aDiff.text;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1314">1314</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1315">1315</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1316">1316</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1317">1317</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1318">1318</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1319">1319</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1320">1320</td><td wrap="wrap" class="diff_line">int&nbsp;diff_match_patch::diff_levenshtein(const&nbsp;QList&lt;Diff&gt;&nbsp;&amp;diffs)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1321">1321</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;levenshtein&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1322">1322</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;insertions&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1323">1323</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;deletions&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1324">1324</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;foreach(Diff&nbsp;aDiff,&nbsp;diffs)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1325">1325</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;switch&nbsp;(aDiff.operation)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1326">1326</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;INSERT:</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1327">1327</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;insertions&nbsp;+=&nbsp;aDiff.text.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1328">1328</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1329">1329</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;DELETE:</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1330">1330</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;deletions&nbsp;+=&nbsp;aDiff.text.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1331">1331</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1332">1332</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;EQUAL:</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1333">1333</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;A&nbsp;deletion&nbsp;and&nbsp;an&nbsp;insertion&nbsp;is&nbsp;one&nbsp;substitution.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1334">1334</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;levenshtein&nbsp;+=&nbsp;std::max(insertions,&nbsp;deletions);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1335">1335</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;insertions&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1336">1336</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;deletions&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1337">1337</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1338">1338</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1339">1339</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1340">1340</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;levenshtein&nbsp;+=&nbsp;std::max(insertions,&nbsp;deletions);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1341">1341</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;levenshtein;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1342">1342</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1343">1343</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1344">1344</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1345">1345</td><td wrap="wrap" class="diff_line">QString&nbsp;diff_match_patch::diff_toDelta(const&nbsp;QList&lt;Diff&gt;&nbsp;&amp;diffs)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1346">1346</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1347">1347</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;foreach(Diff&nbsp;aDiff,&nbsp;diffs)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1348">1348</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;switch&nbsp;(aDiff.operation)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1349">1349</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;INSERT:&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1350">1350</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;QString&nbsp;encoded&nbsp;=&nbsp;QString(QUrl::toPercentEncoding(aDiff.text,</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1351">1351</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;!~*'();/?:@&amp;=+$,#"));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1352">1352</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text&nbsp;+=&nbsp;QString("+")&nbsp;+&nbsp;encoded&nbsp;+&nbsp;QString("\t");</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1353">1353</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1354">1354</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1355">1355</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;DELETE:</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1356">1356</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text&nbsp;+=&nbsp;QString("-")&nbsp;+&nbsp;QString::number(aDiff.text.length())</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1357">1357</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;QString("\t");</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1358">1358</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1359">1359</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;EQUAL:</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1360">1360</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text&nbsp;+=&nbsp;QString("=")&nbsp;+&nbsp;QString::number(aDiff.text.length())</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1361">1361</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;QString("\t");</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1362">1362</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1363">1363</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1364">1364</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1365">1365</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(!text.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1366">1366</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Strip&nbsp;off&nbsp;trailing&nbsp;tab&nbsp;character.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1367">1367</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;text&nbsp;=&nbsp;text.left(text.length()&nbsp;-&nbsp;1);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1368">1368</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1369">1369</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1370">1370</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1371">1371</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1372">1372</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1373">1373</td><td wrap="wrap" class="diff_line">QList&lt;Diff&gt;&nbsp;diff_match_patch::diff_fromDelta(const&nbsp;QString&nbsp;&amp;text1,</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1374">1374</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QString&nbsp;&amp;delta)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1375">1375</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QList&lt;Diff&gt;&nbsp;diffs;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1376">1376</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;pointer&nbsp;=&nbsp;0;&nbsp;&nbsp;//&nbsp;Cursor&nbsp;in&nbsp;text1</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1377">1377</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QStringList&nbsp;tokens&nbsp;=&nbsp;delta.split("\t");</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1378">1378</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;foreach(QString&nbsp;token,&nbsp;tokens)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1379">1379</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(token.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1380">1380</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Blank&nbsp;tokens&nbsp;are&nbsp;ok&nbsp;(from&nbsp;a&nbsp;trailing&nbsp;\t).</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1381">1381</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1382">1382</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1383">1383</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Each&nbsp;token&nbsp;begins&nbsp;with&nbsp;a&nbsp;one&nbsp;character&nbsp;parameter&nbsp;which&nbsp;specifies&nbsp;the</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1384">1384</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;operation&nbsp;of&nbsp;this&nbsp;token&nbsp;(delete,&nbsp;insert,&nbsp;equality).</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1385">1385</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;QString&nbsp;param&nbsp;=&nbsp;safeMid(token,&nbsp;1);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1386">1386</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;switch&nbsp;(token[0].toAscii())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1387">1387</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;'+':</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1388">1388</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;param&nbsp;=&nbsp;QUrl::fromPercentEncoding(qPrintable(param));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1389">1389</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;diffs.append(Diff(INSERT,&nbsp;param));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1390">1390</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1391">1391</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;'-':</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1392">1392</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Fall&nbsp;through.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1393">1393</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;'=':&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1394">1394</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;n;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1395">1395</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;n&nbsp;=&nbsp;param.toInt();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1396">1396</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(n&nbsp;&lt;&nbsp;0)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1397">1397</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;QString("Negative&nbsp;number&nbsp;in&nbsp;diff_fromDelta:&nbsp;%1").arg(param);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1398">1398</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1399">1399</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;QString&nbsp;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1400">1400</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text&nbsp;=&nbsp;safeMid(text1,&nbsp;pointer,&nbsp;n);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1401">1401</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer&nbsp;+=&nbsp;n;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1402">1402</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(token[0]&nbsp;==&nbsp;QChar('='))&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1403">1403</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;diffs.append(Diff(EQUAL,&nbsp;text));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1404">1404</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1405">1405</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;diffs.append(Diff(DELETE,&nbsp;text));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1406">1406</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1407">1407</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1408">1408</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1409">1409</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default:</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1410">1410</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;QString("Invalid&nbsp;diff&nbsp;operation&nbsp;in&nbsp;diff_fromDelta:&nbsp;%1")</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1411">1411</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.arg(token[0]);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1412">1412</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1413">1413</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1414">1414</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(pointer&nbsp;!=&nbsp;text1.length())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1415">1415</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;QString("Delta&nbsp;length&nbsp;(%1)&nbsp;smaller&nbsp;than&nbsp;source&nbsp;text&nbsp;length&nbsp;(%2)")</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1416">1416</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.arg(pointer).arg(text1.length());</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1417">1417</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1418">1418</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;diffs;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1419">1419</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1420">1420</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1421">1421</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1422">1422</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;&nbsp;MATCH&nbsp;FUNCTIONS</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1423">1423</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1424">1424</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1425">1425</td><td wrap="wrap" class="diff_line">int&nbsp;diff_match_patch::match_main(const&nbsp;QString&nbsp;&amp;text,&nbsp;const&nbsp;QString&nbsp;&amp;pattern,</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1426">1426</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;loc)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1427">1427</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Check&nbsp;for&nbsp;null&nbsp;inputs.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1428">1428</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(text.isNull()&nbsp;||&nbsp;pattern.isNull())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1429">1429</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;"Null&nbsp;inputs.&nbsp;(match_main)";</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1430">1430</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1431">1431</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1432">1432</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;loc&nbsp;=&nbsp;std::max(0,&nbsp;std::min(loc,&nbsp;text.length()));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1433">1433</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(text&nbsp;==&nbsp;pattern)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1434">1434</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Shortcut&nbsp;(potentially&nbsp;not&nbsp;guaranteed&nbsp;by&nbsp;the&nbsp;algorithm)</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1435">1435</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1436">1436</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(text.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1437">1437</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Nothing&nbsp;to&nbsp;match.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1438">1438</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;-1;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1439">1439</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(loc&nbsp;+&nbsp;pattern.length()&nbsp;&lt;=&nbsp;text.length()</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1440">1440</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;&nbsp;safeMid(text,&nbsp;loc,&nbsp;pattern.length())&nbsp;==&nbsp;pattern)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1441">1441</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Perfect&nbsp;match&nbsp;at&nbsp;the&nbsp;perfect&nbsp;spot!&nbsp;&nbsp;(Includes&nbsp;case&nbsp;of&nbsp;null&nbsp;pattern)</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1442">1442</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;loc;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1443">1443</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1444">1444</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Do&nbsp;a&nbsp;fuzzy&nbsp;compare.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1445">1445</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;match_bitap(text,&nbsp;pattern,&nbsp;loc);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1446">1446</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1447">1447</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1448">1448</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1449">1449</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1450">1450</td><td wrap="wrap" class="diff_line">int&nbsp;diff_match_patch::match_bitap(const&nbsp;QString&nbsp;&amp;text,&nbsp;const&nbsp;QString&nbsp;&amp;pattern,</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1451">1451</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;loc)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1452">1452</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(!(Match_MaxBits&nbsp;==&nbsp;0&nbsp;||&nbsp;pattern.length()&nbsp;&lt;=&nbsp;Match_MaxBits))&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1453">1453</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;"Pattern&nbsp;too&nbsp;long&nbsp;for&nbsp;this&nbsp;application.";</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1454">1454</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1455">1455</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1456">1456</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Initialise&nbsp;the&nbsp;alphabet.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1457">1457</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QMap&lt;QChar,&nbsp;int&gt;&nbsp;s&nbsp;=&nbsp;match_alphabet(pattern);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1458">1458</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1459">1459</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Highest&nbsp;score&nbsp;beyond&nbsp;which&nbsp;we&nbsp;give&nbsp;up.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1460">1460</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;double&nbsp;score_threshold&nbsp;=&nbsp;Match_Threshold;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1461">1461</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Is&nbsp;there&nbsp;a&nbsp;nearby&nbsp;exact&nbsp;match?&nbsp;(speedup)</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1462">1462</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;best_loc&nbsp;=&nbsp;text.indexOf(pattern,&nbsp;loc);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1463">1463</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(best_loc&nbsp;!=&nbsp;-1)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1464">1464</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;score_threshold&nbsp;=&nbsp;std::min(match_bitapScore(0,&nbsp;best_loc,&nbsp;loc,&nbsp;pattern),</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1465">1465</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;score_threshold);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1466">1466</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;What&nbsp;about&nbsp;in&nbsp;the&nbsp;other&nbsp;direction?&nbsp;(speedup)</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1467">1467</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;best_loc&nbsp;=&nbsp;text.lastIndexOf(pattern,&nbsp;loc&nbsp;+&nbsp;pattern.length());</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1468">1468</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(best_loc&nbsp;!=&nbsp;-1)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1469">1469</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;score_threshold&nbsp;=&nbsp;std::min(match_bitapScore(0,&nbsp;best_loc,&nbsp;loc,&nbsp;pattern),</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1470">1470</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;score_threshold);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1471">1471</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1472">1472</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1473">1473</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1474">1474</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Initialise&nbsp;the&nbsp;bit&nbsp;arrays.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1475">1475</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;matchmask&nbsp;=&nbsp;1&nbsp;&lt;&lt;&nbsp;(pattern.length()&nbsp;-&nbsp;1);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1476">1476</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;best_loc&nbsp;=&nbsp;-1;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1477">1477</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1478">1478</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;bin_min,&nbsp;bin_mid;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1479">1479</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;bin_max&nbsp;=&nbsp;pattern.length()&nbsp;+&nbsp;text.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1480">1480</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;*rd;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1481">1481</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;*last_rd&nbsp;=&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1482">1482</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;for&nbsp;(int&nbsp;d&nbsp;=&nbsp;0;&nbsp;d&nbsp;&lt;&nbsp;pattern.length();&nbsp;d++)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1483">1483</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Scan&nbsp;for&nbsp;the&nbsp;best&nbsp;match;&nbsp;each&nbsp;iteration&nbsp;allows&nbsp;for&nbsp;one&nbsp;more&nbsp;error.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1484">1484</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Run&nbsp;a&nbsp;binary&nbsp;search&nbsp;to&nbsp;determine&nbsp;how&nbsp;far&nbsp;from&nbsp;'loc'&nbsp;we&nbsp;can&nbsp;stray&nbsp;at</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1485">1485</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;this&nbsp;error&nbsp;level.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1486">1486</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;bin_min&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1487">1487</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;bin_mid&nbsp;=&nbsp;bin_max;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1488">1488</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(bin_min&nbsp;&lt;&nbsp;bin_mid)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1489">1489</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(match_bitapScore(d,&nbsp;loc&nbsp;+&nbsp;bin_mid,&nbsp;loc,&nbsp;pattern)</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1490">1490</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;=&nbsp;score_threshold)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1491">1491</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bin_min&nbsp;=&nbsp;bin_mid;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1492">1492</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1493">1493</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bin_max&nbsp;=&nbsp;bin_mid;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1494">1494</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1495">1495</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bin_mid&nbsp;=&nbsp;(bin_max&nbsp;-&nbsp;bin_min)&nbsp;/&nbsp;2&nbsp;+&nbsp;bin_min;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1496">1496</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1497">1497</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Use&nbsp;the&nbsp;result&nbsp;from&nbsp;this&nbsp;iteration&nbsp;as&nbsp;the&nbsp;maximum&nbsp;for&nbsp;the&nbsp;next.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1498">1498</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;bin_max&nbsp;=&nbsp;bin_mid;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1499">1499</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;start&nbsp;=&nbsp;std::max(1,&nbsp;loc&nbsp;-&nbsp;bin_mid&nbsp;+&nbsp;1);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1500">1500</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;finish&nbsp;=&nbsp;std::min(loc&nbsp;+&nbsp;bin_mid,&nbsp;text.length())&nbsp;+&nbsp;pattern.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1501">1501</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1502">1502</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;rd&nbsp;=&nbsp;new&nbsp;int[finish&nbsp;+&nbsp;2];</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1503">1503</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;rd[finish&nbsp;+&nbsp;1]&nbsp;=&nbsp;(1&nbsp;&lt;&lt;&nbsp;d)&nbsp;-&nbsp;1;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1504">1504</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(int&nbsp;j&nbsp;=&nbsp;finish;&nbsp;j&nbsp;&gt;=&nbsp;start;&nbsp;j--)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1505">1505</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;charMatch;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1506">1506</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(text.length()&nbsp;&lt;=&nbsp;j&nbsp;-&nbsp;1)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1507">1507</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Out&nbsp;of&nbsp;range.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1508">1508</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;charMatch&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1509">1509</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1510">1510</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;charMatch&nbsp;=&nbsp;s.value(text[j&nbsp;-&nbsp;1],&nbsp;0);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1511">1511</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1512">1512</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(d&nbsp;==&nbsp;0)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1513">1513</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;First&nbsp;pass:&nbsp;exact&nbsp;match.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1514">1514</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rd[j]&nbsp;=&nbsp;((rd[j&nbsp;+&nbsp;1]&nbsp;&lt;&lt;&nbsp;1)&nbsp;|&nbsp;1)&nbsp;&amp;&nbsp;charMatch;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1515">1515</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1516">1516</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Subsequent&nbsp;passes:&nbsp;fuzzy&nbsp;match.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1517">1517</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rd[j]&nbsp;=&nbsp;((rd[j&nbsp;+&nbsp;1]&nbsp;&lt;&lt;&nbsp;1)&nbsp;|&nbsp;1)&nbsp;&amp;&nbsp;charMatch</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1518">1518</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;(((last_rd[j&nbsp;+&nbsp;1]&nbsp;|&nbsp;last_rd[j])&nbsp;&lt;&lt;&nbsp;1)&nbsp;|&nbsp;1)</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1519">1519</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;last_rd[j&nbsp;+&nbsp;1];</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1520">1520</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1521">1521</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;((rd[j]&nbsp;&amp;&nbsp;matchmask)&nbsp;!=&nbsp;0)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1522">1522</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;double&nbsp;score&nbsp;=&nbsp;match_bitapScore(d,&nbsp;j&nbsp;-&nbsp;1,&nbsp;loc,&nbsp;pattern);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1523">1523</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;This&nbsp;match&nbsp;will&nbsp;almost&nbsp;certainly&nbsp;be&nbsp;better&nbsp;than&nbsp;any&nbsp;existing</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1524">1524</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;match.&nbsp;&nbsp;But&nbsp;check&nbsp;anyway.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1525">1525</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(score&nbsp;&lt;=&nbsp;score_threshold)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1526">1526</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Told&nbsp;you&nbsp;so.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1527">1527</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;score_threshold&nbsp;=&nbsp;score;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1528">1528</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;best_loc&nbsp;=&nbsp;j&nbsp;-&nbsp;1;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1529">1529</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(best_loc&nbsp;&gt;&nbsp;loc)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1530">1530</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;When&nbsp;passing&nbsp;loc,&nbsp;don't&nbsp;exceed&nbsp;our&nbsp;current&nbsp;distance&nbsp;from&nbsp;loc.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1531">1531</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start&nbsp;=&nbsp;std::max(1,&nbsp;2&nbsp;*&nbsp;loc&nbsp;-&nbsp;best_loc);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1532">1532</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1533">1533</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Already&nbsp;passed&nbsp;loc,&nbsp;downhill&nbsp;from&nbsp;here&nbsp;on&nbsp;in.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1534">1534</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1535">1535</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1536">1536</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1537">1537</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1538">1538</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1539">1539</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(match_bitapScore(d&nbsp;+&nbsp;1,&nbsp;loc,&nbsp;loc,&nbsp;pattern)&nbsp;&gt;&nbsp;score_threshold)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1540">1540</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;No&nbsp;hope&nbsp;for&nbsp;a&nbsp;(better)&nbsp;match&nbsp;at&nbsp;greater&nbsp;error&nbsp;levels.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1541">1541</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1542">1542</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1543">1543</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;delete&nbsp;[]&nbsp;last_rd;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1544">1544</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;last_rd&nbsp;=&nbsp;rd;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1545">1545</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1546">1546</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;delete&nbsp;[]&nbsp;last_rd;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1547">1547</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;delete&nbsp;[]&nbsp;rd;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1548">1548</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;best_loc;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1549">1549</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1550">1550</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1551">1551</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1552">1552</td><td wrap="wrap" class="diff_line">double&nbsp;diff_match_patch::match_bitapScore(int&nbsp;e,&nbsp;int&nbsp;x,&nbsp;int&nbsp;loc,</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1553">1553</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QString&nbsp;&amp;pattern)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1554">1554</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;float&nbsp;accuracy&nbsp;=&nbsp;static_cast&lt;float&gt;&nbsp;(e)&nbsp;/&nbsp;pattern.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1555">1555</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;int&nbsp;proximity&nbsp;=&nbsp;qAbs(loc&nbsp;-&nbsp;x);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1556">1556</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(Match_Distance&nbsp;==&nbsp;0)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1557">1557</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Dodge&nbsp;divide&nbsp;by&nbsp;zero&nbsp;error.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1558">1558</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;proximity&nbsp;==&nbsp;0&nbsp;?&nbsp;accuracy&nbsp;:&nbsp;1.0;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1559">1559</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1560">1560</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;accuracy&nbsp;+&nbsp;(proximity&nbsp;/&nbsp;static_cast&lt;float&gt;&nbsp;(Match_Distance));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1561">1561</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1562">1562</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1563">1563</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1564">1564</td><td wrap="wrap" class="diff_line">QMap&lt;QChar,&nbsp;int&gt;&nbsp;diff_match_patch::match_alphabet(const&nbsp;QString&nbsp;&amp;pattern)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1565">1565</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QMap&lt;QChar,&nbsp;int&gt;&nbsp;s;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1566">1566</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;i;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1567">1567</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;pattern.length();&nbsp;i++)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1568">1568</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;QChar&nbsp;c&nbsp;=&nbsp;pattern[i];</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1569">1569</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;s.insert(c,&nbsp;0);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1570">1570</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1571">1571</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;pattern.length();&nbsp;i++)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1572">1572</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;QChar&nbsp;c&nbsp;=&nbsp;pattern[i];</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1573">1573</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;s.insert(c,&nbsp;s.value(c)&nbsp;|&nbsp;(1&nbsp;&lt;&lt;&nbsp;(pattern.length()&nbsp;-&nbsp;i&nbsp;-&nbsp;1)));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1574">1574</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1575">1575</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;s;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1576">1576</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1577">1577</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1578">1578</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1579">1579</td><td wrap="wrap" class="diff_line">//&nbsp;&nbsp;PATCH&nbsp;FUNCTIONS</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1580">1580</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1581">1581</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1582">1582</td><td wrap="wrap" class="diff_line">void&nbsp;diff_match_patch::patch_addContext(Patch&nbsp;&amp;patch,&nbsp;const&nbsp;QString&nbsp;&amp;text)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1583">1583</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(text.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1584">1584</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1585">1585</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1586">1586</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;pattern&nbsp;=&nbsp;safeMid(text,&nbsp;patch.start2,&nbsp;patch.length1);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1587">1587</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;padding&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1588">1588</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1589">1589</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Look&nbsp;for&nbsp;the&nbsp;first&nbsp;and&nbsp;last&nbsp;matches&nbsp;of&nbsp;pattern&nbsp;in&nbsp;text.&nbsp;&nbsp;If&nbsp;two&nbsp;different</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1590">1590</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;matches&nbsp;are&nbsp;found,&nbsp;increase&nbsp;the&nbsp;pattern&nbsp;length.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1591">1591</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;while&nbsp;(text.indexOf(pattern)&nbsp;!=&nbsp;text.lastIndexOf(pattern)</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1592">1592</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;&nbsp;pattern.length()&nbsp;&lt;&nbsp;Match_MaxBits&nbsp;-&nbsp;Patch_Margin&nbsp;-&nbsp;Patch_Margin)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1593">1593</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;padding&nbsp;+=&nbsp;Patch_Margin;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1594">1594</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;pattern&nbsp;=&nbsp;safeMid(text,&nbsp;std::max(0,&nbsp;patch.start2&nbsp;-&nbsp;padding),</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1595">1595</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::min(text.length(),&nbsp;patch.start2&nbsp;+&nbsp;patch.length1&nbsp;+&nbsp;padding)</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1596">1596</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;std::max(0,&nbsp;patch.start2&nbsp;-&nbsp;padding));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1597">1597</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1598">1598</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Add&nbsp;one&nbsp;chunk&nbsp;for&nbsp;good&nbsp;luck.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1599">1599</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;padding&nbsp;+=&nbsp;Patch_Margin;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1600">1600</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1601">1601</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Add&nbsp;the&nbsp;prefix.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1602">1602</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;prefix&nbsp;=&nbsp;safeMid(text,&nbsp;std::max(0,&nbsp;patch.start2&nbsp;-&nbsp;padding),</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1603">1603</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.start2&nbsp;-&nbsp;std::max(0,&nbsp;patch.start2&nbsp;-&nbsp;padding));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1604">1604</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(!prefix.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1605">1605</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;patch.diffs.prepend(Diff(EQUAL,&nbsp;prefix));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1606">1606</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1607">1607</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Add&nbsp;the&nbsp;suffix.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1608">1608</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;suffix&nbsp;=&nbsp;safeMid(text,&nbsp;patch.start2&nbsp;+&nbsp;patch.length1,</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1609">1609</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::min(text.length(),&nbsp;patch.start2&nbsp;+&nbsp;patch.length1&nbsp;+&nbsp;padding)</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1610">1610</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;(patch.start2&nbsp;+&nbsp;patch.length1));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1611">1611</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(!suffix.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1612">1612</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;patch.diffs.append(Diff(EQUAL,&nbsp;suffix));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1613">1613</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1614">1614</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1615">1615</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Roll&nbsp;back&nbsp;the&nbsp;start&nbsp;points.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1616">1616</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;patch.start1&nbsp;-=&nbsp;prefix.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1617">1617</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;patch.start2&nbsp;-=&nbsp;prefix.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1618">1618</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Extend&nbsp;the&nbsp;lengths.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1619">1619</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;patch.length1&nbsp;+=&nbsp;prefix.length()&nbsp;+&nbsp;suffix.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1620">1620</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;patch.length2&nbsp;+=&nbsp;prefix.length()&nbsp;+&nbsp;suffix.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1621">1621</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1622">1622</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1623">1623</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1624">1624</td><td wrap="wrap" class="diff_line">QList&lt;Patch&gt;&nbsp;diff_match_patch::patch_make(const&nbsp;QString&nbsp;&amp;text1,</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1625">1625</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QString&nbsp;&amp;text2)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1626">1626</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Check&nbsp;for&nbsp;null&nbsp;inputs.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1627">1627</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(text1.isNull()&nbsp;||&nbsp;text2.isNull())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1628">1628</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;"Null&nbsp;inputs.&nbsp;(patch_make)";</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1629">1629</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1630">1630</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1631">1631</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;No&nbsp;diffs&nbsp;provided,&nbsp;compute&nbsp;our&nbsp;own.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1632">1632</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QList&lt;Diff&gt;&nbsp;diffs&nbsp;=&nbsp;diff_main(text1,&nbsp;text2,&nbsp;true);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1633">1633</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(diffs.size()&nbsp;&gt;&nbsp;2)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1634">1634</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;diff_cleanupSemantic(diffs);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1635">1635</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;diff_cleanupEfficiency(diffs);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1636">1636</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1637">1637</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1638">1638</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;patch_make(text1,&nbsp;diffs);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1639">1639</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1640">1640</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1641">1641</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1642">1642</td><td wrap="wrap" class="diff_line">QList&lt;Patch&gt;&nbsp;diff_match_patch::patch_make(const&nbsp;QList&lt;Diff&gt;&nbsp;&amp;diffs)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1643">1643</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;No&nbsp;origin&nbsp;string&nbsp;provided,&nbsp;compute&nbsp;our&nbsp;own.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1644">1644</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;QString&nbsp;text1&nbsp;=&nbsp;diff_text1(diffs);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1645">1645</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;patch_make(text1,&nbsp;diffs);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1646">1646</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1647">1647</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1648">1648</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1649">1649</td><td wrap="wrap" class="diff_line">QList&lt;Patch&gt;&nbsp;diff_match_patch::patch_make(const&nbsp;QString&nbsp;&amp;text1,</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1650">1650</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QString&nbsp;&amp;text2,</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1651">1651</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QList&lt;Diff&gt;&nbsp;&amp;diffs)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1652">1652</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;text2&nbsp;is&nbsp;entirely&nbsp;unused.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1653">1653</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;patch_make(text1,&nbsp;diffs);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1654">1654</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1655">1655</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Q_UNUSED(text2)</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1656">1656</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1657">1657</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1658">1658</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1659">1659</td><td wrap="wrap" class="diff_line">QList&lt;Patch&gt;&nbsp;diff_match_patch::patch_make(const&nbsp;QString&nbsp;&amp;text1,</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1660">1660</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QList&lt;Diff&gt;&nbsp;&amp;diffs)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1661">1661</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Check&nbsp;for&nbsp;null&nbsp;inputs.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1662">1662</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(text1.isNull())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1663">1663</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;"Null&nbsp;inputs.&nbsp;(patch_make)";</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1664">1664</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1665">1665</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1666">1666</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QList&lt;Patch&gt;&nbsp;patches;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1667">1667</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(diffs.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1668">1668</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;patches;&nbsp;&nbsp;//&nbsp;Get&nbsp;rid&nbsp;of&nbsp;the&nbsp;null&nbsp;case.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1669">1669</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1670">1670</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Patch&nbsp;patch;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1671">1671</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;char_count1&nbsp;=&nbsp;0;&nbsp;&nbsp;//&nbsp;Number&nbsp;of&nbsp;characters&nbsp;into&nbsp;the&nbsp;text1&nbsp;string.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1672">1672</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;char_count2&nbsp;=&nbsp;0;&nbsp;&nbsp;//&nbsp;Number&nbsp;of&nbsp;characters&nbsp;into&nbsp;the&nbsp;text2&nbsp;string.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1673">1673</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Start&nbsp;with&nbsp;text1&nbsp;(prepatch_text)&nbsp;and&nbsp;apply&nbsp;the&nbsp;diffs&nbsp;until&nbsp;we&nbsp;arrive&nbsp;at</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1674">1674</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;text2&nbsp;(postpatch_text).&nbsp;&nbsp;We&nbsp;recreate&nbsp;the&nbsp;patches&nbsp;one&nbsp;by&nbsp;one&nbsp;to&nbsp;determine</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1675">1675</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;context&nbsp;info.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1676">1676</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;prepatch_text&nbsp;=&nbsp;text1;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1677">1677</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;postpatch_text&nbsp;=&nbsp;text1;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1678">1678</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;foreach(Diff&nbsp;aDiff,&nbsp;diffs)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1679">1679</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(patch.diffs.isEmpty()&nbsp;&amp;&amp;&nbsp;aDiff.operation&nbsp;!=&nbsp;EQUAL)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1680">1680</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;A&nbsp;new&nbsp;patch&nbsp;starts&nbsp;here.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1681">1681</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.start1&nbsp;=&nbsp;char_count1;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1682">1682</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.start2&nbsp;=&nbsp;char_count2;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1683">1683</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1684">1684</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1685">1685</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;switch&nbsp;(aDiff.operation)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1686">1686</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;INSERT:</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1687">1687</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.diffs.append(aDiff);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1688">1688</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.length2&nbsp;+=&nbsp;aDiff.text.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1689">1689</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;postpatch_text&nbsp;=&nbsp;postpatch_text.left(char_count2)</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1690">1690</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;aDiff.text&nbsp;+&nbsp;safeMid(postpatch_text,&nbsp;char_count2);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1691">1691</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1692">1692</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;DELETE:</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1693">1693</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.length1&nbsp;+=&nbsp;aDiff.text.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1694">1694</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.diffs.append(aDiff);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1695">1695</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;postpatch_text&nbsp;=&nbsp;postpatch_text.left(char_count2)</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1696">1696</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;safeMid(postpatch_text,&nbsp;char_count2&nbsp;+&nbsp;aDiff.text.length());</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1697">1697</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1698">1698</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;EQUAL:</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1699">1699</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(aDiff.text.length()&nbsp;&lt;=&nbsp;2&nbsp;*&nbsp;Patch_Margin</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1700">1700</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;&nbsp;!patch.diffs.isEmpty()&nbsp;&amp;&amp;&nbsp;!(aDiff&nbsp;==&nbsp;diffs.back()))&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1701">1701</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Small&nbsp;equality&nbsp;inside&nbsp;a&nbsp;patch.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1702">1702</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.diffs.append(aDiff);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1703">1703</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.length1&nbsp;+=&nbsp;aDiff.text.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1704">1704</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.length2&nbsp;+=&nbsp;aDiff.text.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1705">1705</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1706">1706</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1707">1707</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(aDiff.text.length()&nbsp;&gt;=&nbsp;2&nbsp;*&nbsp;Patch_Margin)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1708">1708</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Time&nbsp;for&nbsp;a&nbsp;new&nbsp;patch.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1709">1709</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!patch.diffs.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1710">1710</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch_addContext(patch,&nbsp;prepatch_text);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1711">1711</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patches.append(patch);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1712">1712</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch&nbsp;=&nbsp;Patch();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1713">1713</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Unlike&nbsp;Unidiff,&nbsp;our&nbsp;patch&nbsp;lists&nbsp;have&nbsp;a&nbsp;rolling&nbsp;context.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1714">1714</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;http://code.google.com/p/google-diff-match-patch/wiki/Unidiff</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1715">1715</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Update&nbsp;prepatch&nbsp;text&nbsp;&amp;&nbsp;pos&nbsp;to&nbsp;reflect&nbsp;the&nbsp;application&nbsp;of&nbsp;the</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1716">1716</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;just&nbsp;completed&nbsp;patch.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1717">1717</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prepatch_text&nbsp;=&nbsp;postpatch_text;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1718">1718</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char_count1&nbsp;=&nbsp;char_count2;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1719">1719</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1720">1720</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1721">1721</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1722">1722</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1723">1723</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1724">1724</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Update&nbsp;the&nbsp;current&nbsp;character&nbsp;count.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1725">1725</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(aDiff.operation&nbsp;!=&nbsp;INSERT)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1726">1726</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char_count1&nbsp;+=&nbsp;aDiff.text.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1727">1727</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1728">1728</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(aDiff.operation&nbsp;!=&nbsp;DELETE)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1729">1729</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char_count2&nbsp;+=&nbsp;aDiff.text.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1730">1730</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1731">1731</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1732">1732</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Pick&nbsp;up&nbsp;the&nbsp;leftover&nbsp;patch&nbsp;if&nbsp;not&nbsp;empty.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1733">1733</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(!patch.diffs.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1734">1734</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;patch_addContext(patch,&nbsp;prepatch_text);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1735">1735</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;patches.append(patch);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1736">1736</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1737">1737</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1738">1738</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;patches;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1739">1739</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1740">1740</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1741">1741</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1742">1742</td><td wrap="wrap" class="diff_line">QList&lt;Patch&gt;&nbsp;diff_match_patch::patch_deepCopy(QList&lt;Patch&gt;&nbsp;&amp;patches)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1743">1743</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QList&lt;Patch&gt;&nbsp;patchesCopy;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1744">1744</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;foreach(Patch&nbsp;aPatch,&nbsp;patches)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1745">1745</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;Patch&nbsp;patchCopy&nbsp;=&nbsp;Patch();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1746">1746</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;foreach(Diff&nbsp;aDiff,&nbsp;aPatch.diffs)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1747">1747</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Diff&nbsp;diffCopy&nbsp;=&nbsp;Diff(aDiff.operation,&nbsp;aDiff.text);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1748">1748</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patchCopy.diffs.append(diffCopy);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1749">1749</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1750">1750</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;patchCopy.start1&nbsp;=&nbsp;aPatch.start1;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1751">1751</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;patchCopy.start2&nbsp;=&nbsp;aPatch.start2;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1752">1752</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;patchCopy.length1&nbsp;=&nbsp;aPatch.length1;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1753">1753</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;patchCopy.length2&nbsp;=&nbsp;aPatch.length2;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1754">1754</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;patchesCopy.append(patchCopy);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1755">1755</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1756">1756</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;patchesCopy;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1757">1757</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1758">1758</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1759">1759</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1760">1760</td><td wrap="wrap" class="diff_line">QPair&lt;QString,&nbsp;QVector&lt;bool&gt;&nbsp;&gt;&nbsp;diff_match_patch::patch_apply(</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1761">1761</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;QList&lt;Patch&gt;&nbsp;&amp;patches,&nbsp;const&nbsp;QString&nbsp;&amp;sourceText)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1762">1762</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;text&nbsp;=&nbsp;sourceText;&nbsp;&nbsp;//&nbsp;Copy&nbsp;to&nbsp;preserve&nbsp;original.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1763">1763</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(patches.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1764">1764</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;QPair&lt;QString,QVector&lt;bool&gt;&nbsp;&gt;(text,&nbsp;QVector&lt;bool&gt;(0));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1765">1765</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1766">1766</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1767">1767</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Deep&nbsp;copy&nbsp;the&nbsp;patches&nbsp;so&nbsp;that&nbsp;no&nbsp;changes&nbsp;are&nbsp;made&nbsp;to&nbsp;originals.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1768">1768</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QList&lt;Patch&gt;&nbsp;patchesCopy&nbsp;=&nbsp;patch_deepCopy(patches);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1769">1769</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1770">1770</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;nullPadding&nbsp;=&nbsp;patch_addPadding(patchesCopy);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1771">1771</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;text&nbsp;=&nbsp;nullPadding&nbsp;+&nbsp;text&nbsp;+&nbsp;nullPadding;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1772">1772</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;patch_splitMax(patchesCopy);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1773">1773</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1774">1774</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;x&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1775">1775</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;delta&nbsp;keeps&nbsp;track&nbsp;of&nbsp;the&nbsp;offset&nbsp;between&nbsp;the&nbsp;expected&nbsp;and&nbsp;actual&nbsp;location</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1776">1776</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;of&nbsp;the&nbsp;previous&nbsp;patch.&nbsp;&nbsp;If&nbsp;there&nbsp;are&nbsp;patches&nbsp;expected&nbsp;at&nbsp;positions&nbsp;10&nbsp;and</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1777">1777</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;20,&nbsp;but&nbsp;the&nbsp;first&nbsp;patch&nbsp;was&nbsp;found&nbsp;at&nbsp;12,&nbsp;delta&nbsp;is&nbsp;2&nbsp;and&nbsp;the&nbsp;second&nbsp;patch</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1778">1778</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;has&nbsp;an&nbsp;effective&nbsp;expected&nbsp;position&nbsp;of&nbsp;22.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1779">1779</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;delta&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1780">1780</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QVector&lt;bool&gt;&nbsp;results(patchesCopy.size());</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1781">1781</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;foreach(Patch&nbsp;aPatch,&nbsp;patchesCopy)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1782">1782</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;expected_loc&nbsp;=&nbsp;aPatch.start2&nbsp;+&nbsp;delta;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1783">1783</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;QString&nbsp;text1&nbsp;=&nbsp;diff_text1(aPatch.diffs);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1784">1784</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;start_loc;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1785">1785</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;end_loc&nbsp;=&nbsp;-1;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1786">1786</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(text1.length()&nbsp;&gt;&nbsp;Match_MaxBits)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1787">1787</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;patch_splitMax&nbsp;will&nbsp;only&nbsp;provide&nbsp;an&nbsp;oversized&nbsp;pattern&nbsp;in&nbsp;the&nbsp;case&nbsp;of</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1788">1788</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;a&nbsp;monster&nbsp;delete.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1789">1789</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_loc&nbsp;=&nbsp;match_main(text,&nbsp;text1.left(Match_MaxBits),&nbsp;expected_loc);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1790">1790</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(start_loc&nbsp;!=&nbsp;-1)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1791">1791</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end_loc&nbsp;=&nbsp;match_main(text,&nbsp;text1.right(Match_MaxBits),</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1792">1792</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expected_loc&nbsp;+&nbsp;text1.length()&nbsp;-&nbsp;Match_MaxBits);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1793">1793</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(end_loc&nbsp;==&nbsp;-1&nbsp;||&nbsp;start_loc&nbsp;&gt;=&nbsp;end_loc)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1794">1794</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Can't&nbsp;find&nbsp;valid&nbsp;trailing&nbsp;context.&nbsp;&nbsp;Drop&nbsp;this&nbsp;patch.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1795">1795</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_loc&nbsp;=&nbsp;-1;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1796">1796</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1797">1797</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1798">1798</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1799">1799</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_loc&nbsp;=&nbsp;match_main(text,&nbsp;text1,&nbsp;expected_loc);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1800">1800</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1801">1801</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(start_loc&nbsp;==&nbsp;-1)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1802">1802</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;No&nbsp;match&nbsp;found.&nbsp;&nbsp;:(</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1803">1803</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;results[x]&nbsp;=&nbsp;false;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1804">1804</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Subtract&nbsp;the&nbsp;delta&nbsp;for&nbsp;this&nbsp;failed&nbsp;patch&nbsp;from&nbsp;subsequent&nbsp;patches.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1805">1805</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delta&nbsp;-=&nbsp;aPatch.length2&nbsp;-&nbsp;aPatch.length1;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1806">1806</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1807">1807</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Found&nbsp;a&nbsp;match.&nbsp;&nbsp;:)</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1808">1808</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;results[x]&nbsp;=&nbsp;true;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1809">1809</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delta&nbsp;=&nbsp;start_loc&nbsp;-&nbsp;expected_loc;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1810">1810</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;QString&nbsp;text2;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1811">1811</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(end_loc&nbsp;==&nbsp;-1)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1812">1812</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text2&nbsp;=&nbsp;safeMid(text,&nbsp;start_loc,&nbsp;text1.length());</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1813">1813</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1814">1814</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text2&nbsp;=&nbsp;safeMid(text,&nbsp;start_loc,&nbsp;end_loc&nbsp;+&nbsp;Match_MaxBits&nbsp;-&nbsp;start_loc);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1815">1815</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1816">1816</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(text1&nbsp;==&nbsp;text2)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1817">1817</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Perfect&nbsp;match,&nbsp;just&nbsp;shove&nbsp;the&nbsp;replacement&nbsp;text&nbsp;in.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1818">1818</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text&nbsp;=&nbsp;text.left(start_loc)&nbsp;+&nbsp;diff_text2(aPatch.diffs)</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1819">1819</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;safeMid(text,&nbsp;start_loc&nbsp;+&nbsp;text1.length());</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1820">1820</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1821">1821</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Imperfect&nbsp;match.&nbsp;&nbsp;Run&nbsp;a&nbsp;diff&nbsp;to&nbsp;get&nbsp;a&nbsp;framework&nbsp;of&nbsp;equivalent</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1822">1822</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;indices.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1823">1823</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;QList&lt;Diff&gt;&nbsp;diffs&nbsp;=&nbsp;diff_main(text1,&nbsp;text2,&nbsp;false);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1824">1824</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(text1.length()&nbsp;&gt;&nbsp;Match_MaxBits</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1825">1825</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;&nbsp;diff_levenshtein(diffs)&nbsp;/&nbsp;static_cast&lt;float&gt;&nbsp;(text1.length())</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1826">1826</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;Patch_DeleteThreshold)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1827">1827</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;end&nbsp;points&nbsp;match,&nbsp;but&nbsp;the&nbsp;content&nbsp;is&nbsp;unacceptably&nbsp;bad.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1828">1828</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;results[x]&nbsp;=&nbsp;false;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1829">1829</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1830">1830</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;diff_cleanupSemanticLossless(diffs);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1831">1831</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;index1&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1832">1832</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach(Diff&nbsp;aDiff,&nbsp;aPatch.diffs)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1833">1833</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(aDiff.operation&nbsp;!=&nbsp;EQUAL)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1834">1834</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;index2&nbsp;=&nbsp;diff_xIndex(diffs,&nbsp;index1);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1835">1835</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(aDiff.operation&nbsp;==&nbsp;INSERT)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1836">1836</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Insertion</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1837">1837</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text&nbsp;=&nbsp;text.left(start_loc&nbsp;+&nbsp;index2)&nbsp;+&nbsp;aDiff.text</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1838">1838</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;safeMid(text,&nbsp;start_loc&nbsp;+&nbsp;index2);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1839">1839</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(aDiff.operation&nbsp;==&nbsp;DELETE)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1840">1840</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Deletion</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1841">1841</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text&nbsp;=&nbsp;text.left(start_loc&nbsp;+&nbsp;index2)</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1842">1842</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;safeMid(text,&nbsp;start_loc&nbsp;+&nbsp;diff_xIndex(diffs,</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1843">1843</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;index1&nbsp;+&nbsp;aDiff.text.length()));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1844">1844</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1845">1845</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1846">1846</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(aDiff.operation&nbsp;!=&nbsp;DELETE)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1847">1847</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;index1&nbsp;+=&nbsp;aDiff.text.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1848">1848</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1849">1849</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1850">1850</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1851">1851</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1852">1852</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1853">1853</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;x++;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1854">1854</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1855">1855</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Strip&nbsp;the&nbsp;padding&nbsp;off.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1856">1856</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;text&nbsp;=&nbsp;safeMid(text,&nbsp;nullPadding.length(),&nbsp;text.length()</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1857">1857</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;2&nbsp;*&nbsp;nullPadding.length());</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1858">1858</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;QPair&lt;QString,&nbsp;QVector&lt;bool&gt;&nbsp;&gt;(text,&nbsp;results);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1859">1859</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1860">1860</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1861">1861</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1862">1862</td><td wrap="wrap" class="diff_line">QString&nbsp;diff_match_patch::patch_addPadding(QList&lt;Patch&gt;&nbsp;&amp;patches)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1863">1863</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;short&nbsp;paddingLength&nbsp;=&nbsp;Patch_Margin;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1864">1864</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;nullPadding&nbsp;=&nbsp;"";</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1865">1865</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;for&nbsp;(short&nbsp;x&nbsp;=&nbsp;1;&nbsp;x&nbsp;&lt;=&nbsp;paddingLength;&nbsp;x++)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1866">1866</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;nullPadding&nbsp;+=&nbsp;QChar((ushort)x);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1867">1867</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1868">1868</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1869">1869</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Bump&nbsp;all&nbsp;the&nbsp;patches&nbsp;forward.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1870">1870</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QMutableListIterator&lt;Patch&gt;&nbsp;pointer(patches);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1871">1871</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;while&nbsp;(pointer.hasNext())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1872">1872</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;Patch&nbsp;&amp;aPatch&nbsp;=&nbsp;pointer.next();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1873">1873</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;aPatch.start1&nbsp;+=&nbsp;paddingLength;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1874">1874</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;aPatch.start2&nbsp;+=&nbsp;paddingLength;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1875">1875</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1876">1876</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1877">1877</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Add&nbsp;some&nbsp;padding&nbsp;on&nbsp;start&nbsp;of&nbsp;first&nbsp;diff.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1878">1878</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Patch&nbsp;&amp;firstPatch&nbsp;=&nbsp;patches.first();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1879">1879</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QList&lt;Diff&gt;&nbsp;&amp;firstPatchDiffs&nbsp;=&nbsp;firstPatch.diffs;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1880">1880</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(firstPatchDiffs.empty()&nbsp;||&nbsp;firstPatchDiffs.first().operation&nbsp;!=&nbsp;EQUAL)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1881">1881</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Add&nbsp;nullPadding&nbsp;equality.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1882">1882</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;firstPatchDiffs.prepend(Diff(EQUAL,&nbsp;nullPadding));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1883">1883</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;firstPatch.start1&nbsp;-=&nbsp;paddingLength;&nbsp;&nbsp;//&nbsp;Should&nbsp;be&nbsp;0.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1884">1884</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;firstPatch.start2&nbsp;-=&nbsp;paddingLength;&nbsp;&nbsp;//&nbsp;Should&nbsp;be&nbsp;0.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1885">1885</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;firstPatch.length1&nbsp;+=&nbsp;paddingLength;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1886">1886</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;firstPatch.length2&nbsp;+=&nbsp;paddingLength;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1887">1887</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(paddingLength&nbsp;&gt;&nbsp;firstPatchDiffs.first().text.length())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1888">1888</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Grow&nbsp;first&nbsp;equality.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1889">1889</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;Diff&nbsp;&amp;firstDiff&nbsp;=&nbsp;firstPatchDiffs.first();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1890">1890</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;extraLength&nbsp;=&nbsp;paddingLength&nbsp;-&nbsp;firstDiff.text.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1891">1891</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;firstDiff.text&nbsp;=&nbsp;safeMid(nullPadding,&nbsp;firstDiff.text.length(),</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1892">1892</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;paddingLength&nbsp;-&nbsp;firstDiff.text.length())&nbsp;+&nbsp;firstDiff.text;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1893">1893</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;firstPatch.start1&nbsp;-=&nbsp;extraLength;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1894">1894</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;firstPatch.start2&nbsp;-=&nbsp;extraLength;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1895">1895</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;firstPatch.length1&nbsp;+=&nbsp;extraLength;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1896">1896</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;firstPatch.length2&nbsp;+=&nbsp;extraLength;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1897">1897</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1898">1898</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1899">1899</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Add&nbsp;some&nbsp;padding&nbsp;on&nbsp;end&nbsp;of&nbsp;last&nbsp;diff.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1900">1900</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Patch&nbsp;&amp;lastPatch&nbsp;=&nbsp;patches.first();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1901">1901</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QList&lt;Diff&gt;&nbsp;&amp;lastPatchDiffs&nbsp;=&nbsp;lastPatch.diffs;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1902">1902</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(lastPatchDiffs.empty()&nbsp;||&nbsp;lastPatchDiffs.last().operation&nbsp;!=&nbsp;EQUAL)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1903">1903</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Add&nbsp;nullPadding&nbsp;equality.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1904">1904</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;lastPatchDiffs.append(Diff(EQUAL,&nbsp;nullPadding));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1905">1905</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;lastPatch.length1&nbsp;+=&nbsp;paddingLength;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1906">1906</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;lastPatch.length2&nbsp;+=&nbsp;paddingLength;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1907">1907</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(paddingLength&nbsp;&gt;&nbsp;lastPatchDiffs.last().text.length())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1908">1908</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Grow&nbsp;last&nbsp;equality.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1909">1909</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;Diff&nbsp;&amp;lastDiff&nbsp;=&nbsp;lastPatchDiffs.last();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1910">1910</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;extraLength&nbsp;=&nbsp;paddingLength&nbsp;-&nbsp;lastDiff.text.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1911">1911</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;lastDiff.text&nbsp;+=&nbsp;nullPadding.left(extraLength);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1912">1912</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;lastPatch.length1&nbsp;+=&nbsp;extraLength;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1913">1913</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;lastPatch.length2&nbsp;+=&nbsp;extraLength;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1914">1914</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1915">1915</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1916">1916</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;nullPadding;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1917">1917</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1918">1918</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1919">1919</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1920">1920</td><td wrap="wrap" class="diff_line">void&nbsp;diff_match_patch::patch_splitMax(QList&lt;Patch&gt;&nbsp;&amp;patches)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1921">1921</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;short&nbsp;patch_size&nbsp;=&nbsp;Match_MaxBits;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1922">1922</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;precontext,&nbsp;postcontext;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1923">1923</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Patch&nbsp;patch;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1924">1924</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;start1,&nbsp;start2;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1925">1925</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;bool&nbsp;empty;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1926">1926</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Operation&nbsp;diff_type;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1927">1927</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;diff_text;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1928">1928</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QMutableListIterator&lt;Patch&gt;&nbsp;pointer(patches);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1929">1929</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Patch&nbsp;bigpatch;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1930">1930</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1931">1931</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(pointer.hasNext())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1932">1932</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;bigpatch&nbsp;=&nbsp;pointer.next();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1933">1933</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1934">1934</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1935">1935</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;while&nbsp;(!bigpatch.isNull())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1936">1936</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(bigpatch.length1&nbsp;&lt;=&nbsp;patch_size)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1937">1937</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bigpatch&nbsp;=&nbsp;pointer.hasNext()&nbsp;?&nbsp;pointer.next()&nbsp;:&nbsp;Patch();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1938">1938</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1939">1939</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1940">1940</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Remove&nbsp;the&nbsp;big&nbsp;old&nbsp;patch.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1941">1941</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;pointer.remove();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1942">1942</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;start1&nbsp;=&nbsp;bigpatch.start1;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1943">1943</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;start2&nbsp;=&nbsp;bigpatch.start2;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1944">1944</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;precontext&nbsp;=&nbsp;"";</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1945">1945</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(!bigpatch.diffs.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1946">1946</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Create&nbsp;one&nbsp;of&nbsp;several&nbsp;smaller&nbsp;patches.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1947">1947</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch&nbsp;=&nbsp;Patch();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1948">1948</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;empty&nbsp;=&nbsp;true;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1949">1949</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.start1&nbsp;=&nbsp;start1&nbsp;-&nbsp;precontext.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1950">1950</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.start2&nbsp;=&nbsp;start2&nbsp;-&nbsp;precontext.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1951">1951</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!precontext.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1952">1952</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.length1&nbsp;=&nbsp;patch.length2&nbsp;=&nbsp;precontext.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1953">1953</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.diffs.append(Diff(EQUAL,&nbsp;precontext));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1954">1954</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1955">1955</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(!bigpatch.diffs.isEmpty()</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1956">1956</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;&nbsp;patch.length1&nbsp;&lt;&nbsp;patch_size&nbsp;-&nbsp;Patch_Margin)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1957">1957</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;diff_type&nbsp;=&nbsp;bigpatch.diffs.front().operation;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1958">1958</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;diff_text&nbsp;=&nbsp;bigpatch.diffs.front().text;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1959">1959</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(diff_type&nbsp;==&nbsp;INSERT)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1960">1960</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Insertions&nbsp;are&nbsp;harmless.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1961">1961</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.length2&nbsp;+=&nbsp;diff_text.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1962">1962</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start2&nbsp;+=&nbsp;diff_text.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1963">1963</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.diffs.append(bigpatch.diffs.front());</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1964">1964</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bigpatch.diffs.removeFirst();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1965">1965</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;empty&nbsp;=&nbsp;false;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1966">1966</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(diff_type&nbsp;==&nbsp;DELETE&nbsp;&amp;&amp;&nbsp;patch.diffs.size()&nbsp;==&nbsp;1</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1967">1967</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;&nbsp;patch.diffs.front().operation&nbsp;==&nbsp;EQUAL</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1968">1968</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;&nbsp;diff_text.length()&nbsp;&gt;&nbsp;2&nbsp;*&nbsp;patch_size)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1969">1969</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;This&nbsp;is&nbsp;a&nbsp;large&nbsp;deletion.&nbsp;&nbsp;Let&nbsp;it&nbsp;pass&nbsp;in&nbsp;one&nbsp;chunk.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1970">1970</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.length1&nbsp;+=&nbsp;diff_text.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1971">1971</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start1&nbsp;+=&nbsp;diff_text.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1972">1972</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;empty&nbsp;=&nbsp;false;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1973">1973</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.diffs.append(Diff(diff_type,&nbsp;diff_text));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1974">1974</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bigpatch.diffs.removeFirst();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1975">1975</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1976">1976</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Deletion&nbsp;or&nbsp;equality.&nbsp;&nbsp;Only&nbsp;take&nbsp;as&nbsp;much&nbsp;as&nbsp;we&nbsp;can&nbsp;stomach.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1977">1977</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;diff_text&nbsp;=&nbsp;diff_text.left(std::min(diff_text.length(),</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1978">1978</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch_size&nbsp;-&nbsp;patch.length1&nbsp;-&nbsp;Patch_Margin));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1979">1979</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.length1&nbsp;+=&nbsp;diff_text.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1980">1980</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start1&nbsp;+=&nbsp;diff_text.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1981">1981</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(diff_type&nbsp;==&nbsp;EQUAL)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1982">1982</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.length2&nbsp;+=&nbsp;diff_text.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1983">1983</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start2&nbsp;+=&nbsp;diff_text.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1984">1984</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1985">1985</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;empty&nbsp;=&nbsp;false;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1986">1986</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1987">1987</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.diffs.append(Diff(diff_type,&nbsp;diff_text));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1988">1988</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(diff_text&nbsp;==&nbsp;bigpatch.diffs.front().text)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1989">1989</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bigpatch.diffs.removeFirst();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1990">1990</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1991">1991</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bigpatch.diffs.front().text&nbsp;=&nbsp;safeMid(bigpatch.diffs.front().text,</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1992">1992</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;diff_text.length());</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1993">1993</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1994">1994</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1995">1995</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1996">1996</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Compute&nbsp;the&nbsp;head&nbsp;context&nbsp;for&nbsp;the&nbsp;next&nbsp;patch.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1997">1997</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;precontext&nbsp;=&nbsp;diff_text2(patch.diffs);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1998">1998</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;precontext&nbsp;=&nbsp;safeMid(precontext,&nbsp;precontext.length()&nbsp;-&nbsp;Patch_Margin);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_1999">1999</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Append&nbsp;the&nbsp;end&nbsp;context&nbsp;for&nbsp;this&nbsp;patch.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2000">2000</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(diff_text1(bigpatch.diffs).length()&nbsp;&gt;&nbsp;Patch_Margin)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2001">2001</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;postcontext&nbsp;=&nbsp;diff_text1(bigpatch.diffs).left(Patch_Margin);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2002">2002</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2003">2003</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;postcontext&nbsp;=&nbsp;diff_text1(bigpatch.diffs);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2004">2004</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2005">2005</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!postcontext.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2006">2006</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.length1&nbsp;+=&nbsp;postcontext.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2007">2007</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.length2&nbsp;+=&nbsp;postcontext.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2008">2008</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!patch.diffs.isEmpty()</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2009">2009</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;&nbsp;patch.diffs.back().operation&nbsp;==&nbsp;EQUAL)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2010">2010</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.diffs.back().text&nbsp;+=&nbsp;postcontext;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2011">2011</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2012">2012</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.diffs.append(Diff(EQUAL,&nbsp;postcontext));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2013">2013</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2014">2014</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2015">2015</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!empty)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2016">2016</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.insert(patch);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2017">2017</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2018">2018</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2019">2019</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;bigpatch&nbsp;=&nbsp;pointer.hasNext()&nbsp;?&nbsp;pointer.next()&nbsp;:&nbsp;Patch();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2020">2020</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2021">2021</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2022">2022</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2023">2023</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2024">2024</td><td wrap="wrap" class="diff_line">QString&nbsp;diff_match_patch::patch_toText(const&nbsp;QList&lt;Patch&gt;&nbsp;&amp;patches)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2025">2025</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2026">2026</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;foreach(Patch&nbsp;aPatch,&nbsp;patches)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2027">2027</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;text.append(aPatch.toString());</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2028">2028</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2029">2029</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2030">2030</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2031">2031</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2032">2032</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2033">2033</td><td wrap="wrap" class="diff_line">QList&lt;Patch&gt;&nbsp;diff_match_patch::patch_fromText(const&nbsp;QString&nbsp;&amp;textline)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2034">2034</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QList&lt;Patch&gt;&nbsp;patches;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2035">2035</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(textline.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2036">2036</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;patches;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2037">2037</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2038">2038</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QStringList&nbsp;text&nbsp;=&nbsp;textline.split("\n",&nbsp;QString::SkipEmptyParts);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2039">2039</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Patch&nbsp;patch;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2040">2040</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QRegExp&nbsp;patchHeader("^@@&nbsp;-(\\d+),?(\\d*)&nbsp;\\+(\\d+),?(\\d*)&nbsp;@@$");</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2041">2041</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;char&nbsp;sign;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2042">2042</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;line;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2043">2043</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;while&nbsp;(!text.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2044">2044</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!patchHeader.exactMatch(text.front()))&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2045">2045</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;QString("Invalid&nbsp;patch&nbsp;string:&nbsp;%1").arg(text.front());</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2046">2046</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2047">2047</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2048">2048</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;patch&nbsp;=&nbsp;Patch();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2049">2049</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;patch.start1&nbsp;=&nbsp;patchHeader.cap(1).toInt();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2050">2050</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(patchHeader.cap(2).isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2051">2051</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.start1--;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2052">2052</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.length1&nbsp;=&nbsp;1;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2053">2053</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(patchHeader.cap(2)&nbsp;==&nbsp;"0")&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2054">2054</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.length1&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2055">2055</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2056">2056</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.start1--;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2057">2057</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.length1&nbsp;=&nbsp;patchHeader.cap(2).toInt();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2058">2058</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2059">2059</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2060">2060</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;patch.start2&nbsp;=&nbsp;patchHeader.cap(3).toInt();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2061">2061</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(patchHeader.cap(4).isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2062">2062</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.start2--;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2063">2063</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.length2&nbsp;=&nbsp;1;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2064">2064</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(patchHeader.cap(4)&nbsp;==&nbsp;"0")&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2065">2065</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.length2&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2066">2066</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2067">2067</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.start2--;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2068">2068</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.length2&nbsp;=&nbsp;patchHeader.cap(4).toInt();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2069">2069</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2070">2070</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;text.removeFirst();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2071">2071</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2072">2072</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(!text.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2073">2073</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(text.front().isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2074">2074</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text.removeFirst();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2075">2075</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2076">2076</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2077">2077</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sign&nbsp;=&nbsp;text.front()[0].toAscii();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2078">2078</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;line&nbsp;=&nbsp;safeMid(text.front(),&nbsp;1);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2079">2079</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;line&nbsp;=&nbsp;line.replace("+",&nbsp;"%2B");&nbsp;&nbsp;//&nbsp;decode&nbsp;would&nbsp;change&nbsp;all&nbsp;"+"&nbsp;to&nbsp;"&nbsp;"</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2080">2080</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;line&nbsp;=&nbsp;QUrl::fromPercentEncoding(qPrintable(line));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2081">2081</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(sign&nbsp;==&nbsp;'-')&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2082">2082</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Deletion.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2083">2083</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.diffs.append(Diff(DELETE,&nbsp;line));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2084">2084</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(sign&nbsp;==&nbsp;'+')&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2085">2085</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Insertion.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2086">2086</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.diffs.append(Diff(INSERT,&nbsp;line));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2087">2087</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(sign&nbsp;==&nbsp;'&nbsp;')&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2088">2088</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Minor&nbsp;equality.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2089">2089</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.diffs.append(Diff(EQUAL,&nbsp;line));</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2090">2090</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(sign&nbsp;==&nbsp;'@')&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2091">2091</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Start&nbsp;of&nbsp;next&nbsp;patch.</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2092">2092</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2093">2093</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2094">2094</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;WTF?</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2095">2095</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;QString("Invalid&nbsp;patch&nbsp;mode&nbsp;'%1'&nbsp;in:&nbsp;%2").arg(sign).arg(line);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2096">2096</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;QList&lt;Patch&gt;();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2097">2097</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2098">2098</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text.removeFirst();</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2099">2099</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2100">2100</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2101">2101</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;patches.append(patch);</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2102">2102</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2103">2103</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2104">2104</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;patches;</td><tr><td class="diff_next"></td><td class="diff_num" id="from0_2105">2105</td><td wrap="wrap" class="diff_line">}</td>        
    </table></div><div class="height-container">
    <table class="diff" id="difflib_chg_to0__top"
           cellspacing="0" cellpadding="0" rules="groups" >

    

        <tr><th colspan="3" class="diff_header"><img src="../img/V2.png" class="folder">version2.cpp</th></tr>
        
<tr><td class="diff_next" id="difflib_chg_to0__0"><a href="#difflib_chg_to0__0">▼</a></td><td class="diff_num" id="to0_1">1</td><td wrap="wrap" class="diff_line">/*</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2">2</td><td wrap="wrap" class="diff_line">&nbsp;*&nbsp;Diff&nbsp;Match&nbsp;and&nbsp;Patch</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_3">3</td><td wrap="wrap" class="diff_line">&nbsp;*&nbsp;Copyright&nbsp;2018&nbsp;The&nbsp;diff-match-patch&nbsp;Authors.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_4">4</td><td wrap="wrap" class="diff_line">&nbsp;*&nbsp;https://github.com/google/diff-match-patch</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_5">5</td><td wrap="wrap" class="diff_line">&nbsp;*</td><tr><td class="diff_next"><a href="#difflib_chg_to0__1">▼</a></td><td class="diff_num" id="to0_6">6</td><td wrap="wrap" class="diff_line">&nbsp;*&nbsp;Licensed&nbsp;under&nbsp;the&nbsp;Apache&nbsp;Licen<span class="diff_chg">se</span>,&nbsp;Version&nbsp;2.0&nbsp;(the&nbsp;"License");</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_7">7</td><td wrap="wrap" class="diff_line">&nbsp;*&nbsp;you&nbsp;may&nbsp;not&nbsp;use&nbsp;this&nbsp;file&nbsp;except&nbsp;in&nbsp;compliance&nbsp;with&nbsp;the&nbsp;License.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_8">8</td><td wrap="wrap" class="diff_line">&nbsp;*&nbsp;You&nbsp;may&nbsp;obtain&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;License&nbsp;at</td><tr><td class="diff_next" id="difflib_chg_to0__1"></td><td class="diff_num" id="to0_9">9</td><td wrap="wrap" class="diff_line">&nbsp;*</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_10">10</td><td wrap="wrap" class="diff_line">&nbsp;*&nbsp;&nbsp;&nbsp;http://www.apache.org/licenses/LICENSE-2.0</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_11">11</td><td wrap="wrap" class="diff_line">&nbsp;*</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_12">12</td><td wrap="wrap" class="diff_line">&nbsp;*&nbsp;Unless&nbsp;required&nbsp;by&nbsp;applicable&nbsp;law&nbsp;or&nbsp;agreed&nbsp;to&nbsp;in&nbsp;writing,&nbsp;software</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_13">13</td><td wrap="wrap" class="diff_line">&nbsp;*&nbsp;distributed&nbsp;under&nbsp;the&nbsp;License&nbsp;is&nbsp;distributed&nbsp;on&nbsp;an&nbsp;"AS&nbsp;IS"&nbsp;BASIS,</td><tr><td class="diff_next"><a href="#difflib_chg_to0__2">▼</a></td><td class="diff_num" id="to0_14">14</td><td wrap="wrap" class="diff_line"><span class="diff_add">&nbsp;*&nbsp;WITHOUT&nbsp;WARRANTIES&nbsp;OR&nbsp;CONDITIONS&nbsp;OF&nbsp;ANY&nbsp;KIND,&nbsp;either&nbsp;express&nbsp;or&nbsp;implied.</span></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_15">15</td><td wrap="wrap" class="diff_line">&nbsp;*&nbsp;See&nbsp;the&nbsp;License&nbsp;for&nbsp;the&nbsp;specific&nbsp;language&nbsp;governing&nbsp;permissions&nbsp;and</td><tr><td class="diff_next" id="difflib_chg_to0__2"></td><td class="diff_num" id="to0_16">16</td><td wrap="wrap" class="diff_line">&nbsp;*&nbsp;limitations&nbsp;under&nbsp;the&nbsp;License.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_17">17</td><td wrap="wrap" class="diff_line">&nbsp;*/</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_18">18</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_19">19</td><td wrap="wrap" class="diff_line">#include&nbsp;&lt;algorithm&gt;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_20">20</td><td wrap="wrap" class="diff_line">#include&nbsp;&lt;limits&gt;</td><tr><td class="diff_next"><a href="#difflib_chg_to0__3">▼</a></td><td class="diff_num" id="to0_21">21</td><td wrap="wrap" class="diff_line">//&nbsp;Code&nbsp;known&nbsp;to&nbsp;compile&nbsp;and&nbsp;run&nbsp;with&nbsp;Qt&nbsp;4.3&nbsp;through&nbsp;Qt&nbsp;4.7.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_22">22</td><td wrap="wrap" class="diff_line">#include&nbsp;&lt;QtCore&gt;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_23">23</td><td wrap="wrap" class="diff_line">#include&nbsp;&lt;time.h&gt;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_24">24</td><td wrap="wrap" class="diff_line">#include&nbsp;"diff_match_patch.h"</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_25">25</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_26">26</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_27">27</td><td wrap="wrap" class="diff_line">//////////////////////////</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_28">28</td><td wrap="wrap" class="diff_line">//</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_29">29</td><td wrap="wrap" class="diff_line">//&nbsp;Diff&nbsp;Class</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_30">30</td><td wrap="wrap" class="diff_line">//</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_31">31</td><td wrap="wrap" class="diff_line">//////////////////////////</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_32">32</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_33">33</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_34">34</td><td wrap="wrap" class="diff_line">/**</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_35">35</td><td wrap="wrap" class="diff_line">&nbsp;*&nbsp;Constructor.&nbsp;&nbsp;Initializes&nbsp;the&nbsp;diff&nbsp;with&nbsp;the&nbsp;provided&nbsp;values.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_36">36</td><td wrap="wrap" class="diff_line">&nbsp;*&nbsp;@param&nbsp;operation&nbsp;One&nbsp;of&nbsp;INSERT,&nbsp;DELETE&nbsp;or&nbsp;EQUAL</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_37">37</td><td wrap="wrap" class="diff_line">&nbsp;*&nbsp;@param&nbsp;text&nbsp;The&nbsp;text&nbsp;being&nbsp;applied</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_38">38</td><td wrap="wrap" class="diff_line">&nbsp;*/</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_39">39</td><td wrap="wrap" class="diff_line">Diff::Diff(Operation&nbsp;_operation,&nbsp;const&nbsp;QString&nbsp;&amp;_text)&nbsp;:</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_40">40</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;operation(_operation),&nbsp;text(_text)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_41">41</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Construct&nbsp;a&nbsp;diff&nbsp;with&nbsp;the&nbsp;specified&nbsp;operation&nbsp;and&nbsp;text.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_42">42</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_43">43</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_44">44</td><td wrap="wrap" class="diff_line">Diff::Diff()&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_45">45</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_46">46</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_47">47</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_48">48</td><td wrap="wrap" class="diff_line">QString&nbsp;Diff::strOperation(Operation&nbsp;op)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_49">49</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;switch&nbsp;(op)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_50">50</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;INSERT:</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_51">51</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;"INSERT";</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_52">52</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;DELETE:</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_53">53</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;"DELETE";</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_54">54</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;EQUAL:</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_55">55</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;"EQUAL";</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_56">56</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_57">57</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;throw&nbsp;"Invalid&nbsp;operation.";</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_58">58</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_59">59</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_60">60</td><td wrap="wrap" class="diff_line">/**</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_61">61</td><td wrap="wrap" class="diff_line">&nbsp;*&nbsp;Display&nbsp;a&nbsp;human-readable&nbsp;version&nbsp;of&nbsp;this&nbsp;Diff.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_62">62</td><td wrap="wrap" class="diff_line">&nbsp;*&nbsp;@return&nbsp;text&nbsp;version</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_63">63</td><td wrap="wrap" class="diff_line">&nbsp;*/</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_64">64</td><td wrap="wrap" class="diff_line">QString&nbsp;Diff::toString()&nbsp;const&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_65">65</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;prettyText&nbsp;=&nbsp;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_66">66</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Replace&nbsp;linebreaks&nbsp;with&nbsp;Pilcrow&nbsp;signs.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_67">67</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;prettyText.replace('\n',&nbsp;L'\u00b6');</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_68">68</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;QString("Diff(")&nbsp;+&nbsp;strOperation(operation)&nbsp;+&nbsp;QString(",\"")</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_69">69</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;prettyText&nbsp;+&nbsp;QString("\")");</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_70">70</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_71">71</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_72">72</td><td wrap="wrap" class="diff_line">/**</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_73">73</td><td wrap="wrap" class="diff_line">&nbsp;*&nbsp;Is&nbsp;this&nbsp;Diff&nbsp;equivalent&nbsp;to&nbsp;another&nbsp;Diff?</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_74">74</td><td wrap="wrap" class="diff_line">&nbsp;*&nbsp;@param&nbsp;d&nbsp;Another&nbsp;Diff&nbsp;to&nbsp;compare&nbsp;against</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_75">75</td><td wrap="wrap" class="diff_line">&nbsp;*&nbsp;@return&nbsp;true&nbsp;or&nbsp;false</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_76">76</td><td wrap="wrap" class="diff_line">&nbsp;*/</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_77">77</td><td wrap="wrap" class="diff_line">bool&nbsp;Diff::operator==(const&nbsp;Diff&nbsp;&amp;d)&nbsp;const&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_78">78</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;(d.operation&nbsp;==&nbsp;this-&gt;operation)&nbsp;&amp;&amp;&nbsp;(d.text&nbsp;==&nbsp;this-&gt;text);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_79">79</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_80">80</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_81">81</td><td wrap="wrap" class="diff_line">bool&nbsp;Diff::operator!=(const&nbsp;Diff&nbsp;&amp;d)&nbsp;const&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_82">82</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;!(operator&nbsp;==&nbsp;(d));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_83">83</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_84">84</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_85">85</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_86">86</td><td wrap="wrap" class="diff_line">/////////////////////////////////////////////</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_87">87</td><td wrap="wrap" class="diff_line">//</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_88">88</td><td wrap="wrap" class="diff_line">//&nbsp;Patch&nbsp;Class</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_89">89</td><td wrap="wrap" class="diff_line">//</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_90">90</td><td wrap="wrap" class="diff_line">/////////////////////////////////////////////</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_91">91</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_92">92</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_93">93</td><td wrap="wrap" class="diff_line">/**</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_94">94</td><td wrap="wrap" class="diff_line">&nbsp;*&nbsp;Constructor.&nbsp;&nbsp;Initializes&nbsp;with&nbsp;an&nbsp;empty&nbsp;list&nbsp;of&nbsp;diffs.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_95">95</td><td wrap="wrap" class="diff_line">&nbsp;*/</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_96">96</td><td wrap="wrap" class="diff_line">Patch::Patch()&nbsp;:</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_97">97</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;start1(0),&nbsp;start2(0),</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_98">98</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;length1(0),&nbsp;length2(0)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_99">99</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_100">100</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_101">101</td><td wrap="wrap" class="diff_line">bool&nbsp;Patch::isNull()&nbsp;const&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_102">102</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(start1&nbsp;==&nbsp;0&nbsp;&amp;&amp;&nbsp;start2&nbsp;==&nbsp;0&nbsp;&amp;&amp;&nbsp;length1&nbsp;==&nbsp;0&nbsp;&amp;&amp;&nbsp;length2&nbsp;==&nbsp;0</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_103">103</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;&nbsp;diffs.size()&nbsp;==&nbsp;0)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_104">104</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_105">105</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_106">106</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;false;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_107">107</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_108">108</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_109">109</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_110">110</td><td wrap="wrap" class="diff_line">/**</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_111">111</td><td wrap="wrap" class="diff_line">&nbsp;*&nbsp;Emulate&nbsp;GNU&nbsp;diff's&nbsp;format.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_112">112</td><td wrap="wrap" class="diff_line">&nbsp;*&nbsp;Header:&nbsp;@@&nbsp;-382,8&nbsp;+481,9&nbsp;@@</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_113">113</td><td wrap="wrap" class="diff_line">&nbsp;*&nbsp;Indices&nbsp;are&nbsp;printed&nbsp;as&nbsp;1-based,&nbsp;not&nbsp;0-based.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_114">114</td><td wrap="wrap" class="diff_line">&nbsp;*&nbsp;@return&nbsp;The&nbsp;GNU&nbsp;diff&nbsp;string</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_115">115</td><td wrap="wrap" class="diff_line">&nbsp;*/</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_116">116</td><td wrap="wrap" class="diff_line">QString&nbsp;Patch::toString()&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_117">117</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;coords1,&nbsp;coords2;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_118">118</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(length1&nbsp;==&nbsp;0)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_119">119</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;coords1&nbsp;=&nbsp;QString::number(start1)&nbsp;+&nbsp;QString(",0");</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_120">120</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(length1&nbsp;==&nbsp;1)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_121">121</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;coords1&nbsp;=&nbsp;QString::number(start1&nbsp;+&nbsp;1);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_122">122</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_123">123</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;coords1&nbsp;=&nbsp;QString::number(start1&nbsp;+&nbsp;1)&nbsp;+&nbsp;QString(",")</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_124">124</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;QString::number(length1);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_125">125</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_126">126</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(length2&nbsp;==&nbsp;0)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_127">127</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;coords2&nbsp;=&nbsp;QString::number(start2)&nbsp;+&nbsp;QString(",0");</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_128">128</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(length2&nbsp;==&nbsp;1)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_129">129</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;coords2&nbsp;=&nbsp;QString::number(start2&nbsp;+&nbsp;1);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_130">130</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_131">131</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;coords2&nbsp;=&nbsp;QString::number(start2&nbsp;+&nbsp;1)&nbsp;+&nbsp;QString(",")</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_132">132</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;QString::number(length2);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_133">133</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_134">134</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_135">135</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;text&nbsp;=&nbsp;QString("@@&nbsp;-")&nbsp;+&nbsp;coords1&nbsp;+&nbsp;QString("&nbsp;+")&nbsp;+&nbsp;coords2</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_136">136</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;QString("&nbsp;@@\n");</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_137">137</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Escape&nbsp;the&nbsp;body&nbsp;of&nbsp;the&nbsp;patch&nbsp;with&nbsp;%xx&nbsp;notation.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_138">138</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;foreach&nbsp;(Diff&nbsp;aDiff,&nbsp;diffs)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_139">139</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;switch&nbsp;(aDiff.operation)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_140">140</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;INSERT:</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_141">141</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text&nbsp;+=&nbsp;QString('+');</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_142">142</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_143">143</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;DELETE:</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_144">144</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text&nbsp;+=&nbsp;QString('-');</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_145">145</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_146">146</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;EQUAL:</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_147">147</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text&nbsp;+=&nbsp;QString('&nbsp;');</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_148">148</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_149">149</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_150">150</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;text&nbsp;+=&nbsp;QString(QUrl::toPercentEncoding(aDiff.text,&nbsp;"&nbsp;!~*'();/?:@&amp;=+$,#"))</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_151">151</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;QString("\n");</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_152">152</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_153">153</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_154">154</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_155">155</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_156">156</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_157">157</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_158">158</td><td wrap="wrap" class="diff_line">/////////////////////////////////////////////</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_159">159</td><td wrap="wrap" class="diff_line">//</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_160">160</td><td wrap="wrap" class="diff_line">//&nbsp;diff_match_patch&nbsp;Class</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_161">161</td><td wrap="wrap" class="diff_line">//</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_162">162</td><td wrap="wrap" class="diff_line">/////////////////////////////////////////////</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_163">163</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_164">164</td><td wrap="wrap" class="diff_line">diff_match_patch::diff_match_patch()&nbsp;:</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_165">165</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Diff_Timeout(1.0f),</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_166">166</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Diff_EditCost(4),</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_167">167</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Match_Threshold(0.5f),</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_168">168</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Match_Distance(1000),</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_169">169</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Patch_DeleteThreshold(0.5f),</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_170">170</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Patch_Margin(4),</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_171">171</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Match_MaxBits(32)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_172">172</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_173">173</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_174">174</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_175">175</td><td wrap="wrap" class="diff_line">QList&lt;Diff&gt;&nbsp;diff_match_patch::diff_main(const&nbsp;QString&nbsp;&amp;text1,</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_176">176</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QString&nbsp;&amp;text2)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_177">177</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;diff_main(text1,&nbsp;text2,&nbsp;true);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_178">178</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_179">179</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_180">180</td><td wrap="wrap" class="diff_line">QList&lt;Diff&gt;&nbsp;diff_match_patch::diff_main(const&nbsp;QString&nbsp;&amp;text1,</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_181">181</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QString&nbsp;&amp;text2,&nbsp;bool&nbsp;checklines)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_182">182</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Set&nbsp;a&nbsp;deadline&nbsp;by&nbsp;which&nbsp;time&nbsp;the&nbsp;diff&nbsp;must&nbsp;be&nbsp;complete.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_183">183</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;clock_t&nbsp;deadline;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_184">184</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(Diff_Timeout&nbsp;&lt;=&nbsp;0)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_185">185</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;deadline&nbsp;=&nbsp;std::numeric_limits&lt;clock_t&gt;::max();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_186">186</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next" id="difflib_chg_to0__3"></td><td class="diff_num" id="to0_187">187</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;deadline&nbsp;=&nbsp;clock()&nbsp;+&nbsp;(clock_t)(Diff_Timeout&nbsp;*&nbsp;CLOCKS_PER_SEC);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_188">188</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_189">189</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;diff_main(text1,&nbsp;text2,&nbsp;checklines,&nbsp;deadline);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_190">190</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_191">191</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"><a href="#difflib_chg_to0__4">▼</a></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next" id="difflib_chg_to0__4"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_192">192</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"><a href="#difflib_chg_to0__5">▼</a></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num"></td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_193">193</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_194">194</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_195">195</td><td wrap="wrap" class="diff_line">QList&lt;Diff&gt;&nbsp;diff_match_patch::diff_compute(QString&nbsp;text1,&nbsp;QString&nbsp;text2,</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_196">196</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;checklines,&nbsp;clock_t&nbsp;deadline)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_197">197</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QList&lt;Diff&gt;&nbsp;diffs;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_198">198</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_199">199</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(text1.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_200">200</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Just&nbsp;add&nbsp;some&nbsp;text&nbsp;(speedup).</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_201">201</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;diffs.append(Diff(INSERT,&nbsp;text2));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_202">202</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;diffs;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_203">203</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_204">204</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_205">205</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(text2.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_206">206</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Just&nbsp;delete&nbsp;some&nbsp;text&nbsp;(speedup).</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_207">207</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;diffs.append(Diff(DELETE,&nbsp;text1));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_208">208</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;diffs;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_209">209</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_210">210</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_211">211</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_212">212</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QString&nbsp;longtext&nbsp;=&nbsp;text1.length()&nbsp;&gt;&nbsp;text2.length()&nbsp;?&nbsp;text1&nbsp;:&nbsp;text2;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_213">213</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QString&nbsp;shorttext&nbsp;=&nbsp;text1.length()&nbsp;&gt;&nbsp;text2.length()&nbsp;?&nbsp;text2&nbsp;:&nbsp;text1;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_214">214</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;int&nbsp;i&nbsp;=&nbsp;longtext.indexOf(shorttext);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_215">215</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(i&nbsp;!=&nbsp;-1)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_216">216</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Shorter&nbsp;text&nbsp;is&nbsp;inside&nbsp;the&nbsp;longer&nbsp;text&nbsp;(speedup).</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_217">217</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;Operation&nbsp;op&nbsp;=&nbsp;(text1.length()&nbsp;&gt;&nbsp;text2.length())&nbsp;?&nbsp;DELETE&nbsp;:&nbsp;INSERT;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_218">218</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;diffs.append(Diff(op,&nbsp;longtext.left(i)));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_219">219</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;diffs.append(Diff(EQUAL,&nbsp;shorttext));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_220">220</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;diffs.append(Diff(op,&nbsp;safeMid(longtext,&nbsp;i&nbsp;+&nbsp;shorttext.length())));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_221">221</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;diffs;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_222">222</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_223">223</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_224">224</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(shorttext.length()&nbsp;==&nbsp;1)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_225">225</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Single&nbsp;character&nbsp;string.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_226">226</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;After&nbsp;the&nbsp;previous&nbsp;speedup,&nbsp;the&nbsp;character&nbsp;can't&nbsp;be&nbsp;an&nbsp;equality.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_227">227</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;diffs.append(Diff(DELETE,&nbsp;text1));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_228">228</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;diffs.append(Diff(INSERT,&nbsp;text2));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_229">229</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;diffs;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_230">230</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_231">231</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Garbage&nbsp;collect&nbsp;longtext&nbsp;and&nbsp;shorttext&nbsp;by&nbsp;scoping&nbsp;out.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_232">232</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_233">233</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_234">234</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Check&nbsp;to&nbsp;see&nbsp;if&nbsp;the&nbsp;problem&nbsp;can&nbsp;be&nbsp;split&nbsp;in&nbsp;two.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_235">235</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;QStringList&nbsp;hm&nbsp;=&nbsp;diff_halfMatch(text1,&nbsp;text2);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_236">236</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(hm.count()&nbsp;&gt;&nbsp;0)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_237">237</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;A&nbsp;half-match&nbsp;was&nbsp;found,&nbsp;sort&nbsp;out&nbsp;the&nbsp;return&nbsp;data.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_238">238</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QString&nbsp;text1_a&nbsp;=&nbsp;hm[0];</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_239">239</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QString&nbsp;text1_b&nbsp;=&nbsp;hm[1];</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_240">240</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QString&nbsp;text2_a&nbsp;=&nbsp;hm[2];</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_241">241</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QString&nbsp;text2_b&nbsp;=&nbsp;hm[3];</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_242">242</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QString&nbsp;mid_common&nbsp;=&nbsp;hm[4];</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_243">243</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Send&nbsp;both&nbsp;pairs&nbsp;off&nbsp;for&nbsp;separate&nbsp;processing.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_244">244</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QList&lt;Diff&gt;&nbsp;diffs_a&nbsp;=&nbsp;diff_main(text1_a,&nbsp;text2_a,</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_245">245</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;checklines,&nbsp;deadline);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_246">246</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QList&lt;Diff&gt;&nbsp;diffs_b&nbsp;=&nbsp;diff_main(text1_b,&nbsp;text2_b,</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_247">247</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;checklines,&nbsp;deadline);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_248">248</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Merge&nbsp;the&nbsp;results.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_249">249</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;diffs&nbsp;=&nbsp;diffs_a;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_250">250</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;diffs.append(Diff(EQUAL,&nbsp;mid_common));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_251">251</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;diffs&nbsp;+=&nbsp;diffs_b;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_252">252</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;diffs;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_253">253</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_254">254</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_255">255</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Perform&nbsp;a&nbsp;real&nbsp;diff.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_256">256</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(checklines&nbsp;&amp;&amp;&nbsp;text1.length()&nbsp;&gt;&nbsp;100&nbsp;&amp;&amp;&nbsp;text2.length()&nbsp;&gt;&nbsp;100)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_257">257</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;diff_lineMode(text1,&nbsp;text2,&nbsp;deadline);</td><tr><td class="diff_next" id="difflib_chg_to0__5"></td><td class="diff_num" id="to0_258">258</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_259">259</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_260">260</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;diff_bisect(text1,&nbsp;text2,&nbsp;deadline);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_261">261</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_262">262</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"><a href="#difflib_chg_to0__top">▲</a></td><td class="diff_num" id="to0_263">263</td><td wrap="wrap" class="diff_line"><span class="diff_add">QList&lt;Diff&gt;&nbsp;diff_match_patch::diff_main(const&nbsp;QString&nbsp;&amp;text1,</span></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_264">264</td><td wrap="wrap" class="diff_line"><span class="diff_add">&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QString&nbsp;&amp;text2,&nbsp;bool&nbsp;checklines,&nbsp;clock_t&nbsp;deadline)&nbsp;{</span></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_265">265</td><td wrap="wrap" class="diff_line"><span class="diff_add">&nbsp;&nbsp;//&nbsp;Check&nbsp;for&nbsp;null&nbsp;inputs.</span></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_266">266</td><td wrap="wrap" class="diff_line"><span class="diff_add">&nbsp;&nbsp;if&nbsp;(text1.isNull()&nbsp;||&nbsp;text2.isNull())&nbsp;{</span></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_267">267</td><td wrap="wrap" class="diff_line"><span class="diff_add">&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;"Null&nbsp;inputs.&nbsp;(diff_main)";</span></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_268">268</td><td wrap="wrap" class="diff_line"><span class="diff_add">&nbsp;&nbsp;}</span></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_269">269</td><td wrap="wrap" class="diff_line"><span class="diff_add">&nbsp;</span></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_270">270</td><td wrap="wrap" class="diff_line"><span class="diff_add">&nbsp;&nbsp;//&nbsp;Check&nbsp;for&nbsp;equality&nbsp;(speedup).</span></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_271">271</td><td wrap="wrap" class="diff_line"><span class="diff_add">&nbsp;&nbsp;QList&lt;Diff&gt;&nbsp;diffs;</span></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_272">272</td><td wrap="wrap" class="diff_line"><span class="diff_add">&nbsp;&nbsp;if&nbsp;(text1&nbsp;==&nbsp;text2)&nbsp;{</span></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_273">273</td><td wrap="wrap" class="diff_line"><span class="diff_add">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!text1.isEmpty())&nbsp;{</span></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_274">274</td><td wrap="wrap" class="diff_line"><span class="diff_add">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;diffs.append(Diff(EQUAL,&nbsp;text1));</span></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_275">275</td><td wrap="wrap" class="diff_line"><span class="diff_add">&nbsp;&nbsp;&nbsp;&nbsp;}</span></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_276">276</td><td wrap="wrap" class="diff_line"><span class="diff_add">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;diffs;</span></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_277">277</td><td wrap="wrap" class="diff_line"><span class="diff_add">&nbsp;&nbsp;}</span></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_278">278</td><td wrap="wrap" class="diff_line"><span class="diff_add">&nbsp;</span></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_279">279</td><td wrap="wrap" class="diff_line"><span class="diff_add">&nbsp;&nbsp;//&nbsp;Trim&nbsp;off&nbsp;common&nbsp;prefix&nbsp;(speedup).</span></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_280">280</td><td wrap="wrap" class="diff_line"><span class="diff_add">&nbsp;&nbsp;int&nbsp;commonlength&nbsp;=&nbsp;diff_commonPrefix(text1,&nbsp;text2);</span></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_281">281</td><td wrap="wrap" class="diff_line"><span class="diff_add">&nbsp;&nbsp;const&nbsp;QString&nbsp;&amp;commonprefix&nbsp;=&nbsp;text1.left(commonlength);</span></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_282">282</td><td wrap="wrap" class="diff_line"><span class="diff_add">&nbsp;&nbsp;QString&nbsp;textChopped1&nbsp;=&nbsp;text1.mid(commonlength);</span></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_283">283</td><td wrap="wrap" class="diff_line"><span class="diff_add">&nbsp;&nbsp;QString&nbsp;textChopped2&nbsp;=&nbsp;text2.mid(commonlength);</span></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_284">284</td><td wrap="wrap" class="diff_line"><span class="diff_add">&nbsp;</span></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_285">285</td><td wrap="wrap" class="diff_line"><span class="diff_add">&nbsp;&nbsp;//&nbsp;Trim&nbsp;off&nbsp;common&nbsp;suffix&nbsp;(speedup).</span></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_286">286</td><td wrap="wrap" class="diff_line"><span class="diff_add">&nbsp;&nbsp;commonlength&nbsp;=&nbsp;diff_commonSuffix(textChopped1,&nbsp;textChopped2);</span></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_287">287</td><td wrap="wrap" class="diff_line"><span class="diff_add">&nbsp;&nbsp;const&nbsp;QString&nbsp;&amp;commonsuffix&nbsp;=&nbsp;textChopped1.right(commonlength);</span></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_288">288</td><td wrap="wrap" class="diff_line"><span class="diff_add">&nbsp;&nbsp;textChopped1&nbsp;=&nbsp;textChopped1.left(textChopped1.length()&nbsp;-&nbsp;commonlength);</span></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_289">289</td><td wrap="wrap" class="diff_line"><span class="diff_add">&nbsp;&nbsp;textChopped2&nbsp;=&nbsp;textChopped2.left(textChopped2.length()&nbsp;-&nbsp;commonlength);</span></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_290">290</td><td wrap="wrap" class="diff_line"><span class="diff_add">&nbsp;</span></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_291">291</td><td wrap="wrap" class="diff_line"><span class="diff_add">&nbsp;&nbsp;//&nbsp;Compute&nbsp;the&nbsp;diff&nbsp;on&nbsp;the&nbsp;middle&nbsp;block.</span></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_292">292</td><td wrap="wrap" class="diff_line"><span class="diff_add">&nbsp;&nbsp;diffs&nbsp;=&nbsp;diff_compute(textChopped1,&nbsp;textChopped2,&nbsp;checklines,&nbsp;deadline);</span></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_293">293</td><td wrap="wrap" class="diff_line"><span class="diff_add">&nbsp;</span></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_294">294</td><td wrap="wrap" class="diff_line"><span class="diff_add">&nbsp;&nbsp;//&nbsp;Restore&nbsp;the&nbsp;prefix&nbsp;and&nbsp;suffix.</span></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_295">295</td><td wrap="wrap" class="diff_line"><span class="diff_add">&nbsp;&nbsp;if&nbsp;(!commonprefix.isEmpty())&nbsp;{</span></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_296">296</td><td wrap="wrap" class="diff_line"><span class="diff_add">&nbsp;&nbsp;&nbsp;&nbsp;diffs.prepend(Diff(EQUAL,&nbsp;commonprefix));</span></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_297">297</td><td wrap="wrap" class="diff_line"><span class="diff_add">&nbsp;&nbsp;}</span></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_298">298</td><td wrap="wrap" class="diff_line"><span class="diff_add">&nbsp;&nbsp;if&nbsp;(!commonsuffix.isEmpty())&nbsp;{</span></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_299">299</td><td wrap="wrap" class="diff_line"><span class="diff_add">&nbsp;&nbsp;&nbsp;&nbsp;diffs.append(Diff(EQUAL,&nbsp;commonsuffix));</span></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_300">300</td><td wrap="wrap" class="diff_line"><span class="diff_add">&nbsp;&nbsp;}</span></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_301">301</td><td wrap="wrap" class="diff_line"><span class="diff_add">&nbsp;</span></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_302">302</td><td wrap="wrap" class="diff_line"><span class="diff_add">&nbsp;&nbsp;diff_cleanupMerge(diffs);</span></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_303">303</td><td wrap="wrap" class="diff_line"><span class="diff_add">&nbsp;</span></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_304">304</td><td wrap="wrap" class="diff_line"><span class="diff_add">&nbsp;&nbsp;return&nbsp;diffs;</span></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_305">305</td><td wrap="wrap" class="diff_line"><span class="diff_add">}</span></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_306">306</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_307">307</td><td wrap="wrap" class="diff_line">QList&lt;Diff&gt;&nbsp;diff_match_patch::diff_lineMode(QString&nbsp;text1,&nbsp;QString&nbsp;text2,</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_308">308</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;clock_t&nbsp;deadline)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_309">309</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Scan&nbsp;the&nbsp;text&nbsp;on&nbsp;a&nbsp;line-by-line&nbsp;basis&nbsp;first.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_310">310</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;QList&lt;QVariant&gt;&nbsp;b&nbsp;=&nbsp;diff_linesToChars(text1,&nbsp;text2);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_311">311</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;text1&nbsp;=&nbsp;b[0].toString();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_312">312</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;text2&nbsp;=&nbsp;b[1].toString();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_313">313</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QStringList&nbsp;linearray&nbsp;=&nbsp;b[2].toStringList();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_314">314</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_315">315</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QList&lt;Diff&gt;&nbsp;diffs&nbsp;=&nbsp;diff_main(text1,&nbsp;text2,&nbsp;false,&nbsp;deadline);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_316">316</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_317">317</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Convert&nbsp;the&nbsp;diff&nbsp;back&nbsp;to&nbsp;original&nbsp;text.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_318">318</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;diff_charsToLines(diffs,&nbsp;linearray);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_319">319</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Eliminate&nbsp;freak&nbsp;matches&nbsp;(e.g.&nbsp;blank&nbsp;lines)</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_320">320</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;diff_cleanupSemantic(diffs);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_321">321</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_322">322</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Rediff&nbsp;any&nbsp;replacement&nbsp;blocks,&nbsp;this&nbsp;time&nbsp;character-by-character.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_323">323</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Add&nbsp;a&nbsp;dummy&nbsp;entry&nbsp;at&nbsp;the&nbsp;end.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_324">324</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;diffs.append(Diff(EQUAL,&nbsp;""));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_325">325</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;count_delete&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_326">326</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;count_insert&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_327">327</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;text_delete&nbsp;=&nbsp;"";</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_328">328</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;text_insert&nbsp;=&nbsp;"";</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_329">329</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_330">330</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QMutableListIterator&lt;Diff&gt;&nbsp;pointer(diffs);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_331">331</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Diff&nbsp;*thisDiff&nbsp;=&nbsp;pointer.hasNext()&nbsp;?&nbsp;&amp;pointer.next()&nbsp;:&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_332">332</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;while&nbsp;(thisDiff&nbsp;!=&nbsp;NULL)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_333">333</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;switch&nbsp;(thisDiff-&gt;operation)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_334">334</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;INSERT:</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_335">335</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;count_insert++;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_336">336</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text_insert&nbsp;+=&nbsp;thisDiff-&gt;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_337">337</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_338">338</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;DELETE:</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_339">339</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;count_delete++;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_340">340</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text_delete&nbsp;+=&nbsp;thisDiff-&gt;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_341">341</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_342">342</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;EQUAL:</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_343">343</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Upon&nbsp;reaching&nbsp;an&nbsp;equality,&nbsp;check&nbsp;for&nbsp;prior&nbsp;redundancies.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_344">344</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(count_delete&nbsp;&gt;=&nbsp;1&nbsp;&amp;&amp;&nbsp;count_insert&nbsp;&gt;=&nbsp;1)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_345">345</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Delete&nbsp;the&nbsp;offending&nbsp;records&nbsp;and&nbsp;add&nbsp;the&nbsp;merged&nbsp;ones.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_346">346</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.previous();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_347">347</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(int&nbsp;j&nbsp;=&nbsp;0;&nbsp;j&nbsp;&lt;&nbsp;count_delete&nbsp;+&nbsp;count_insert;&nbsp;j++)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_348">348</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.previous();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_349">349</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.remove();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_350">350</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_351">351</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach(Diff&nbsp;newDiff,</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_352">352</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;diff_main(text_delete,&nbsp;text_insert,&nbsp;false,&nbsp;deadline))&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_353">353</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.insert(newDiff);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_354">354</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_355">355</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_356">356</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;count_insert&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_357">357</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;count_delete&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_358">358</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text_delete&nbsp;=&nbsp;"";</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_359">359</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text_insert&nbsp;=&nbsp;"";</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_360">360</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_361">361</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_362">362</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;thisDiff&nbsp;=&nbsp;pointer.hasNext()&nbsp;?&nbsp;&amp;pointer.next()&nbsp;:&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_363">363</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_364">364</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;diffs.removeLast();&nbsp;&nbsp;//&nbsp;Remove&nbsp;the&nbsp;dummy&nbsp;entry&nbsp;at&nbsp;the&nbsp;end.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_365">365</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_366">366</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;diffs;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_367">367</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_368">368</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_369">369</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_370">370</td><td wrap="wrap" class="diff_line">QList&lt;Diff&gt;&nbsp;diff_match_patch::diff_bisect(const&nbsp;QString&nbsp;&amp;text1,</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_371">371</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QString&nbsp;&amp;text2,&nbsp;clock_t&nbsp;deadline)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_372">372</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Cache&nbsp;the&nbsp;text&nbsp;lengths&nbsp;to&nbsp;prevent&nbsp;multiple&nbsp;calls.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_373">373</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;int&nbsp;text1_length&nbsp;=&nbsp;text1.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_374">374</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;int&nbsp;text2_length&nbsp;=&nbsp;text2.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_375">375</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;int&nbsp;max_d&nbsp;=&nbsp;(text1_length&nbsp;+&nbsp;text2_length&nbsp;+&nbsp;1)&nbsp;/&nbsp;2;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_376">376</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;int&nbsp;v_offset&nbsp;=&nbsp;max_d;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_377">377</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;int&nbsp;v_length&nbsp;=&nbsp;2&nbsp;*&nbsp;max_d;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_378">378</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;*v1&nbsp;=&nbsp;new&nbsp;int[v_length];</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_379">379</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;*v2&nbsp;=&nbsp;new&nbsp;int[v_length];</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_380">380</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;for&nbsp;(int&nbsp;x&nbsp;=&nbsp;0;&nbsp;x&nbsp;&lt;&nbsp;v_length;&nbsp;x++)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_381">381</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;v1[x]&nbsp;=&nbsp;-1;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_382">382</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;v2[x]&nbsp;=&nbsp;-1;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_383">383</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_384">384</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;v1[v_offset&nbsp;+&nbsp;1]&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_385">385</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;v2[v_offset&nbsp;+&nbsp;1]&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_386">386</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;int&nbsp;delta&nbsp;=&nbsp;text1_length&nbsp;-&nbsp;text2_length;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_387">387</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;If&nbsp;the&nbsp;total&nbsp;number&nbsp;of&nbsp;characters&nbsp;is&nbsp;odd,&nbsp;then&nbsp;the&nbsp;front&nbsp;path&nbsp;will</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_388">388</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;collide&nbsp;with&nbsp;the&nbsp;reverse&nbsp;path.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_389">389</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;bool&nbsp;front&nbsp;=&nbsp;(delta&nbsp;%&nbsp;2&nbsp;!=&nbsp;0);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_390">390</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Offsets&nbsp;for&nbsp;start&nbsp;and&nbsp;end&nbsp;of&nbsp;k&nbsp;loop.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_391">391</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Prevents&nbsp;mapping&nbsp;of&nbsp;space&nbsp;beyond&nbsp;the&nbsp;grid.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_392">392</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;k1start&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_393">393</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;k1end&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_394">394</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;k2start&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_395">395</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;k2end&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_396">396</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;for&nbsp;(int&nbsp;d&nbsp;=&nbsp;0;&nbsp;d&nbsp;&lt;&nbsp;max_d;&nbsp;d++)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_397">397</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Bail&nbsp;out&nbsp;if&nbsp;deadline&nbsp;is&nbsp;reached.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_398">398</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(clock()&nbsp;&gt;&nbsp;deadline)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_399">399</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_400">400</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_401">401</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_402">402</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Walk&nbsp;the&nbsp;front&nbsp;path&nbsp;one&nbsp;step.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_403">403</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(int&nbsp;k1&nbsp;=&nbsp;-d&nbsp;+&nbsp;k1start;&nbsp;k1&nbsp;&lt;=&nbsp;d&nbsp;-&nbsp;k1end;&nbsp;k1&nbsp;+=&nbsp;2)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_404">404</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;int&nbsp;k1_offset&nbsp;=&nbsp;v_offset&nbsp;+&nbsp;k1;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_405">405</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;x1;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_406">406</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(k1&nbsp;==&nbsp;-d&nbsp;||&nbsp;(k1&nbsp;!=&nbsp;d&nbsp;&amp;&amp;&nbsp;v1[k1_offset&nbsp;-&nbsp;1]&nbsp;&lt;&nbsp;v1[k1_offset&nbsp;+&nbsp;1]))&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_407">407</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x1&nbsp;=&nbsp;v1[k1_offset&nbsp;+&nbsp;1];</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_408">408</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_409">409</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x1&nbsp;=&nbsp;v1[k1_offset&nbsp;-&nbsp;1]&nbsp;+&nbsp;1;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_410">410</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_411">411</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;y1&nbsp;=&nbsp;x1&nbsp;-&nbsp;k1;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_412">412</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(x1&nbsp;&lt;&nbsp;text1_length&nbsp;&amp;&amp;&nbsp;y1&nbsp;&lt;&nbsp;text2_length</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_413">413</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;&nbsp;text1[x1]&nbsp;==&nbsp;text2[y1])&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_414">414</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x1++;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_415">415</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y1++;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_416">416</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_417">417</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v1[k1_offset]&nbsp;=&nbsp;x1;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_418">418</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(x1&nbsp;&gt;&nbsp;text1_length)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_419">419</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Ran&nbsp;off&nbsp;the&nbsp;right&nbsp;of&nbsp;the&nbsp;graph.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_420">420</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;k1end&nbsp;+=&nbsp;2;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_421">421</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(y1&nbsp;&gt;&nbsp;text2_length)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_422">422</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Ran&nbsp;off&nbsp;the&nbsp;bottom&nbsp;of&nbsp;the&nbsp;graph.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_423">423</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;k1start&nbsp;+=&nbsp;2;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_424">424</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(front)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_425">425</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;k2_offset&nbsp;=&nbsp;v_offset&nbsp;+&nbsp;delta&nbsp;-&nbsp;k1;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_426">426</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(k2_offset&nbsp;&gt;=&nbsp;0&nbsp;&amp;&amp;&nbsp;k2_offset&nbsp;&lt;&nbsp;v_length&nbsp;&amp;&amp;&nbsp;v2[k2_offset]&nbsp;!=&nbsp;-1)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_427">427</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Mirror&nbsp;x2&nbsp;onto&nbsp;top-left&nbsp;coordinate&nbsp;system.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_428">428</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;x2&nbsp;=&nbsp;text1_length&nbsp;-&nbsp;v2[k2_offset];</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_429">429</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(x1&nbsp;&gt;=&nbsp;x2)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_430">430</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Overlap&nbsp;detected.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_431">431</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete&nbsp;[]&nbsp;v1;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_432">432</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete&nbsp;[]&nbsp;v2;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_433">433</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;diff_bisectSplit(text1,&nbsp;text2,&nbsp;x1,&nbsp;y1,&nbsp;deadline);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_434">434</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_435">435</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_436">436</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_437">437</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_438">438</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_439">439</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Walk&nbsp;the&nbsp;reverse&nbsp;path&nbsp;one&nbsp;step.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_440">440</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(int&nbsp;k2&nbsp;=&nbsp;-d&nbsp;+&nbsp;k2start;&nbsp;k2&nbsp;&lt;=&nbsp;d&nbsp;-&nbsp;k2end;&nbsp;k2&nbsp;+=&nbsp;2)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_441">441</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;int&nbsp;k2_offset&nbsp;=&nbsp;v_offset&nbsp;+&nbsp;k2;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_442">442</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;x2;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_443">443</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(k2&nbsp;==&nbsp;-d&nbsp;||&nbsp;(k2&nbsp;!=&nbsp;d&nbsp;&amp;&amp;&nbsp;v2[k2_offset&nbsp;-&nbsp;1]&nbsp;&lt;&nbsp;v2[k2_offset&nbsp;+&nbsp;1]))&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_444">444</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x2&nbsp;=&nbsp;v2[k2_offset&nbsp;+&nbsp;1];</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_445">445</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_446">446</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x2&nbsp;=&nbsp;v2[k2_offset&nbsp;-&nbsp;1]&nbsp;+&nbsp;1;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_447">447</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_448">448</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;y2&nbsp;=&nbsp;x2&nbsp;-&nbsp;k2;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_449">449</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(x2&nbsp;&lt;&nbsp;text1_length&nbsp;&amp;&amp;&nbsp;y2&nbsp;&lt;&nbsp;text2_length</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_450">450</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;&nbsp;text1[text1_length&nbsp;-&nbsp;x2&nbsp;-&nbsp;1]&nbsp;==&nbsp;text2[text2_length&nbsp;-&nbsp;y2&nbsp;-&nbsp;1])&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_451">451</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x2++;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_452">452</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y2++;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_453">453</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_454">454</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v2[k2_offset]&nbsp;=&nbsp;x2;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_455">455</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(x2&nbsp;&gt;&nbsp;text1_length)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_456">456</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Ran&nbsp;off&nbsp;the&nbsp;left&nbsp;of&nbsp;the&nbsp;graph.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_457">457</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;k2end&nbsp;+=&nbsp;2;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_458">458</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(y2&nbsp;&gt;&nbsp;text2_length)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_459">459</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Ran&nbsp;off&nbsp;the&nbsp;top&nbsp;of&nbsp;the&nbsp;graph.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_460">460</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;k2start&nbsp;+=&nbsp;2;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_461">461</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(!front)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_462">462</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;k1_offset&nbsp;=&nbsp;v_offset&nbsp;+&nbsp;delta&nbsp;-&nbsp;k2;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_463">463</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(k1_offset&nbsp;&gt;=&nbsp;0&nbsp;&amp;&amp;&nbsp;k1_offset&nbsp;&lt;&nbsp;v_length&nbsp;&amp;&amp;&nbsp;v1[k1_offset]&nbsp;!=&nbsp;-1)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_464">464</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;x1&nbsp;=&nbsp;v1[k1_offset];</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_465">465</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;y1&nbsp;=&nbsp;v_offset&nbsp;+&nbsp;x1&nbsp;-&nbsp;k1_offset;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_466">466</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Mirror&nbsp;x2&nbsp;onto&nbsp;top-left&nbsp;coordinate&nbsp;system.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_467">467</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x2&nbsp;=&nbsp;text1_length&nbsp;-&nbsp;x2;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_468">468</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(x1&nbsp;&gt;=&nbsp;x2)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_469">469</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Overlap&nbsp;detected.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_470">470</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete&nbsp;[]&nbsp;v1;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_471">471</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete&nbsp;[]&nbsp;v2;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_472">472</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;diff_bisectSplit(text1,&nbsp;text2,&nbsp;x1,&nbsp;y1,&nbsp;deadline);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_473">473</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_474">474</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_475">475</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_476">476</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_477">477</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_478">478</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;delete&nbsp;[]&nbsp;v1;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_479">479</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;delete&nbsp;[]&nbsp;v2;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_480">480</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Diff&nbsp;took&nbsp;too&nbsp;long&nbsp;and&nbsp;hit&nbsp;the&nbsp;deadline&nbsp;or</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_481">481</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;number&nbsp;of&nbsp;diffs&nbsp;equals&nbsp;number&nbsp;of&nbsp;characters,&nbsp;no&nbsp;commonality&nbsp;at&nbsp;all.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_482">482</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QList&lt;Diff&gt;&nbsp;diffs;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_483">483</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;diffs.append(Diff(DELETE,&nbsp;text1));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_484">484</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;diffs.append(Diff(INSERT,&nbsp;text2));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_485">485</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;diffs;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_486">486</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_487">487</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_488">488</td><td wrap="wrap" class="diff_line">QList&lt;Diff&gt;&nbsp;diff_match_patch::diff_bisectSplit(const&nbsp;QString&nbsp;&amp;text1,</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_489">489</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QString&nbsp;&amp;text2,&nbsp;int&nbsp;x,&nbsp;int&nbsp;y,&nbsp;clock_t&nbsp;deadline)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_490">490</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;text1a&nbsp;=&nbsp;text1.left(x);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_491">491</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;text2a&nbsp;=&nbsp;text2.left(y);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_492">492</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;text1b&nbsp;=&nbsp;safeMid(text1,&nbsp;x);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_493">493</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;text2b&nbsp;=&nbsp;safeMid(text2,&nbsp;y);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_494">494</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_495">495</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Compute&nbsp;both&nbsp;diffs&nbsp;serially.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_496">496</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QList&lt;Diff&gt;&nbsp;diffs&nbsp;=&nbsp;diff_main(text1a,&nbsp;text2a,&nbsp;false,&nbsp;deadline);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_497">497</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QList&lt;Diff&gt;&nbsp;diffsb&nbsp;=&nbsp;diff_main(text1b,&nbsp;text2b,&nbsp;false,&nbsp;deadline);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_498">498</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_499">499</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;diffs&nbsp;+&nbsp;diffsb;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_500">500</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_501">501</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_502">502</td><td wrap="wrap" class="diff_line">QList&lt;QVariant&gt;&nbsp;diff_match_patch::diff_linesToChars(const&nbsp;QString&nbsp;&amp;text1,</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_503">503</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QString&nbsp;&amp;text2)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_504">504</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QStringList&nbsp;lineArray;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_505">505</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QMap&lt;QString,&nbsp;int&gt;&nbsp;lineHash;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_506">506</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;e.g.&nbsp;linearray[4]&nbsp;==&nbsp;"Hello\n"</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_507">507</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;e.g.&nbsp;linehash.get("Hello\n")&nbsp;==&nbsp;4</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_508">508</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_509">509</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;"\x00"&nbsp;is&nbsp;a&nbsp;valid&nbsp;character,&nbsp;but&nbsp;various&nbsp;debuggers&nbsp;don't&nbsp;like&nbsp;it.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_510">510</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;So&nbsp;we'll&nbsp;insert&nbsp;a&nbsp;junk&nbsp;entry&nbsp;to&nbsp;avoid&nbsp;generating&nbsp;a&nbsp;null&nbsp;character.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_511">511</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;lineArray.append("");</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_512">512</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_513">513</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;QString&nbsp;chars1&nbsp;=&nbsp;diff_linesToCharsMunge(text1,&nbsp;lineArray,&nbsp;lineHash);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_514">514</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;QString&nbsp;chars2&nbsp;=&nbsp;diff_linesToCharsMunge(text2,&nbsp;lineArray,&nbsp;lineHash);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_515">515</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_516">516</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QList&lt;QVariant&gt;&nbsp;listRet;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_517">517</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;listRet.append(QVariant::fromValue(chars1));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_518">518</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;listRet.append(QVariant::fromValue(chars2));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_519">519</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;listRet.append(QVariant::fromValue(lineArray));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_520">520</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;listRet;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_521">521</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_522">522</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_523">523</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_524">524</td><td wrap="wrap" class="diff_line">QString&nbsp;diff_match_patch::diff_linesToCharsMunge(const&nbsp;QString&nbsp;&amp;text,</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_525">525</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;QStringList&nbsp;&amp;lineArray,</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_526">526</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;QMap&lt;QString,&nbsp;int&gt;&nbsp;&amp;lineHash)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_527">527</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;lineStart&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_528">528</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;lineEnd&nbsp;=&nbsp;-1;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_529">529</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;line;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_530">530</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;chars;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_531">531</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Walk&nbsp;the&nbsp;text,&nbsp;pulling&nbsp;out&nbsp;a&nbsp;substring&nbsp;for&nbsp;each&nbsp;line.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_532">532</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;text.split('\n')&nbsp;would&nbsp;would&nbsp;temporarily&nbsp;double&nbsp;our&nbsp;memory&nbsp;footprint.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_533">533</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Modifying&nbsp;text&nbsp;would&nbsp;create&nbsp;many&nbsp;large&nbsp;strings&nbsp;to&nbsp;garbage&nbsp;collect.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_534">534</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;while&nbsp;(lineEnd&nbsp;&lt;&nbsp;text.length()&nbsp;-&nbsp;1)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_535">535</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;lineEnd&nbsp;=&nbsp;text.indexOf('\n',&nbsp;lineStart);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_536">536</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(lineEnd&nbsp;==&nbsp;-1)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_537">537</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lineEnd&nbsp;=&nbsp;text.length()&nbsp;-&nbsp;1;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_538">538</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_539">539</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;line&nbsp;=&nbsp;safeMid(text,&nbsp;lineStart,&nbsp;lineEnd&nbsp;+&nbsp;1&nbsp;-&nbsp;lineStart);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_540">540</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;lineStart&nbsp;=&nbsp;lineEnd&nbsp;+&nbsp;1;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_541">541</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_542">542</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(lineHash.contains(line))&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_543">543</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chars&nbsp;+=&nbsp;QChar(static_cast&lt;ushort&gt;(lineHash.value(line)));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_544">544</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_545">545</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lineArray.append(line);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_546">546</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lineHash.insert(line,&nbsp;lineArray.size()&nbsp;-&nbsp;1);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_547">547</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chars&nbsp;+=&nbsp;QChar(static_cast&lt;ushort&gt;(lineArray.size()&nbsp;-&nbsp;1));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_548">548</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_549">549</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_550">550</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;chars;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_551">551</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_552">552</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_553">553</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_554">554</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_555">555</td><td wrap="wrap" class="diff_line">void&nbsp;diff_match_patch::diff_charsToLines(QList&lt;Diff&gt;&nbsp;&amp;diffs,</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_556">556</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QStringList&nbsp;&amp;lineArray)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_557">557</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Qt&nbsp;has&nbsp;no&nbsp;mutable&nbsp;foreach&nbsp;construct.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_558">558</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QMutableListIterator&lt;Diff&gt;&nbsp;i(diffs);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_559">559</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;while&nbsp;(i.hasNext())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_560">560</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;Diff&nbsp;&amp;diff&nbsp;=&nbsp;i.next();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_561">561</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;QString&nbsp;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_562">562</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(int&nbsp;y&nbsp;=&nbsp;0;&nbsp;y&nbsp;&lt;&nbsp;diff.text.length();&nbsp;y++)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_563">563</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text&nbsp;+=&nbsp;lineArray.value(static_cast&lt;ushort&gt;(diff.text[y].unicode()));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_564">564</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_565">565</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;diff.text&nbsp;=&nbsp;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_566">566</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_567">567</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_568">568</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_569">569</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_570">570</td><td wrap="wrap" class="diff_line">int&nbsp;diff_match_patch::diff_commonPrefix(const&nbsp;QString&nbsp;&amp;text1,</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_571">571</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QString&nbsp;&amp;text2)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_572">572</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Performance&nbsp;analysis:&nbsp;http://neil.fraser.name/news/2007/10/09/</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_573">573</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;int&nbsp;n&nbsp;=&nbsp;std::min(text1.length(),&nbsp;text2.length());</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_574">574</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;for&nbsp;(int&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;n;&nbsp;i++)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_575">575</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(text1[i]&nbsp;!=&nbsp;text2[i])&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_576">576</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;i;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_577">577</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_578">578</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_579">579</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;n;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_580">580</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_581">581</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_582">582</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_583">583</td><td wrap="wrap" class="diff_line">int&nbsp;diff_match_patch::diff_commonSuffix(const&nbsp;QString&nbsp;&amp;text1,</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_584">584</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QString&nbsp;&amp;text2)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_585">585</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Performance&nbsp;analysis:&nbsp;http://neil.fraser.name/news/2007/10/09/</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_586">586</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;int&nbsp;text1_length&nbsp;=&nbsp;text1.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_587">587</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;int&nbsp;text2_length&nbsp;=&nbsp;text2.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_588">588</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;int&nbsp;n&nbsp;=&nbsp;std::min(text1_length,&nbsp;text2_length);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_589">589</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;for&nbsp;(int&nbsp;i&nbsp;=&nbsp;1;&nbsp;i&nbsp;&lt;=&nbsp;n;&nbsp;i++)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_590">590</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(text1[text1_length&nbsp;-&nbsp;i]&nbsp;!=&nbsp;text2[text2_length&nbsp;-&nbsp;i])&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_591">591</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;i&nbsp;-&nbsp;1;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_592">592</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_593">593</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_594">594</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;n;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_595">595</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_596">596</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_597">597</td><td wrap="wrap" class="diff_line">int&nbsp;diff_match_patch::diff_commonOverlap(const&nbsp;QString&nbsp;&amp;text1,</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_598">598</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QString&nbsp;&amp;text2)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_599">599</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Cache&nbsp;the&nbsp;text&nbsp;lengths&nbsp;to&nbsp;prevent&nbsp;multiple&nbsp;calls.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_600">600</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;int&nbsp;text1_length&nbsp;=&nbsp;text1.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_601">601</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;int&nbsp;text2_length&nbsp;=&nbsp;text2.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_602">602</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Eliminate&nbsp;the&nbsp;null&nbsp;case.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_603">603</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(text1_length&nbsp;==&nbsp;0&nbsp;||&nbsp;text2_length&nbsp;==&nbsp;0)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_604">604</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_605">605</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_606">606</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Truncate&nbsp;the&nbsp;longer&nbsp;string.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_607">607</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;text1_trunc&nbsp;=&nbsp;text1;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_608">608</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;text2_trunc&nbsp;=&nbsp;text2;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_609">609</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(text1_length&nbsp;&gt;&nbsp;text2_length)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_610">610</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;text1_trunc&nbsp;=&nbsp;text1.right(text2_length);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_611">611</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(text1_length&nbsp;&lt;&nbsp;text2_length)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_612">612</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;text2_trunc&nbsp;=&nbsp;text2.left(text1_length);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_613">613</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_614">614</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;int&nbsp;text_length&nbsp;=&nbsp;std::min(text1_length,&nbsp;text2_length);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_615">615</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Quick&nbsp;check&nbsp;for&nbsp;the&nbsp;worst&nbsp;case.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_616">616</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(text1_trunc&nbsp;==&nbsp;text2_trunc)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_617">617</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;text_length;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_618">618</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_619">619</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_620">620</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Start&nbsp;by&nbsp;looking&nbsp;for&nbsp;a&nbsp;single&nbsp;character&nbsp;match</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_621">621</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;and&nbsp;increase&nbsp;length&nbsp;until&nbsp;no&nbsp;match&nbsp;is&nbsp;found.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_622">622</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Performance&nbsp;analysis:&nbsp;http://neil.fraser.name/news/2010/11/04/</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_623">623</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;best&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_624">624</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;length&nbsp;=&nbsp;1;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_625">625</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;while&nbsp;(true)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_626">626</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;QString&nbsp;pattern&nbsp;=&nbsp;text1_trunc.right(length);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_627">627</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;found&nbsp;=&nbsp;text2_trunc.indexOf(pattern);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_628">628</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(found&nbsp;==&nbsp;-1)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_629">629</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;best;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_630">630</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_631">631</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;length&nbsp;+=&nbsp;found;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_632">632</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(found&nbsp;==&nbsp;0&nbsp;||&nbsp;text1_trunc.right(length)&nbsp;==&nbsp;text2_trunc.left(length))&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_633">633</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;best&nbsp;=&nbsp;length;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_634">634</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;length++;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_635">635</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_636">636</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_637">637</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_638">638</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_639">639</td><td wrap="wrap" class="diff_line">QStringList&nbsp;diff_match_patch::diff_halfMatch(const&nbsp;QString&nbsp;&amp;text1,</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_640">640</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QString&nbsp;&amp;text2)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_641">641</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(Diff_Timeout&nbsp;&lt;=&nbsp;0)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_642">642</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Don't&nbsp;risk&nbsp;returning&nbsp;a&nbsp;non-optimal&nbsp;diff&nbsp;if&nbsp;we&nbsp;have&nbsp;unlimited&nbsp;time.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_643">643</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;QStringList();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_644">644</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_645">645</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;QString&nbsp;longtext&nbsp;=&nbsp;text1.length()&nbsp;&gt;&nbsp;text2.length()&nbsp;?&nbsp;text1&nbsp;:&nbsp;text2;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_646">646</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;QString&nbsp;shorttext&nbsp;=&nbsp;text1.length()&nbsp;&gt;&nbsp;text2.length()&nbsp;?&nbsp;text2&nbsp;:&nbsp;text1;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_647">647</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(longtext.length()&nbsp;&lt;&nbsp;4&nbsp;||&nbsp;shorttext.length()&nbsp;*&nbsp;2&nbsp;&lt;&nbsp;longtext.length())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_648">648</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;QStringList();&nbsp;&nbsp;//&nbsp;Pointless.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_649">649</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_650">650</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_651">651</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;First&nbsp;check&nbsp;if&nbsp;the&nbsp;second&nbsp;quarter&nbsp;is&nbsp;the&nbsp;seed&nbsp;for&nbsp;a&nbsp;half-match.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_652">652</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;QStringList&nbsp;hm1&nbsp;=&nbsp;diff_halfMatchI(longtext,&nbsp;shorttext,</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_653">653</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(longtext.length()&nbsp;+&nbsp;3)&nbsp;/&nbsp;4);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_654">654</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Check&nbsp;again&nbsp;based&nbsp;on&nbsp;the&nbsp;third&nbsp;quarter.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_655">655</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;QStringList&nbsp;hm2&nbsp;=&nbsp;diff_halfMatchI(longtext,&nbsp;shorttext,</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_656">656</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(longtext.length()&nbsp;+&nbsp;1)&nbsp;/&nbsp;2);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_657">657</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QStringList&nbsp;hm;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_658">658</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(hm1.isEmpty()&nbsp;&amp;&amp;&nbsp;hm2.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_659">659</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;QStringList();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_660">660</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(hm2.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_661">661</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;hm&nbsp;=&nbsp;hm1;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_662">662</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(hm1.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_663">663</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;hm&nbsp;=&nbsp;hm2;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_664">664</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_665">665</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Both&nbsp;matched.&nbsp;&nbsp;Select&nbsp;the&nbsp;longest.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_666">666</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;hm&nbsp;=&nbsp;hm1[4].length()&nbsp;&gt;&nbsp;hm2[4].length()&nbsp;?&nbsp;hm1&nbsp;:&nbsp;hm2;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_667">667</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_668">668</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_669">669</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;A&nbsp;half-match&nbsp;was&nbsp;found,&nbsp;sort&nbsp;out&nbsp;the&nbsp;return&nbsp;data.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_670">670</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(text1.length()&nbsp;&gt;&nbsp;text2.length())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_671">671</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;hm;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_672">672</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_673">673</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;QStringList&nbsp;listRet;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_674">674</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;listRet&nbsp;&lt;&lt;&nbsp;hm[2]&nbsp;&lt;&lt;&nbsp;hm[3]&nbsp;&lt;&lt;&nbsp;hm[0]&nbsp;&lt;&lt;&nbsp;hm[1]&nbsp;&lt;&lt;&nbsp;hm[4];</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_675">675</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;listRet;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_676">676</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_677">677</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_678">678</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_679">679</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_680">680</td><td wrap="wrap" class="diff_line">QStringList&nbsp;diff_match_patch::diff_halfMatchI(const&nbsp;QString&nbsp;&amp;longtext,</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_681">681</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QString&nbsp;&amp;shorttext,</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_682">682</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;i)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_683">683</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Start&nbsp;with&nbsp;a&nbsp;1/4&nbsp;length&nbsp;substring&nbsp;at&nbsp;position&nbsp;i&nbsp;as&nbsp;a&nbsp;seed.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_684">684</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;QString&nbsp;seed&nbsp;=&nbsp;safeMid(longtext,&nbsp;i,&nbsp;longtext.length()&nbsp;/&nbsp;4);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_685">685</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;j&nbsp;=&nbsp;-1;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_686">686</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;best_common;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_687">687</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;best_longtext_a,&nbsp;best_longtext_b;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_688">688</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;best_shorttext_a,&nbsp;best_shorttext_b;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_689">689</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;while&nbsp;((j&nbsp;=&nbsp;shorttext.indexOf(seed,&nbsp;j&nbsp;+&nbsp;1))&nbsp;!=&nbsp;-1)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_690">690</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;int&nbsp;prefixLength&nbsp;=&nbsp;diff_commonPrefix(safeMid(longtext,&nbsp;i),</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_691">691</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;safeMid(shorttext,&nbsp;j));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_692">692</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;int&nbsp;suffixLength&nbsp;=&nbsp;diff_commonSuffix(longtext.left(i),</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_693">693</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shorttext.left(j));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_694">694</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(best_common.length()&nbsp;&lt;&nbsp;suffixLength&nbsp;+&nbsp;prefixLength)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_695">695</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;best_common&nbsp;=&nbsp;safeMid(shorttext,&nbsp;j&nbsp;-&nbsp;suffixLength,&nbsp;suffixLength)</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_696">696</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;safeMid(shorttext,&nbsp;j,&nbsp;prefixLength);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_697">697</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;best_longtext_a&nbsp;=&nbsp;longtext.left(i&nbsp;-&nbsp;suffixLength);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_698">698</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;best_longtext_b&nbsp;=&nbsp;safeMid(longtext,&nbsp;i&nbsp;+&nbsp;prefixLength);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_699">699</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;best_shorttext_a&nbsp;=&nbsp;shorttext.left(j&nbsp;-&nbsp;suffixLength);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_700">700</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;best_shorttext_b&nbsp;=&nbsp;safeMid(shorttext,&nbsp;j&nbsp;+&nbsp;prefixLength);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_701">701</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_702">702</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_703">703</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(best_common.length()&nbsp;*&nbsp;2&nbsp;&gt;=&nbsp;longtext.length())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_704">704</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;QStringList&nbsp;listRet;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_705">705</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;listRet&nbsp;&lt;&lt;&nbsp;best_longtext_a&nbsp;&lt;&lt;&nbsp;best_longtext_b&nbsp;&lt;&lt;&nbsp;best_shorttext_a</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_706">706</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;best_shorttext_b&nbsp;&lt;&lt;&nbsp;best_common;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_707">707</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;listRet;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_708">708</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_709">709</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;QStringList();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_710">710</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_711">711</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_712">712</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_713">713</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_714">714</td><td wrap="wrap" class="diff_line">void&nbsp;diff_match_patch::diff_cleanupSemantic(QList&lt;Diff&gt;&nbsp;&amp;diffs)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_715">715</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(diffs.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_716">716</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_717">717</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_718">718</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;bool&nbsp;changes&nbsp;=&nbsp;false;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_719">719</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QStack&lt;Diff&gt;&nbsp;equalities;&nbsp;&nbsp;//&nbsp;Stack&nbsp;of&nbsp;equalities.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_720">720</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;lastequality;&nbsp;&nbsp;//&nbsp;Always&nbsp;equal&nbsp;to&nbsp;equalities.lastElement().text</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_721">721</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QMutableListIterator&lt;Diff&gt;&nbsp;pointer(diffs);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_722">722</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Number&nbsp;of&nbsp;characters&nbsp;that&nbsp;changed&nbsp;prior&nbsp;to&nbsp;the&nbsp;equality.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_723">723</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;length_insertions1&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_724">724</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;length_deletions1&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_725">725</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Number&nbsp;of&nbsp;characters&nbsp;that&nbsp;changed&nbsp;after&nbsp;the&nbsp;equality.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_726">726</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;length_insertions2&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_727">727</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;length_deletions2&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_728">728</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Diff&nbsp;*thisDiff&nbsp;=&nbsp;pointer.hasNext()&nbsp;?&nbsp;&amp;pointer.next()&nbsp;:&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_729">729</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;while&nbsp;(thisDiff&nbsp;!=&nbsp;NULL)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_730">730</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(thisDiff-&gt;operation&nbsp;==&nbsp;EQUAL)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_731">731</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Equality&nbsp;found.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_732">732</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;equalities.push(*thisDiff);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_733">733</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;length_insertions1&nbsp;=&nbsp;length_insertions2;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_734">734</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;length_deletions1&nbsp;=&nbsp;length_deletions2;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_735">735</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;length_insertions2&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_736">736</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;length_deletions2&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_737">737</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lastequality&nbsp;=&nbsp;thisDiff-&gt;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_738">738</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_739">739</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;An&nbsp;insertion&nbsp;or&nbsp;deletion.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_740">740</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(thisDiff-&gt;operation&nbsp;==&nbsp;INSERT)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_741">741</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;length_insertions2&nbsp;+=&nbsp;thisDiff-&gt;text.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_742">742</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_743">743</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;length_deletions2&nbsp;+=&nbsp;thisDiff-&gt;text.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_744">744</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_745">745</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Eliminate&nbsp;an&nbsp;equality&nbsp;that&nbsp;is&nbsp;smaller&nbsp;or&nbsp;equal&nbsp;to&nbsp;the&nbsp;edits&nbsp;on&nbsp;both</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_746">746</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;sides&nbsp;of&nbsp;it.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_747">747</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!lastequality.isNull()</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_748">748</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;&nbsp;(lastequality.length()</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_749">749</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;=&nbsp;std::max(length_insertions1,&nbsp;length_deletions1))</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_750">750</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;&nbsp;(lastequality.length()</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_751">751</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;=&nbsp;std::max(length_insertions2,&nbsp;length_deletions2)))&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_752">752</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;printf("Splitting:&nbsp;'%s'\n",&nbsp;qPrintable(lastequality));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_753">753</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Walk&nbsp;back&nbsp;to&nbsp;offending&nbsp;equality.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_754">754</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(*thisDiff&nbsp;!=&nbsp;equalities.top())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_755">755</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisDiff&nbsp;=&nbsp;&amp;pointer.previous();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_756">756</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_757">757</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.next();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_758">758</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_759">759</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Replace&nbsp;equality&nbsp;with&nbsp;a&nbsp;delete.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_760">760</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.setValue(Diff(DELETE,&nbsp;lastequality));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_761">761</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Insert&nbsp;a&nbsp;corresponding&nbsp;an&nbsp;insert.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_762">762</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.insert(Diff(INSERT,&nbsp;lastequality));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_763">763</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_764">764</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;equalities.pop();&nbsp;&nbsp;//&nbsp;Throw&nbsp;away&nbsp;the&nbsp;equality&nbsp;we&nbsp;just&nbsp;deleted.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_765">765</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!equalities.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_766">766</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Throw&nbsp;away&nbsp;the&nbsp;previous&nbsp;equality&nbsp;(it&nbsp;needs&nbsp;to&nbsp;be&nbsp;reevaluated).</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_767">767</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;equalities.pop();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_768">768</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_769">769</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(equalities.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_770">770</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;There&nbsp;are&nbsp;no&nbsp;previous&nbsp;equalities,&nbsp;walk&nbsp;back&nbsp;to&nbsp;the&nbsp;start.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_771">771</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(pointer.hasPrevious())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_772">772</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.previous();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_773">773</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_774">774</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_775">775</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;There&nbsp;is&nbsp;a&nbsp;safe&nbsp;equality&nbsp;we&nbsp;can&nbsp;fall&nbsp;back&nbsp;to.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_776">776</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisDiff&nbsp;=&nbsp;&amp;equalities.top();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_777">777</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(*thisDiff&nbsp;!=&nbsp;pointer.previous())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_778">778</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Intentionally&nbsp;empty&nbsp;loop.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_779">779</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_780">780</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_781">781</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_782">782</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;length_insertions1&nbsp;=&nbsp;0;&nbsp;&nbsp;//&nbsp;Reset&nbsp;the&nbsp;counters.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_783">783</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;length_deletions1&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_784">784</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;length_insertions2&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_785">785</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;length_deletions2&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_786">786</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lastequality&nbsp;=&nbsp;QString();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_787">787</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;changes&nbsp;=&nbsp;true;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_788">788</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_789">789</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_790">790</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;thisDiff&nbsp;=&nbsp;pointer.hasNext()&nbsp;?&nbsp;&amp;pointer.next()&nbsp;:&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_791">791</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_792">792</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_793">793</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Normalize&nbsp;the&nbsp;diff.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_794">794</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(changes)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_795">795</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;diff_cleanupMerge(diffs);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_796">796</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_797">797</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;diff_cleanupSemanticLossless(diffs);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_798">798</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_799">799</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Find&nbsp;any&nbsp;overlaps&nbsp;between&nbsp;deletions&nbsp;and&nbsp;insertions.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_800">800</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;e.g:&nbsp;&lt;del&gt;abcxxx&lt;/del&gt;&lt;ins&gt;xxxdef&lt;/ins&gt;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_801">801</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;-&gt;&nbsp;&lt;del&gt;abc&lt;/del&gt;xxx&lt;ins&gt;def&lt;/ins&gt;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_802">802</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;e.g:&nbsp;&lt;del&gt;xxxabc&lt;/del&gt;&lt;ins&gt;defxxx&lt;/ins&gt;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_803">803</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;-&gt;&nbsp;&lt;ins&gt;def&lt;/ins&gt;xxx&lt;del&gt;abc&lt;/del&gt;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_804">804</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Only&nbsp;extract&nbsp;an&nbsp;overlap&nbsp;if&nbsp;it&nbsp;is&nbsp;as&nbsp;big&nbsp;as&nbsp;the&nbsp;edit&nbsp;ahead&nbsp;or&nbsp;behind&nbsp;it.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_805">805</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;pointer.toFront();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_806">806</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Diff&nbsp;*prevDiff&nbsp;=&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_807">807</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;thisDiff&nbsp;=&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_808">808</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(pointer.hasNext())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_809">809</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;prevDiff&nbsp;=&nbsp;&amp;pointer.next();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_810">810</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(pointer.hasNext())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_811">811</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisDiff&nbsp;=&nbsp;&amp;pointer.next();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_812">812</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_813">813</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_814">814</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;while&nbsp;(thisDiff&nbsp;!=&nbsp;NULL)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_815">815</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(prevDiff-&gt;operation&nbsp;==&nbsp;DELETE&nbsp;&amp;&amp;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_816">816</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisDiff-&gt;operation&nbsp;==&nbsp;INSERT)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_817">817</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;QString&nbsp;deletion&nbsp;=&nbsp;prevDiff-&gt;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_818">818</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;QString&nbsp;insertion&nbsp;=&nbsp;thisDiff-&gt;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_819">819</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;overlap_length1&nbsp;=&nbsp;diff_commonOverlap(deletion,&nbsp;insertion);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_820">820</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;overlap_length2&nbsp;=&nbsp;diff_commonOverlap(insertion,&nbsp;deletion);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_821">821</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(overlap_length1&nbsp;&gt;=&nbsp;overlap_length2)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_822">822</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(overlap_length1&nbsp;&gt;=&nbsp;deletion.length()&nbsp;/&nbsp;2.0&nbsp;||</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_823">823</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;overlap_length1&nbsp;&gt;=&nbsp;insertion.length()&nbsp;/&nbsp;2.0)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_824">824</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Overlap&nbsp;found.&nbsp;&nbsp;Insert&nbsp;an&nbsp;equality&nbsp;and&nbsp;trim&nbsp;the&nbsp;surrounding&nbsp;edits.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_825">825</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.previous();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_826">826</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.insert(Diff(EQUAL,&nbsp;insertion.left(overlap_length1)));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_827">827</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prevDiff-&gt;text&nbsp;=</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_828">828</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;deletion.left(deletion.length()&nbsp;-&nbsp;overlap_length1);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_829">829</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisDiff-&gt;text&nbsp;=&nbsp;safeMid(insertion,&nbsp;overlap_length1);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_830">830</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;pointer.insert&nbsp;inserts&nbsp;the&nbsp;element&nbsp;before&nbsp;the&nbsp;cursor,&nbsp;so&nbsp;there&nbsp;is</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_831">831</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;no&nbsp;need&nbsp;to&nbsp;step&nbsp;past&nbsp;the&nbsp;new&nbsp;element.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_832">832</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_833">833</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_834">834</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(overlap_length2&nbsp;&gt;=&nbsp;deletion.length()&nbsp;/&nbsp;2.0&nbsp;||</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_835">835</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;overlap_length2&nbsp;&gt;=&nbsp;insertion.length()&nbsp;/&nbsp;2.0)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_836">836</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Reverse&nbsp;overlap&nbsp;found.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_837">837</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Insert&nbsp;an&nbsp;equality&nbsp;and&nbsp;swap&nbsp;and&nbsp;trim&nbsp;the&nbsp;surrounding&nbsp;edits.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_838">838</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.previous();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_839">839</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.insert(Diff(EQUAL,&nbsp;deletion.left(overlap_length2)));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_840">840</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prevDiff-&gt;operation&nbsp;=&nbsp;INSERT;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_841">841</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prevDiff-&gt;text&nbsp;=</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_842">842</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;insertion.left(insertion.length()&nbsp;-&nbsp;overlap_length2);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_843">843</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisDiff-&gt;operation&nbsp;=&nbsp;DELETE;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_844">844</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisDiff-&gt;text&nbsp;=&nbsp;safeMid(deletion,&nbsp;overlap_length2);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_845">845</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;pointer.insert&nbsp;inserts&nbsp;the&nbsp;element&nbsp;before&nbsp;the&nbsp;cursor,&nbsp;so&nbsp;there&nbsp;is</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_846">846</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;no&nbsp;need&nbsp;to&nbsp;step&nbsp;past&nbsp;the&nbsp;new&nbsp;element.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_847">847</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_848">848</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_849">849</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisDiff&nbsp;=&nbsp;pointer.hasNext()&nbsp;?&nbsp;&amp;pointer.next()&nbsp;:&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_850">850</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_851">851</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;prevDiff&nbsp;=&nbsp;thisDiff;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_852">852</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;thisDiff&nbsp;=&nbsp;pointer.hasNext()&nbsp;?&nbsp;&amp;pointer.next()&nbsp;:&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_853">853</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_854">854</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_855">855</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_856">856</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_857">857</td><td wrap="wrap" class="diff_line">void&nbsp;diff_match_patch::diff_cleanupSemanticLossless(QList&lt;Diff&gt;&nbsp;&amp;diffs)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_858">858</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;equality1,&nbsp;edit,&nbsp;equality2;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_859">859</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;commonString;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_860">860</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;commonOffset;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_861">861</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;score,&nbsp;bestScore;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_862">862</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;bestEquality1,&nbsp;bestEdit,&nbsp;bestEquality2;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_863">863</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Create&nbsp;a&nbsp;new&nbsp;iterator&nbsp;at&nbsp;the&nbsp;start.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_864">864</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QMutableListIterator&lt;Diff&gt;&nbsp;pointer(diffs);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_865">865</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Diff&nbsp;*prevDiff&nbsp;=&nbsp;pointer.hasNext()&nbsp;?&nbsp;&amp;pointer.next()&nbsp;:&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_866">866</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Diff&nbsp;*thisDiff&nbsp;=&nbsp;pointer.hasNext()&nbsp;?&nbsp;&amp;pointer.next()&nbsp;:&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_867">867</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Diff&nbsp;*nextDiff&nbsp;=&nbsp;pointer.hasNext()&nbsp;?&nbsp;&amp;pointer.next()&nbsp;:&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_868">868</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_869">869</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Intentionally&nbsp;ignore&nbsp;the&nbsp;first&nbsp;and&nbsp;last&nbsp;element&nbsp;(don't&nbsp;need&nbsp;checking).</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_870">870</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;while&nbsp;(nextDiff&nbsp;!=&nbsp;NULL)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_871">871</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(prevDiff-&gt;operation&nbsp;==&nbsp;EQUAL&nbsp;&amp;&amp;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_872">872</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nextDiff-&gt;operation&nbsp;==&nbsp;EQUAL)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_873">873</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;This&nbsp;is&nbsp;a&nbsp;single&nbsp;edit&nbsp;surrounded&nbsp;by&nbsp;equalities.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_874">874</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;equality1&nbsp;=&nbsp;prevDiff-&gt;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_875">875</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;edit&nbsp;=&nbsp;thisDiff-&gt;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_876">876</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;equality2&nbsp;=&nbsp;nextDiff-&gt;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_877">877</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_878">878</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;First,&nbsp;shift&nbsp;the&nbsp;edit&nbsp;as&nbsp;far&nbsp;left&nbsp;as&nbsp;possible.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_879">879</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;commonOffset&nbsp;=&nbsp;diff_commonSuffix(equality1,&nbsp;edit);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_880">880</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(commonOffset&nbsp;!=&nbsp;0)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_881">881</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;commonString&nbsp;=&nbsp;safeMid(edit,&nbsp;edit.length()&nbsp;-&nbsp;commonOffset);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_882">882</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;equality1&nbsp;=&nbsp;equality1.left(equality1.length()&nbsp;-&nbsp;commonOffset);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_883">883</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;edit&nbsp;=&nbsp;commonString&nbsp;+&nbsp;edit.left(edit.length()&nbsp;-&nbsp;commonOffset);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_884">884</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;equality2&nbsp;=&nbsp;commonString&nbsp;+&nbsp;equality2;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_885">885</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_886">886</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_887">887</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Second,&nbsp;step&nbsp;character&nbsp;by&nbsp;character&nbsp;right,&nbsp;looking&nbsp;for&nbsp;the&nbsp;best&nbsp;fit.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_888">888</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bestEquality1&nbsp;=&nbsp;equality1;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_889">889</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bestEdit&nbsp;=&nbsp;edit;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_890">890</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bestEquality2&nbsp;=&nbsp;equality2;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_891">891</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bestScore&nbsp;=&nbsp;diff_cleanupSemanticScore(equality1,&nbsp;edit)</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_892">892</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;diff_cleanupSemanticScore(edit,&nbsp;equality2);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_893">893</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(!edit.isEmpty()&nbsp;&amp;&amp;&nbsp;!equality2.isEmpty()</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_894">894</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;&nbsp;edit[0]&nbsp;==&nbsp;equality2[0])&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_895">895</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;equality1&nbsp;+=&nbsp;edit[0];</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_896">896</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;edit&nbsp;=&nbsp;safeMid(edit,&nbsp;1)&nbsp;+&nbsp;equality2[0];</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_897">897</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;equality2&nbsp;=&nbsp;safeMid(equality2,&nbsp;1);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_898">898</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;score&nbsp;=&nbsp;diff_cleanupSemanticScore(equality1,&nbsp;edit)</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_899">899</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;diff_cleanupSemanticScore(edit,&nbsp;equality2);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_900">900</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;&gt;=&nbsp;encourages&nbsp;trailing&nbsp;rather&nbsp;than&nbsp;leading&nbsp;whitespace&nbsp;on&nbsp;edits.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_901">901</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(score&nbsp;&gt;=&nbsp;bestScore)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_902">902</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bestScore&nbsp;=&nbsp;score;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_903">903</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bestEquality1&nbsp;=&nbsp;equality1;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_904">904</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bestEdit&nbsp;=&nbsp;edit;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_905">905</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bestEquality2&nbsp;=&nbsp;equality2;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_906">906</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_907">907</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_908">908</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_909">909</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(prevDiff-&gt;text&nbsp;!=&nbsp;bestEquality1)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_910">910</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;We&nbsp;have&nbsp;an&nbsp;improvement,&nbsp;save&nbsp;it&nbsp;back&nbsp;to&nbsp;the&nbsp;diff.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_911">911</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!bestEquality1.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_912">912</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prevDiff-&gt;text&nbsp;=&nbsp;bestEquality1;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_913">913</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_914">914</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.previous();&nbsp;&nbsp;//&nbsp;Walk&nbsp;past&nbsp;nextDiff.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_915">915</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.previous();&nbsp;&nbsp;//&nbsp;Walk&nbsp;past&nbsp;thisDiff.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_916">916</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.previous();&nbsp;&nbsp;//&nbsp;Walk&nbsp;past&nbsp;prevDiff.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_917">917</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.remove();&nbsp;&nbsp;//&nbsp;Delete&nbsp;prevDiff.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_918">918</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.next();&nbsp;&nbsp;//&nbsp;Walk&nbsp;past&nbsp;thisDiff.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_919">919</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.next();&nbsp;&nbsp;//&nbsp;Walk&nbsp;past&nbsp;nextDiff.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_920">920</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_921">921</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisDiff-&gt;text&nbsp;=&nbsp;bestEdit;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_922">922</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!bestEquality2.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_923">923</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nextDiff-&gt;text&nbsp;=&nbsp;bestEquality2;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_924">924</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_925">925</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.remove();&nbsp;//&nbsp;Delete&nbsp;nextDiff.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_926">926</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nextDiff&nbsp;=&nbsp;thisDiff;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_927">927</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisDiff&nbsp;=&nbsp;prevDiff;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_928">928</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_929">929</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_930">930</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_931">931</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;prevDiff&nbsp;=&nbsp;thisDiff;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_932">932</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;thisDiff&nbsp;=&nbsp;nextDiff;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_933">933</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;nextDiff&nbsp;=&nbsp;pointer.hasNext()&nbsp;?&nbsp;&amp;pointer.next()&nbsp;:&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_934">934</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_935">935</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_936">936</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_937">937</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_938">938</td><td wrap="wrap" class="diff_line">int&nbsp;diff_match_patch::diff_cleanupSemanticScore(const&nbsp;QString&nbsp;&amp;one,</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_939">939</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QString&nbsp;&amp;two)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_940">940</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(one.isEmpty()&nbsp;||&nbsp;two.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_941">941</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Edges&nbsp;are&nbsp;the&nbsp;best.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_942">942</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;6;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_943">943</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_944">944</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_945">945</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Each&nbsp;port&nbsp;of&nbsp;this&nbsp;function&nbsp;behaves&nbsp;slightly&nbsp;differently&nbsp;due&nbsp;to</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_946">946</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;subtle&nbsp;differences&nbsp;in&nbsp;each&nbsp;language's&nbsp;definition&nbsp;of&nbsp;things&nbsp;like</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_947">947</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;'whitespace'.&nbsp;&nbsp;Since&nbsp;this&nbsp;function's&nbsp;purpose&nbsp;is&nbsp;largely&nbsp;cosmetic,</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_948">948</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;the&nbsp;choice&nbsp;has&nbsp;been&nbsp;made&nbsp;to&nbsp;use&nbsp;each&nbsp;language's&nbsp;native&nbsp;features</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_949">949</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;rather&nbsp;than&nbsp;force&nbsp;total&nbsp;conformity.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_950">950</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QChar&nbsp;char1&nbsp;=&nbsp;one[one.length()&nbsp;-&nbsp;1];</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_951">951</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QChar&nbsp;char2&nbsp;=&nbsp;two[0];</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_952">952</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;bool&nbsp;nonAlphaNumeric1&nbsp;=&nbsp;!char1.isLetterOrNumber();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_953">953</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;bool&nbsp;nonAlphaNumeric2&nbsp;=&nbsp;!char2.isLetterOrNumber();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_954">954</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;bool&nbsp;whitespace1&nbsp;=&nbsp;nonAlphaNumeric1&nbsp;&amp;&amp;&nbsp;char1.isSpace();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_955">955</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;bool&nbsp;whitespace2&nbsp;=&nbsp;nonAlphaNumeric2&nbsp;&amp;&amp;&nbsp;char2.isSpace();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_956">956</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;bool&nbsp;lineBreak1&nbsp;=&nbsp;whitespace1&nbsp;&amp;&amp;&nbsp;char1.category()&nbsp;==&nbsp;QChar::Other_Control;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_957">957</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;bool&nbsp;lineBreak2&nbsp;=&nbsp;whitespace2&nbsp;&amp;&amp;&nbsp;char2.category()&nbsp;==&nbsp;QChar::Other_Control;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_958">958</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;bool&nbsp;blankLine1&nbsp;=&nbsp;lineBreak1&nbsp;&amp;&amp;&nbsp;BLANKLINEEND.indexIn(one)&nbsp;!=&nbsp;-1;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_959">959</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;bool&nbsp;blankLine2&nbsp;=&nbsp;lineBreak2&nbsp;&amp;&amp;&nbsp;BLANKLINESTART.indexIn(two)&nbsp;!=&nbsp;-1;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_960">960</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_961">961</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(blankLine1&nbsp;||&nbsp;blankLine2)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_962">962</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Five&nbsp;points&nbsp;for&nbsp;blank&nbsp;lines.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_963">963</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;5;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_964">964</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(lineBreak1&nbsp;||&nbsp;lineBreak2)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_965">965</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Four&nbsp;points&nbsp;for&nbsp;line&nbsp;breaks.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_966">966</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;4;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_967">967</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(nonAlphaNumeric1&nbsp;&amp;&amp;&nbsp;!whitespace1&nbsp;&amp;&amp;&nbsp;whitespace2)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_968">968</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Three&nbsp;points&nbsp;for&nbsp;end&nbsp;of&nbsp;sentences.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_969">969</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;3;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_970">970</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(whitespace1&nbsp;||&nbsp;whitespace2)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_971">971</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Two&nbsp;points&nbsp;for&nbsp;whitespace.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_972">972</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;2;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_973">973</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(nonAlphaNumeric1&nbsp;||&nbsp;nonAlphaNumeric2)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_974">974</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;One&nbsp;point&nbsp;for&nbsp;non-alphanumeric.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_975">975</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;1;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_976">976</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_977">977</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_978">978</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_979">979</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_980">980</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_981">981</td><td wrap="wrap" class="diff_line">//&nbsp;Define&nbsp;some&nbsp;regex&nbsp;patterns&nbsp;for&nbsp;matching&nbsp;boundaries.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_982">982</td><td wrap="wrap" class="diff_line">QRegExp&nbsp;diff_match_patch::BLANKLINEEND&nbsp;=&nbsp;QRegExp("\\n\\r?\\n$");</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_983">983</td><td wrap="wrap" class="diff_line">QRegExp&nbsp;diff_match_patch::BLANKLINESTART&nbsp;=&nbsp;QRegExp("^\\r?\\n\\r?\\n");</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_984">984</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_985">985</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_986">986</td><td wrap="wrap" class="diff_line">void&nbsp;diff_match_patch::diff_cleanupEfficiency(QList&lt;Diff&gt;&nbsp;&amp;diffs)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_987">987</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(diffs.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_988">988</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_989">989</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_990">990</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;bool&nbsp;changes&nbsp;=&nbsp;false;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_991">991</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QStack&lt;Diff&gt;&nbsp;equalities;&nbsp;&nbsp;//&nbsp;Stack&nbsp;of&nbsp;equalities.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_992">992</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;lastequality;&nbsp;&nbsp;//&nbsp;Always&nbsp;equal&nbsp;to&nbsp;equalities.lastElement().text</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_993">993</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QMutableListIterator&lt;Diff&gt;&nbsp;pointer(diffs);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_994">994</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Is&nbsp;there&nbsp;an&nbsp;insertion&nbsp;operation&nbsp;before&nbsp;the&nbsp;last&nbsp;equality.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_995">995</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;bool&nbsp;pre_ins&nbsp;=&nbsp;false;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_996">996</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Is&nbsp;there&nbsp;a&nbsp;deletion&nbsp;operation&nbsp;before&nbsp;the&nbsp;last&nbsp;equality.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_997">997</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;bool&nbsp;pre_del&nbsp;=&nbsp;false;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_998">998</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Is&nbsp;there&nbsp;an&nbsp;insertion&nbsp;operation&nbsp;after&nbsp;the&nbsp;last&nbsp;equality.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_999">999</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;bool&nbsp;post_ins&nbsp;=&nbsp;false;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1000">1000</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Is&nbsp;there&nbsp;a&nbsp;deletion&nbsp;operation&nbsp;after&nbsp;the&nbsp;last&nbsp;equality.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1001">1001</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;bool&nbsp;post_del&nbsp;=&nbsp;false;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1002">1002</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1003">1003</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Diff&nbsp;*thisDiff&nbsp;=&nbsp;pointer.hasNext()&nbsp;?&nbsp;&amp;pointer.next()&nbsp;:&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1004">1004</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Diff&nbsp;*safeDiff&nbsp;=&nbsp;thisDiff;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1005">1005</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1006">1006</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;while&nbsp;(thisDiff&nbsp;!=&nbsp;NULL)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1007">1007</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(thisDiff-&gt;operation&nbsp;==&nbsp;EQUAL)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1008">1008</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Equality&nbsp;found.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1009">1009</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(thisDiff-&gt;text.length()&nbsp;&lt;&nbsp;Diff_EditCost&nbsp;&amp;&amp;&nbsp;(post_ins&nbsp;||&nbsp;post_del))&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1010">1010</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Candidate&nbsp;found.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1011">1011</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;equalities.push(*thisDiff);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1012">1012</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pre_ins&nbsp;=&nbsp;post_ins;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1013">1013</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pre_del&nbsp;=&nbsp;post_del;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1014">1014</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lastequality&nbsp;=&nbsp;thisDiff-&gt;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1015">1015</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1016">1016</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Not&nbsp;a&nbsp;candidate,&nbsp;and&nbsp;can&nbsp;never&nbsp;become&nbsp;one.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1017">1017</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;equalities.clear();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1018">1018</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lastequality&nbsp;=&nbsp;QString();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1019">1019</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;safeDiff&nbsp;=&nbsp;thisDiff;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1020">1020</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1021">1021</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;post_ins&nbsp;=&nbsp;post_del&nbsp;=&nbsp;false;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1022">1022</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1023">1023</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;An&nbsp;insertion&nbsp;or&nbsp;deletion.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1024">1024</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(thisDiff-&gt;operation&nbsp;==&nbsp;DELETE)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1025">1025</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;post_del&nbsp;=&nbsp;true;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1026">1026</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1027">1027</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;post_ins&nbsp;=&nbsp;true;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1028">1028</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1029">1029</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1030">1030</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Five&nbsp;types&nbsp;to&nbsp;be&nbsp;split:</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1031">1031</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&lt;ins&gt;A&lt;/ins&gt;&lt;del&gt;B&lt;/del&gt;XY&lt;ins&gt;C&lt;/ins&gt;&lt;del&gt;D&lt;/del&gt;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1032">1032</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&lt;ins&gt;A&lt;/ins&gt;X&lt;ins&gt;C&lt;/ins&gt;&lt;del&gt;D&lt;/del&gt;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1033">1033</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&lt;ins&gt;A&lt;/ins&gt;&lt;del&gt;B&lt;/del&gt;X&lt;ins&gt;C&lt;/ins&gt;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1034">1034</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&lt;ins&gt;A&lt;/del&gt;X&lt;ins&gt;C&lt;/ins&gt;&lt;del&gt;D&lt;/del&gt;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1035">1035</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&lt;ins&gt;A&lt;/ins&gt;&lt;del&gt;B&lt;/del&gt;X&lt;del&gt;C&lt;/del&gt;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1036">1036</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1037">1037</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!lastequality.isNull()</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1038">1038</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;&nbsp;((pre_ins&nbsp;&amp;&amp;&nbsp;pre_del&nbsp;&amp;&amp;&nbsp;post_ins&nbsp;&amp;&amp;&nbsp;post_del)</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1039">1039</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;||&nbsp;((lastequality.length()&nbsp;&lt;&nbsp;Diff_EditCost&nbsp;/&nbsp;2)</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1040">1040</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;&nbsp;((pre_ins&nbsp;?&nbsp;1&nbsp;:&nbsp;0)&nbsp;+&nbsp;(pre_del&nbsp;?&nbsp;1&nbsp;:&nbsp;0)</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1041">1041</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;(post_ins&nbsp;?&nbsp;1&nbsp;:&nbsp;0)&nbsp;+&nbsp;(post_del&nbsp;?&nbsp;1&nbsp;:&nbsp;0))&nbsp;==&nbsp;3)))&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1042">1042</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;printf("Splitting:&nbsp;'%s'\n",&nbsp;qPrintable(lastequality));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1043">1043</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Walk&nbsp;back&nbsp;to&nbsp;offending&nbsp;equality.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1044">1044</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(*thisDiff&nbsp;!=&nbsp;equalities.top())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1045">1045</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisDiff&nbsp;=&nbsp;&amp;pointer.previous();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1046">1046</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1047">1047</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.next();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1048">1048</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1049">1049</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Replace&nbsp;equality&nbsp;with&nbsp;a&nbsp;delete.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1050">1050</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.setValue(Diff(DELETE,&nbsp;lastequality));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1051">1051</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Insert&nbsp;a&nbsp;corresponding&nbsp;an&nbsp;insert.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1052">1052</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.insert(Diff(INSERT,&nbsp;lastequality));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1053">1053</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisDiff&nbsp;=&nbsp;&amp;pointer.previous();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1054">1054</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.next();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1055">1055</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1056">1056</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;equalities.pop();&nbsp;&nbsp;//&nbsp;Throw&nbsp;away&nbsp;the&nbsp;equality&nbsp;we&nbsp;just&nbsp;deleted.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1057">1057</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lastequality&nbsp;=&nbsp;QString();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1058">1058</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(pre_ins&nbsp;&amp;&amp;&nbsp;pre_del)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1059">1059</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;No&nbsp;changes&nbsp;made&nbsp;which&nbsp;could&nbsp;affect&nbsp;previous&nbsp;entry,&nbsp;keep&nbsp;going.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1060">1060</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;post_ins&nbsp;=&nbsp;post_del&nbsp;=&nbsp;true;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1061">1061</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;equalities.clear();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1062">1062</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;safeDiff&nbsp;=&nbsp;thisDiff;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1063">1063</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1064">1064</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!equalities.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1065">1065</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Throw&nbsp;away&nbsp;the&nbsp;previous&nbsp;equality&nbsp;(it&nbsp;needs&nbsp;to&nbsp;be&nbsp;reevaluated).</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1066">1066</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;equalities.pop();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1067">1067</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1068">1068</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(equalities.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1069">1069</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;There&nbsp;are&nbsp;no&nbsp;previous&nbsp;questionable&nbsp;equalities,</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1070">1070</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;walk&nbsp;back&nbsp;to&nbsp;the&nbsp;last&nbsp;known&nbsp;safe&nbsp;diff.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1071">1071</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisDiff&nbsp;=&nbsp;safeDiff;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1072">1072</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1073">1073</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;There&nbsp;is&nbsp;an&nbsp;equality&nbsp;we&nbsp;can&nbsp;fall&nbsp;back&nbsp;to.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1074">1074</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisDiff&nbsp;=&nbsp;&amp;equalities.top();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1075">1075</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1076">1076</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(*thisDiff&nbsp;!=&nbsp;pointer.previous())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1077">1077</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Intentionally&nbsp;empty&nbsp;loop.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1078">1078</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1079">1079</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;post_ins&nbsp;=&nbsp;post_del&nbsp;=&nbsp;false;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1080">1080</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1081">1081</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1082">1082</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;changes&nbsp;=&nbsp;true;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1083">1083</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1084">1084</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1085">1085</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;thisDiff&nbsp;=&nbsp;pointer.hasNext()&nbsp;?&nbsp;&amp;pointer.next()&nbsp;:&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1086">1086</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1087">1087</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1088">1088</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(changes)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1089">1089</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;diff_cleanupMerge(diffs);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1090">1090</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1091">1091</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1092">1092</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1093">1093</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1094">1094</td><td wrap="wrap" class="diff_line">void&nbsp;diff_match_patch::diff_cleanupMerge(QList&lt;Diff&gt;&nbsp;&amp;diffs)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1095">1095</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;diffs.append(Diff(EQUAL,&nbsp;""));&nbsp;&nbsp;//&nbsp;Add&nbsp;a&nbsp;dummy&nbsp;entry&nbsp;at&nbsp;the&nbsp;end.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1096">1096</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QMutableListIterator&lt;Diff&gt;&nbsp;pointer(diffs);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1097">1097</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;count_delete&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1098">1098</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;count_insert&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1099">1099</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;text_delete&nbsp;=&nbsp;"";</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1100">1100</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;text_insert&nbsp;=&nbsp;"";</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1101">1101</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Diff&nbsp;*thisDiff&nbsp;=&nbsp;pointer.hasNext()&nbsp;?&nbsp;&amp;pointer.next()&nbsp;:&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1102">1102</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Diff&nbsp;*prevEqual&nbsp;=&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1103">1103</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;commonlength;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1104">1104</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;while&nbsp;(thisDiff&nbsp;!=&nbsp;NULL)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1105">1105</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;switch&nbsp;(thisDiff-&gt;operation)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1106">1106</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;INSERT:</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1107">1107</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;count_insert++;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1108">1108</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text_insert&nbsp;+=&nbsp;thisDiff-&gt;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1109">1109</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prevEqual&nbsp;=&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1110">1110</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1111">1111</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;DELETE:</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1112">1112</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;count_delete++;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1113">1113</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text_delete&nbsp;+=&nbsp;thisDiff-&gt;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1114">1114</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prevEqual&nbsp;=&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1115">1115</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1116">1116</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;EQUAL:</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1117">1117</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(count_delete&nbsp;+&nbsp;count_insert&nbsp;&gt;&nbsp;1)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1118">1118</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;both_types&nbsp;=&nbsp;count_delete&nbsp;!=&nbsp;0&nbsp;&amp;&amp;&nbsp;count_insert&nbsp;!=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1119">1119</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Delete&nbsp;the&nbsp;offending&nbsp;records.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1120">1120</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.previous();&nbsp;&nbsp;//&nbsp;Reverse&nbsp;direction.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1121">1121</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(count_delete--&nbsp;&gt;&nbsp;0)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1122">1122</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.previous();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1123">1123</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.remove();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1124">1124</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1125">1125</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(count_insert--&nbsp;&gt;&nbsp;0)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1126">1126</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.previous();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1127">1127</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.remove();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1128">1128</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1129">1129</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(both_types)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1130">1130</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Factor&nbsp;out&nbsp;any&nbsp;common&nbsp;prefixies.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1131">1131</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;commonlength&nbsp;=&nbsp;diff_commonPrefix(text_insert,&nbsp;text_delete);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1132">1132</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(commonlength&nbsp;!=&nbsp;0)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1133">1133</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(pointer.hasPrevious())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1134">1134</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisDiff&nbsp;=&nbsp;&amp;pointer.previous();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1135">1135</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(thisDiff-&gt;operation&nbsp;!=&nbsp;EQUAL)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1136">1136</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;"Previous&nbsp;diff&nbsp;should&nbsp;have&nbsp;been&nbsp;an&nbsp;equality.";</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1137">1137</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1138">1138</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisDiff-&gt;text&nbsp;+=&nbsp;text_insert.left(commonlength);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1139">1139</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.next();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1140">1140</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1141">1141</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.insert(Diff(EQUAL,&nbsp;text_insert.left(commonlength)));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1142">1142</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1143">1143</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text_insert&nbsp;=&nbsp;safeMid(text_insert,&nbsp;commonlength);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1144">1144</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text_delete&nbsp;=&nbsp;safeMid(text_delete,&nbsp;commonlength);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1145">1145</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1146">1146</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Factor&nbsp;out&nbsp;any&nbsp;common&nbsp;suffixies.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1147">1147</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;commonlength&nbsp;=&nbsp;diff_commonSuffix(text_insert,&nbsp;text_delete);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1148">1148</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(commonlength&nbsp;!=&nbsp;0)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1149">1149</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisDiff&nbsp;=&nbsp;&amp;pointer.next();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1150">1150</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisDiff-&gt;text&nbsp;=&nbsp;safeMid(text_insert,&nbsp;text_insert.length()</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1151">1151</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;commonlength)&nbsp;+&nbsp;thisDiff-&gt;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1152">1152</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text_insert&nbsp;=&nbsp;text_insert.left(text_insert.length()</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1153">1153</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;commonlength);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1154">1154</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text_delete&nbsp;=&nbsp;text_delete.left(text_delete.length()</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1155">1155</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;commonlength);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1156">1156</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.previous();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1157">1157</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1158">1158</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1159">1159</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Insert&nbsp;the&nbsp;merged&nbsp;records.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1160">1160</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!text_delete.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1161">1161</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.insert(Diff(DELETE,&nbsp;text_delete));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1162">1162</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1163">1163</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!text_insert.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1164">1164</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.insert(Diff(INSERT,&nbsp;text_insert));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1165">1165</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1166">1166</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Step&nbsp;forward&nbsp;to&nbsp;the&nbsp;equality.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1167">1167</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisDiff&nbsp;=&nbsp;pointer.hasNext()&nbsp;?&nbsp;&amp;pointer.next()&nbsp;:&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1168">1168</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1169">1169</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(prevEqual&nbsp;!=&nbsp;NULL)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1170">1170</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Merge&nbsp;this&nbsp;equality&nbsp;with&nbsp;the&nbsp;previous&nbsp;one.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1171">1171</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prevEqual-&gt;text&nbsp;+=&nbsp;thisDiff-&gt;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1172">1172</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.remove();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1173">1173</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisDiff&nbsp;=&nbsp;&amp;pointer.previous();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1174">1174</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.next();&nbsp;&nbsp;//&nbsp;Forward&nbsp;direction</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1175">1175</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1176">1176</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;count_insert&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1177">1177</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;count_delete&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1178">1178</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text_delete&nbsp;=&nbsp;"";</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1179">1179</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text_insert&nbsp;=&nbsp;"";</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1180">1180</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prevEqual&nbsp;=&nbsp;thisDiff;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1181">1181</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1182">1182</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1183">1183</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisDiff&nbsp;=&nbsp;pointer.hasNext()&nbsp;?&nbsp;&amp;pointer.next()&nbsp;:&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1184">1184</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1185">1185</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(diffs.back().text.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1186">1186</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;diffs.removeLast();&nbsp;&nbsp;//&nbsp;Remove&nbsp;the&nbsp;dummy&nbsp;entry&nbsp;at&nbsp;the&nbsp;end.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1187">1187</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1188">1188</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1189">1189</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;/*</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1190">1190</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;*&nbsp;Second&nbsp;pass:&nbsp;look&nbsp;for&nbsp;single&nbsp;edits&nbsp;surrounded&nbsp;on&nbsp;both&nbsp;sides&nbsp;by&nbsp;equalities</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1191">1191</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;*&nbsp;which&nbsp;can&nbsp;be&nbsp;shifted&nbsp;sideways&nbsp;to&nbsp;eliminate&nbsp;an&nbsp;equality.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1192">1192</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;*&nbsp;e.g:&nbsp;A&lt;ins&gt;BA&lt;/ins&gt;C&nbsp;-&gt;&nbsp;&lt;ins&gt;AB&lt;/ins&gt;AC</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1193">1193</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;*/</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1194">1194</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;bool&nbsp;changes&nbsp;=&nbsp;false;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1195">1195</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Create&nbsp;a&nbsp;new&nbsp;iterator&nbsp;at&nbsp;the&nbsp;start.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1196">1196</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;(As&nbsp;opposed&nbsp;to&nbsp;walking&nbsp;the&nbsp;current&nbsp;one&nbsp;back.)</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1197">1197</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;pointer.toFront();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1198">1198</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Diff&nbsp;*prevDiff&nbsp;=&nbsp;pointer.hasNext()&nbsp;?&nbsp;&amp;pointer.next()&nbsp;:&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1199">1199</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;thisDiff&nbsp;=&nbsp;pointer.hasNext()&nbsp;?&nbsp;&amp;pointer.next()&nbsp;:&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1200">1200</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Diff&nbsp;*nextDiff&nbsp;=&nbsp;pointer.hasNext()&nbsp;?&nbsp;&amp;pointer.next()&nbsp;:&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1201">1201</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1202">1202</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Intentionally&nbsp;ignore&nbsp;the&nbsp;first&nbsp;and&nbsp;last&nbsp;element&nbsp;(don't&nbsp;need&nbsp;checking).</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1203">1203</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;while&nbsp;(nextDiff&nbsp;!=&nbsp;NULL)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1204">1204</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(prevDiff-&gt;operation&nbsp;==&nbsp;EQUAL&nbsp;&amp;&amp;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1205">1205</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nextDiff-&gt;operation&nbsp;==&nbsp;EQUAL)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1206">1206</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;This&nbsp;is&nbsp;a&nbsp;single&nbsp;edit&nbsp;surrounded&nbsp;by&nbsp;equalities.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1207">1207</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(thisDiff-&gt;text.endsWith(prevDiff-&gt;text))&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1208">1208</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Shift&nbsp;the&nbsp;edit&nbsp;over&nbsp;the&nbsp;previous&nbsp;equality.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1209">1209</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisDiff-&gt;text&nbsp;=&nbsp;prevDiff-&gt;text</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1210">1210</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;thisDiff-&gt;text.left(thisDiff-&gt;text.length()</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1211">1211</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;prevDiff-&gt;text.length());</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1212">1212</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nextDiff-&gt;text&nbsp;=&nbsp;prevDiff-&gt;text&nbsp;+&nbsp;nextDiff-&gt;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1213">1213</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.previous();&nbsp;&nbsp;//&nbsp;Walk&nbsp;past&nbsp;nextDiff.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1214">1214</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.previous();&nbsp;&nbsp;//&nbsp;Walk&nbsp;past&nbsp;thisDiff.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1215">1215</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.previous();&nbsp;&nbsp;//&nbsp;Walk&nbsp;past&nbsp;prevDiff.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1216">1216</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.remove();&nbsp;&nbsp;//&nbsp;Delete&nbsp;prevDiff.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1217">1217</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.next();&nbsp;&nbsp;//&nbsp;Walk&nbsp;past&nbsp;thisDiff.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1218">1218</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisDiff&nbsp;=&nbsp;&amp;pointer.next();&nbsp;&nbsp;//&nbsp;Walk&nbsp;past&nbsp;nextDiff.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1219">1219</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nextDiff&nbsp;=&nbsp;pointer.hasNext()&nbsp;?&nbsp;&amp;pointer.next()&nbsp;:&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1220">1220</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;changes&nbsp;=&nbsp;true;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1221">1221</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(thisDiff-&gt;text.startsWith(nextDiff-&gt;text))&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1222">1222</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Shift&nbsp;the&nbsp;edit&nbsp;over&nbsp;the&nbsp;next&nbsp;equality.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1223">1223</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prevDiff-&gt;text&nbsp;+=&nbsp;nextDiff-&gt;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1224">1224</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisDiff-&gt;text&nbsp;=&nbsp;safeMid(thisDiff-&gt;text,&nbsp;nextDiff-&gt;text.length())</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1225">1225</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;nextDiff-&gt;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1226">1226</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.remove();&nbsp;//&nbsp;Delete&nbsp;nextDiff.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1227">1227</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nextDiff&nbsp;=&nbsp;pointer.hasNext()&nbsp;?&nbsp;&amp;pointer.next()&nbsp;:&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1228">1228</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;changes&nbsp;=&nbsp;true;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1229">1229</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1230">1230</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1231">1231</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;prevDiff&nbsp;=&nbsp;thisDiff;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1232">1232</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;thisDiff&nbsp;=&nbsp;nextDiff;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1233">1233</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;nextDiff&nbsp;=&nbsp;pointer.hasNext()&nbsp;?&nbsp;&amp;pointer.next()&nbsp;:&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1234">1234</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1235">1235</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;If&nbsp;shifts&nbsp;were&nbsp;made,&nbsp;the&nbsp;diff&nbsp;needs&nbsp;reordering&nbsp;and&nbsp;another&nbsp;shift&nbsp;sweep.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1236">1236</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(changes)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1237">1237</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;diff_cleanupMerge(diffs);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1238">1238</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1239">1239</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1240">1240</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1241">1241</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1242">1242</td><td wrap="wrap" class="diff_line">int&nbsp;diff_match_patch::diff_xIndex(const&nbsp;QList&lt;Diff&gt;&nbsp;&amp;diffs,&nbsp;int&nbsp;loc)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1243">1243</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;chars1&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1244">1244</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;chars2&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1245">1245</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;last_chars1&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1246">1246</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;last_chars2&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1247">1247</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Diff&nbsp;lastDiff;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1248">1248</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;foreach(Diff&nbsp;aDiff,&nbsp;diffs)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1249">1249</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(aDiff.operation&nbsp;!=&nbsp;INSERT)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1250">1250</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Equality&nbsp;or&nbsp;deletion.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1251">1251</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chars1&nbsp;+=&nbsp;aDiff.text.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1252">1252</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1253">1253</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(aDiff.operation&nbsp;!=&nbsp;DELETE)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1254">1254</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Equality&nbsp;or&nbsp;insertion.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1255">1255</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chars2&nbsp;+=&nbsp;aDiff.text.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1256">1256</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1257">1257</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(chars1&nbsp;&gt;&nbsp;loc)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1258">1258</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Overshot&nbsp;the&nbsp;location.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1259">1259</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lastDiff&nbsp;=&nbsp;aDiff;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1260">1260</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1261">1261</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1262">1262</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;last_chars1&nbsp;=&nbsp;chars1;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1263">1263</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;last_chars2&nbsp;=&nbsp;chars2;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1264">1264</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1265">1265</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(lastDiff.operation&nbsp;==&nbsp;DELETE)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1266">1266</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;location&nbsp;was&nbsp;deleted.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1267">1267</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;last_chars2;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1268">1268</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1269">1269</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Add&nbsp;the&nbsp;remaining&nbsp;character&nbsp;length.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1270">1270</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;last_chars2&nbsp;+&nbsp;(loc&nbsp;-&nbsp;last_chars1);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1271">1271</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1272">1272</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1273">1273</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1274">1274</td><td wrap="wrap" class="diff_line">QString&nbsp;diff_match_patch::diff_prettyHtml(const&nbsp;QList&lt;Diff&gt;&nbsp;&amp;diffs)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1275">1275</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;html;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1276">1276</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1277">1277</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;foreach(Diff&nbsp;aDiff,&nbsp;diffs)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1278">1278</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;text&nbsp;=&nbsp;aDiff.text;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1279">1279</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;text.replace("&amp;",&nbsp;"&amp;amp;").replace("&lt;",&nbsp;"&amp;lt;")</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1280">1280</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.replace("&gt;",&nbsp;"&amp;gt;").replace("\n",&nbsp;"&amp;para;&lt;br&gt;");</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1281">1281</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;switch&nbsp;(aDiff.operation)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1282">1282</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;INSERT:</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1283">1283</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;+=&nbsp;QString("&lt;ins&nbsp;style=\"background:#e6ffe6;\"&gt;")&nbsp;+&nbsp;text</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1284">1284</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;QString("&lt;/ins&gt;");</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1285">1285</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1286">1286</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;DELETE:</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1287">1287</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;+=&nbsp;QString("&lt;del&nbsp;style=\"background:#ffe6e6;\"&gt;")&nbsp;+&nbsp;text</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1288">1288</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;QString("&lt;/del&gt;");</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1289">1289</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1290">1290</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;EQUAL:</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1291">1291</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;+=&nbsp;QString("&lt;span&gt;")&nbsp;+&nbsp;text&nbsp;+&nbsp;QString("&lt;/span&gt;");</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1292">1292</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1293">1293</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1294">1294</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1295">1295</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;html;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1296">1296</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1297">1297</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1298">1298</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1299">1299</td><td wrap="wrap" class="diff_line">QString&nbsp;diff_match_patch::diff_text1(const&nbsp;QList&lt;Diff&gt;&nbsp;&amp;diffs)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1300">1300</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1301">1301</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;foreach(Diff&nbsp;aDiff,&nbsp;diffs)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1302">1302</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(aDiff.operation&nbsp;!=&nbsp;INSERT)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1303">1303</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text&nbsp;+=&nbsp;aDiff.text;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1304">1304</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1305">1305</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1306">1306</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1307">1307</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1308">1308</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1309">1309</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1310">1310</td><td wrap="wrap" class="diff_line">QString&nbsp;diff_match_patch::diff_text2(const&nbsp;QList&lt;Diff&gt;&nbsp;&amp;diffs)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1311">1311</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1312">1312</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;foreach(Diff&nbsp;aDiff,&nbsp;diffs)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1313">1313</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(aDiff.operation&nbsp;!=&nbsp;DELETE)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1314">1314</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text&nbsp;+=&nbsp;aDiff.text;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1315">1315</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1316">1316</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1317">1317</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1318">1318</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1319">1319</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1320">1320</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1321">1321</td><td wrap="wrap" class="diff_line">int&nbsp;diff_match_patch::diff_levenshtein(const&nbsp;QList&lt;Diff&gt;&nbsp;&amp;diffs)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1322">1322</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;levenshtein&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1323">1323</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;insertions&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1324">1324</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;deletions&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1325">1325</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;foreach(Diff&nbsp;aDiff,&nbsp;diffs)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1326">1326</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;switch&nbsp;(aDiff.operation)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1327">1327</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;INSERT:</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1328">1328</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;insertions&nbsp;+=&nbsp;aDiff.text.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1329">1329</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1330">1330</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;DELETE:</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1331">1331</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;deletions&nbsp;+=&nbsp;aDiff.text.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1332">1332</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1333">1333</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;EQUAL:</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1334">1334</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;A&nbsp;deletion&nbsp;and&nbsp;an&nbsp;insertion&nbsp;is&nbsp;one&nbsp;substitution.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1335">1335</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;levenshtein&nbsp;+=&nbsp;std::max(insertions,&nbsp;deletions);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1336">1336</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;insertions&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1337">1337</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;deletions&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1338">1338</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1339">1339</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1340">1340</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1341">1341</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;levenshtein&nbsp;+=&nbsp;std::max(insertions,&nbsp;deletions);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1342">1342</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;levenshtein;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1343">1343</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1344">1344</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1345">1345</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1346">1346</td><td wrap="wrap" class="diff_line">QString&nbsp;diff_match_patch::diff_toDelta(const&nbsp;QList&lt;Diff&gt;&nbsp;&amp;diffs)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1347">1347</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1348">1348</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;foreach(Diff&nbsp;aDiff,&nbsp;diffs)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1349">1349</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;switch&nbsp;(aDiff.operation)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1350">1350</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;INSERT:&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1351">1351</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;QString&nbsp;encoded&nbsp;=&nbsp;QString(QUrl::toPercentEncoding(aDiff.text,</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1352">1352</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;!~*'();/?:@&amp;=+$,#"));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1353">1353</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text&nbsp;+=&nbsp;QString("+")&nbsp;+&nbsp;encoded&nbsp;+&nbsp;QString("\t");</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1354">1354</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1355">1355</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1356">1356</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;DELETE:</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1357">1357</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text&nbsp;+=&nbsp;QString("-")&nbsp;+&nbsp;QString::number(aDiff.text.length())</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1358">1358</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;QString("\t");</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1359">1359</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1360">1360</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;EQUAL:</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1361">1361</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text&nbsp;+=&nbsp;QString("=")&nbsp;+&nbsp;QString::number(aDiff.text.length())</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1362">1362</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;QString("\t");</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1363">1363</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1364">1364</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1365">1365</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1366">1366</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(!text.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1367">1367</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Strip&nbsp;off&nbsp;trailing&nbsp;tab&nbsp;character.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1368">1368</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;text&nbsp;=&nbsp;text.left(text.length()&nbsp;-&nbsp;1);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1369">1369</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1370">1370</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1371">1371</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1372">1372</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1373">1373</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1374">1374</td><td wrap="wrap" class="diff_line">QList&lt;Diff&gt;&nbsp;diff_match_patch::diff_fromDelta(const&nbsp;QString&nbsp;&amp;text1,</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1375">1375</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QString&nbsp;&amp;delta)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1376">1376</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QList&lt;Diff&gt;&nbsp;diffs;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1377">1377</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;pointer&nbsp;=&nbsp;0;&nbsp;&nbsp;//&nbsp;Cursor&nbsp;in&nbsp;text1</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1378">1378</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QStringList&nbsp;tokens&nbsp;=&nbsp;delta.split("\t");</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1379">1379</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;foreach(QString&nbsp;token,&nbsp;tokens)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1380">1380</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(token.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1381">1381</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Blank&nbsp;tokens&nbsp;are&nbsp;ok&nbsp;(from&nbsp;a&nbsp;trailing&nbsp;\t).</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1382">1382</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1383">1383</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1384">1384</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Each&nbsp;token&nbsp;begins&nbsp;with&nbsp;a&nbsp;one&nbsp;character&nbsp;parameter&nbsp;which&nbsp;specifies&nbsp;the</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1385">1385</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;operation&nbsp;of&nbsp;this&nbsp;token&nbsp;(delete,&nbsp;insert,&nbsp;equality).</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1386">1386</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;QString&nbsp;param&nbsp;=&nbsp;safeMid(token,&nbsp;1);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1387">1387</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;switch&nbsp;(token[0].toAscii())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1388">1388</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;'+':</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1389">1389</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;param&nbsp;=&nbsp;QUrl::fromPercentEncoding(qPrintable(param));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1390">1390</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;diffs.append(Diff(INSERT,&nbsp;param));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1391">1391</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1392">1392</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;'-':</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1393">1393</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Fall&nbsp;through.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1394">1394</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;'=':&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1395">1395</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;n;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1396">1396</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;n&nbsp;=&nbsp;param.toInt();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1397">1397</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(n&nbsp;&lt;&nbsp;0)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1398">1398</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;QString("Negative&nbsp;number&nbsp;in&nbsp;diff_fromDelta:&nbsp;%1").arg(param);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1399">1399</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1400">1400</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;QString&nbsp;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1401">1401</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text&nbsp;=&nbsp;safeMid(text1,&nbsp;pointer,&nbsp;n);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1402">1402</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer&nbsp;+=&nbsp;n;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1403">1403</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(token[0]&nbsp;==&nbsp;QChar('='))&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1404">1404</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;diffs.append(Diff(EQUAL,&nbsp;text));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1405">1405</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1406">1406</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;diffs.append(Diff(DELETE,&nbsp;text));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1407">1407</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1408">1408</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1409">1409</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1410">1410</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default:</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1411">1411</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;QString("Invalid&nbsp;diff&nbsp;operation&nbsp;in&nbsp;diff_fromDelta:&nbsp;%1")</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1412">1412</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.arg(token[0]);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1413">1413</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1414">1414</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1415">1415</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(pointer&nbsp;!=&nbsp;text1.length())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1416">1416</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;QString("Delta&nbsp;length&nbsp;(%1)&nbsp;smaller&nbsp;than&nbsp;source&nbsp;text&nbsp;length&nbsp;(%2)")</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1417">1417</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.arg(pointer).arg(text1.length());</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1418">1418</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1419">1419</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;diffs;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1420">1420</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1421">1421</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1422">1422</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1423">1423</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;&nbsp;MATCH&nbsp;FUNCTIONS</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1424">1424</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1425">1425</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1426">1426</td><td wrap="wrap" class="diff_line">int&nbsp;diff_match_patch::match_main(const&nbsp;QString&nbsp;&amp;text,&nbsp;const&nbsp;QString&nbsp;&amp;pattern,</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1427">1427</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;loc)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1428">1428</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Check&nbsp;for&nbsp;null&nbsp;inputs.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1429">1429</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(text.isNull()&nbsp;||&nbsp;pattern.isNull())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1430">1430</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;"Null&nbsp;inputs.&nbsp;(match_main)";</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1431">1431</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1432">1432</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1433">1433</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;loc&nbsp;=&nbsp;std::max(0,&nbsp;std::min(loc,&nbsp;text.length()));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1434">1434</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(text&nbsp;==&nbsp;pattern)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1435">1435</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Shortcut&nbsp;(potentially&nbsp;not&nbsp;guaranteed&nbsp;by&nbsp;the&nbsp;algorithm)</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1436">1436</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1437">1437</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(text.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1438">1438</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Nothing&nbsp;to&nbsp;match.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1439">1439</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;-1;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1440">1440</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(loc&nbsp;+&nbsp;pattern.length()&nbsp;&lt;=&nbsp;text.length()</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1441">1441</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;&nbsp;safeMid(text,&nbsp;loc,&nbsp;pattern.length())&nbsp;==&nbsp;pattern)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1442">1442</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Perfect&nbsp;match&nbsp;at&nbsp;the&nbsp;perfect&nbsp;spot!&nbsp;&nbsp;(Includes&nbsp;case&nbsp;of&nbsp;null&nbsp;pattern)</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1443">1443</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;loc;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1444">1444</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1445">1445</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Do&nbsp;a&nbsp;fuzzy&nbsp;compare.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1446">1446</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;match_bitap(text,&nbsp;pattern,&nbsp;loc);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1447">1447</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1448">1448</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1449">1449</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1450">1450</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1451">1451</td><td wrap="wrap" class="diff_line">int&nbsp;diff_match_patch::match_bitap(const&nbsp;QString&nbsp;&amp;text,&nbsp;const&nbsp;QString&nbsp;&amp;pattern,</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1452">1452</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;loc)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1453">1453</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(!(Match_MaxBits&nbsp;==&nbsp;0&nbsp;||&nbsp;pattern.length()&nbsp;&lt;=&nbsp;Match_MaxBits))&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1454">1454</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;"Pattern&nbsp;too&nbsp;long&nbsp;for&nbsp;this&nbsp;application.";</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1455">1455</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1456">1456</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1457">1457</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Initialise&nbsp;the&nbsp;alphabet.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1458">1458</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QMap&lt;QChar,&nbsp;int&gt;&nbsp;s&nbsp;=&nbsp;match_alphabet(pattern);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1459">1459</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1460">1460</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Highest&nbsp;score&nbsp;beyond&nbsp;which&nbsp;we&nbsp;give&nbsp;up.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1461">1461</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;double&nbsp;score_threshold&nbsp;=&nbsp;Match_Threshold;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1462">1462</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Is&nbsp;there&nbsp;a&nbsp;nearby&nbsp;exact&nbsp;match?&nbsp;(speedup)</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1463">1463</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;best_loc&nbsp;=&nbsp;text.indexOf(pattern,&nbsp;loc);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1464">1464</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(best_loc&nbsp;!=&nbsp;-1)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1465">1465</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;score_threshold&nbsp;=&nbsp;std::min(match_bitapScore(0,&nbsp;best_loc,&nbsp;loc,&nbsp;pattern),</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1466">1466</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;score_threshold);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1467">1467</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;What&nbsp;about&nbsp;in&nbsp;the&nbsp;other&nbsp;direction?&nbsp;(speedup)</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1468">1468</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;best_loc&nbsp;=&nbsp;text.lastIndexOf(pattern,&nbsp;loc&nbsp;+&nbsp;pattern.length());</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1469">1469</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(best_loc&nbsp;!=&nbsp;-1)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1470">1470</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;score_threshold&nbsp;=&nbsp;std::min(match_bitapScore(0,&nbsp;best_loc,&nbsp;loc,&nbsp;pattern),</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1471">1471</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;score_threshold);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1472">1472</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1473">1473</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1474">1474</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1475">1475</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Initialise&nbsp;the&nbsp;bit&nbsp;arrays.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1476">1476</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;matchmask&nbsp;=&nbsp;1&nbsp;&lt;&lt;&nbsp;(pattern.length()&nbsp;-&nbsp;1);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1477">1477</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;best_loc&nbsp;=&nbsp;-1;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1478">1478</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1479">1479</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;bin_min,&nbsp;bin_mid;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1480">1480</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;bin_max&nbsp;=&nbsp;pattern.length()&nbsp;+&nbsp;text.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1481">1481</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;*rd;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1482">1482</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;*last_rd&nbsp;=&nbsp;NULL;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1483">1483</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;for&nbsp;(int&nbsp;d&nbsp;=&nbsp;0;&nbsp;d&nbsp;&lt;&nbsp;pattern.length();&nbsp;d++)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1484">1484</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Scan&nbsp;for&nbsp;the&nbsp;best&nbsp;match;&nbsp;each&nbsp;iteration&nbsp;allows&nbsp;for&nbsp;one&nbsp;more&nbsp;error.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1485">1485</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Run&nbsp;a&nbsp;binary&nbsp;search&nbsp;to&nbsp;determine&nbsp;how&nbsp;far&nbsp;from&nbsp;'loc'&nbsp;we&nbsp;can&nbsp;stray&nbsp;at</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1486">1486</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;this&nbsp;error&nbsp;level.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1487">1487</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;bin_min&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1488">1488</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;bin_mid&nbsp;=&nbsp;bin_max;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1489">1489</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(bin_min&nbsp;&lt;&nbsp;bin_mid)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1490">1490</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(match_bitapScore(d,&nbsp;loc&nbsp;+&nbsp;bin_mid,&nbsp;loc,&nbsp;pattern)</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1491">1491</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;=&nbsp;score_threshold)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1492">1492</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bin_min&nbsp;=&nbsp;bin_mid;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1493">1493</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1494">1494</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bin_max&nbsp;=&nbsp;bin_mid;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1495">1495</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1496">1496</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bin_mid&nbsp;=&nbsp;(bin_max&nbsp;-&nbsp;bin_min)&nbsp;/&nbsp;2&nbsp;+&nbsp;bin_min;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1497">1497</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1498">1498</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Use&nbsp;the&nbsp;result&nbsp;from&nbsp;this&nbsp;iteration&nbsp;as&nbsp;the&nbsp;maximum&nbsp;for&nbsp;the&nbsp;next.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1499">1499</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;bin_max&nbsp;=&nbsp;bin_mid;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1500">1500</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;start&nbsp;=&nbsp;std::max(1,&nbsp;loc&nbsp;-&nbsp;bin_mid&nbsp;+&nbsp;1);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1501">1501</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;finish&nbsp;=&nbsp;std::min(loc&nbsp;+&nbsp;bin_mid,&nbsp;text.length())&nbsp;+&nbsp;pattern.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1502">1502</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1503">1503</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;rd&nbsp;=&nbsp;new&nbsp;int[finish&nbsp;+&nbsp;2];</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1504">1504</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;rd[finish&nbsp;+&nbsp;1]&nbsp;=&nbsp;(1&nbsp;&lt;&lt;&nbsp;d)&nbsp;-&nbsp;1;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1505">1505</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(int&nbsp;j&nbsp;=&nbsp;finish;&nbsp;j&nbsp;&gt;=&nbsp;start;&nbsp;j--)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1506">1506</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;charMatch;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1507">1507</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(text.length()&nbsp;&lt;=&nbsp;j&nbsp;-&nbsp;1)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1508">1508</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Out&nbsp;of&nbsp;range.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1509">1509</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;charMatch&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1510">1510</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1511">1511</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;charMatch&nbsp;=&nbsp;s.value(text[j&nbsp;-&nbsp;1],&nbsp;0);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1512">1512</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1513">1513</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(d&nbsp;==&nbsp;0)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1514">1514</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;First&nbsp;pass:&nbsp;exact&nbsp;match.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1515">1515</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rd[j]&nbsp;=&nbsp;((rd[j&nbsp;+&nbsp;1]&nbsp;&lt;&lt;&nbsp;1)&nbsp;|&nbsp;1)&nbsp;&amp;&nbsp;charMatch;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1516">1516</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1517">1517</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Subsequent&nbsp;passes:&nbsp;fuzzy&nbsp;match.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1518">1518</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rd[j]&nbsp;=&nbsp;((rd[j&nbsp;+&nbsp;1]&nbsp;&lt;&lt;&nbsp;1)&nbsp;|&nbsp;1)&nbsp;&amp;&nbsp;charMatch</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1519">1519</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;(((last_rd[j&nbsp;+&nbsp;1]&nbsp;|&nbsp;last_rd[j])&nbsp;&lt;&lt;&nbsp;1)&nbsp;|&nbsp;1)</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1520">1520</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;last_rd[j&nbsp;+&nbsp;1];</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1521">1521</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1522">1522</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;((rd[j]&nbsp;&amp;&nbsp;matchmask)&nbsp;!=&nbsp;0)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1523">1523</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;double&nbsp;score&nbsp;=&nbsp;match_bitapScore(d,&nbsp;j&nbsp;-&nbsp;1,&nbsp;loc,&nbsp;pattern);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1524">1524</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;This&nbsp;match&nbsp;will&nbsp;almost&nbsp;certainly&nbsp;be&nbsp;better&nbsp;than&nbsp;any&nbsp;existing</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1525">1525</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;match.&nbsp;&nbsp;But&nbsp;check&nbsp;anyway.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1526">1526</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(score&nbsp;&lt;=&nbsp;score_threshold)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1527">1527</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Told&nbsp;you&nbsp;so.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1528">1528</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;score_threshold&nbsp;=&nbsp;score;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1529">1529</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;best_loc&nbsp;=&nbsp;j&nbsp;-&nbsp;1;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1530">1530</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(best_loc&nbsp;&gt;&nbsp;loc)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1531">1531</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;When&nbsp;passing&nbsp;loc,&nbsp;don't&nbsp;exceed&nbsp;our&nbsp;current&nbsp;distance&nbsp;from&nbsp;loc.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1532">1532</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start&nbsp;=&nbsp;std::max(1,&nbsp;2&nbsp;*&nbsp;loc&nbsp;-&nbsp;best_loc);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1533">1533</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1534">1534</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Already&nbsp;passed&nbsp;loc,&nbsp;downhill&nbsp;from&nbsp;here&nbsp;on&nbsp;in.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1535">1535</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1536">1536</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1537">1537</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1538">1538</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1539">1539</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1540">1540</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(match_bitapScore(d&nbsp;+&nbsp;1,&nbsp;loc,&nbsp;loc,&nbsp;pattern)&nbsp;&gt;&nbsp;score_threshold)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1541">1541</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;No&nbsp;hope&nbsp;for&nbsp;a&nbsp;(better)&nbsp;match&nbsp;at&nbsp;greater&nbsp;error&nbsp;levels.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1542">1542</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1543">1543</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1544">1544</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;delete&nbsp;[]&nbsp;last_rd;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1545">1545</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;last_rd&nbsp;=&nbsp;rd;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1546">1546</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1547">1547</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;delete&nbsp;[]&nbsp;last_rd;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1548">1548</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;delete&nbsp;[]&nbsp;rd;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1549">1549</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;best_loc;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1550">1550</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1551">1551</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1552">1552</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1553">1553</td><td wrap="wrap" class="diff_line">double&nbsp;diff_match_patch::match_bitapScore(int&nbsp;e,&nbsp;int&nbsp;x,&nbsp;int&nbsp;loc,</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1554">1554</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QString&nbsp;&amp;pattern)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1555">1555</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;float&nbsp;accuracy&nbsp;=&nbsp;static_cast&lt;float&gt;&nbsp;(e)&nbsp;/&nbsp;pattern.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1556">1556</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;int&nbsp;proximity&nbsp;=&nbsp;qAbs(loc&nbsp;-&nbsp;x);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1557">1557</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(Match_Distance&nbsp;==&nbsp;0)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1558">1558</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Dodge&nbsp;divide&nbsp;by&nbsp;zero&nbsp;error.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1559">1559</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;proximity&nbsp;==&nbsp;0&nbsp;?&nbsp;accuracy&nbsp;:&nbsp;1.0;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1560">1560</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1561">1561</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;accuracy&nbsp;+&nbsp;(proximity&nbsp;/&nbsp;static_cast&lt;float&gt;&nbsp;(Match_Distance));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1562">1562</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1563">1563</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1564">1564</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1565">1565</td><td wrap="wrap" class="diff_line">QMap&lt;QChar,&nbsp;int&gt;&nbsp;diff_match_patch::match_alphabet(const&nbsp;QString&nbsp;&amp;pattern)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1566">1566</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QMap&lt;QChar,&nbsp;int&gt;&nbsp;s;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1567">1567</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;i;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1568">1568</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;pattern.length();&nbsp;i++)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1569">1569</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;QChar&nbsp;c&nbsp;=&nbsp;pattern[i];</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1570">1570</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;s.insert(c,&nbsp;0);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1571">1571</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1572">1572</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;pattern.length();&nbsp;i++)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1573">1573</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;QChar&nbsp;c&nbsp;=&nbsp;pattern[i];</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1574">1574</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;s.insert(c,&nbsp;s.value(c)&nbsp;|&nbsp;(1&nbsp;&lt;&lt;&nbsp;(pattern.length()&nbsp;-&nbsp;i&nbsp;-&nbsp;1)));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1575">1575</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1576">1576</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;s;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1577">1577</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1578">1578</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1579">1579</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1580">1580</td><td wrap="wrap" class="diff_line">//&nbsp;&nbsp;PATCH&nbsp;FUNCTIONS</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1581">1581</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1582">1582</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1583">1583</td><td wrap="wrap" class="diff_line">void&nbsp;diff_match_patch::patch_addContext(Patch&nbsp;&amp;patch,&nbsp;const&nbsp;QString&nbsp;&amp;text)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1584">1584</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(text.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1585">1585</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1586">1586</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1587">1587</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;pattern&nbsp;=&nbsp;safeMid(text,&nbsp;patch.start2,&nbsp;patch.length1);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1588">1588</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;padding&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1589">1589</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1590">1590</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Look&nbsp;for&nbsp;the&nbsp;first&nbsp;and&nbsp;last&nbsp;matches&nbsp;of&nbsp;pattern&nbsp;in&nbsp;text.&nbsp;&nbsp;If&nbsp;two&nbsp;different</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1591">1591</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;matches&nbsp;are&nbsp;found,&nbsp;increase&nbsp;the&nbsp;pattern&nbsp;length.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1592">1592</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;while&nbsp;(text.indexOf(pattern)&nbsp;!=&nbsp;text.lastIndexOf(pattern)</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1593">1593</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;&nbsp;pattern.length()&nbsp;&lt;&nbsp;Match_MaxBits&nbsp;-&nbsp;Patch_Margin&nbsp;-&nbsp;Patch_Margin)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1594">1594</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;padding&nbsp;+=&nbsp;Patch_Margin;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1595">1595</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;pattern&nbsp;=&nbsp;safeMid(text,&nbsp;std::max(0,&nbsp;patch.start2&nbsp;-&nbsp;padding),</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1596">1596</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::min(text.length(),&nbsp;patch.start2&nbsp;+&nbsp;patch.length1&nbsp;+&nbsp;padding)</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1597">1597</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;std::max(0,&nbsp;patch.start2&nbsp;-&nbsp;padding));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1598">1598</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1599">1599</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Add&nbsp;one&nbsp;chunk&nbsp;for&nbsp;good&nbsp;luck.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1600">1600</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;padding&nbsp;+=&nbsp;Patch_Margin;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1601">1601</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1602">1602</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Add&nbsp;the&nbsp;prefix.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1603">1603</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;prefix&nbsp;=&nbsp;safeMid(text,&nbsp;std::max(0,&nbsp;patch.start2&nbsp;-&nbsp;padding),</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1604">1604</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.start2&nbsp;-&nbsp;std::max(0,&nbsp;patch.start2&nbsp;-&nbsp;padding));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1605">1605</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(!prefix.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1606">1606</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;patch.diffs.prepend(Diff(EQUAL,&nbsp;prefix));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1607">1607</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1608">1608</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Add&nbsp;the&nbsp;suffix.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1609">1609</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;suffix&nbsp;=&nbsp;safeMid(text,&nbsp;patch.start2&nbsp;+&nbsp;patch.length1,</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1610">1610</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::min(text.length(),&nbsp;patch.start2&nbsp;+&nbsp;patch.length1&nbsp;+&nbsp;padding)</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1611">1611</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;(patch.start2&nbsp;+&nbsp;patch.length1));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1612">1612</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(!suffix.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1613">1613</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;patch.diffs.append(Diff(EQUAL,&nbsp;suffix));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1614">1614</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1615">1615</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1616">1616</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Roll&nbsp;back&nbsp;the&nbsp;start&nbsp;points.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1617">1617</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;patch.start1&nbsp;-=&nbsp;prefix.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1618">1618</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;patch.start2&nbsp;-=&nbsp;prefix.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1619">1619</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Extend&nbsp;the&nbsp;lengths.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1620">1620</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;patch.length1&nbsp;+=&nbsp;prefix.length()&nbsp;+&nbsp;suffix.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1621">1621</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;patch.length2&nbsp;+=&nbsp;prefix.length()&nbsp;+&nbsp;suffix.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1622">1622</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1623">1623</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1624">1624</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1625">1625</td><td wrap="wrap" class="diff_line">QList&lt;Patch&gt;&nbsp;diff_match_patch::patch_make(const&nbsp;QString&nbsp;&amp;text1,</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1626">1626</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QString&nbsp;&amp;text2)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1627">1627</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Check&nbsp;for&nbsp;null&nbsp;inputs.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1628">1628</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(text1.isNull()&nbsp;||&nbsp;text2.isNull())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1629">1629</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;"Null&nbsp;inputs.&nbsp;(patch_make)";</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1630">1630</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1631">1631</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1632">1632</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;No&nbsp;diffs&nbsp;provided,&nbsp;compute&nbsp;our&nbsp;own.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1633">1633</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QList&lt;Diff&gt;&nbsp;diffs&nbsp;=&nbsp;diff_main(text1,&nbsp;text2,&nbsp;true);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1634">1634</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(diffs.size()&nbsp;&gt;&nbsp;2)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1635">1635</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;diff_cleanupSemantic(diffs);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1636">1636</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;diff_cleanupEfficiency(diffs);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1637">1637</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1638">1638</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1639">1639</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;patch_make(text1,&nbsp;diffs);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1640">1640</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1641">1641</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1642">1642</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1643">1643</td><td wrap="wrap" class="diff_line">QList&lt;Patch&gt;&nbsp;diff_match_patch::patch_make(const&nbsp;QList&lt;Diff&gt;&nbsp;&amp;diffs)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1644">1644</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;No&nbsp;origin&nbsp;string&nbsp;provided,&nbsp;compute&nbsp;our&nbsp;own.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1645">1645</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;const&nbsp;QString&nbsp;text1&nbsp;=&nbsp;diff_text1(diffs);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1646">1646</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;patch_make(text1,&nbsp;diffs);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1647">1647</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1648">1648</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1649">1649</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1650">1650</td><td wrap="wrap" class="diff_line">QList&lt;Patch&gt;&nbsp;diff_match_patch::patch_make(const&nbsp;QString&nbsp;&amp;text1,</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1651">1651</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QString&nbsp;&amp;text2,</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1652">1652</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QList&lt;Diff&gt;&nbsp;&amp;diffs)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1653">1653</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;text2&nbsp;is&nbsp;entirely&nbsp;unused.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1654">1654</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;patch_make(text1,&nbsp;diffs);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1655">1655</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1656">1656</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Q_UNUSED(text2)</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1657">1657</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1658">1658</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1659">1659</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1660">1660</td><td wrap="wrap" class="diff_line">QList&lt;Patch&gt;&nbsp;diff_match_patch::patch_make(const&nbsp;QString&nbsp;&amp;text1,</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1661">1661</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;QList&lt;Diff&gt;&nbsp;&amp;diffs)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1662">1662</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Check&nbsp;for&nbsp;null&nbsp;inputs.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1663">1663</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(text1.isNull())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1664">1664</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;"Null&nbsp;inputs.&nbsp;(patch_make)";</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1665">1665</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1666">1666</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1667">1667</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QList&lt;Patch&gt;&nbsp;patches;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1668">1668</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(diffs.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1669">1669</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;patches;&nbsp;&nbsp;//&nbsp;Get&nbsp;rid&nbsp;of&nbsp;the&nbsp;null&nbsp;case.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1670">1670</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1671">1671</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Patch&nbsp;patch;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1672">1672</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;char_count1&nbsp;=&nbsp;0;&nbsp;&nbsp;//&nbsp;Number&nbsp;of&nbsp;characters&nbsp;into&nbsp;the&nbsp;text1&nbsp;string.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1673">1673</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;char_count2&nbsp;=&nbsp;0;&nbsp;&nbsp;//&nbsp;Number&nbsp;of&nbsp;characters&nbsp;into&nbsp;the&nbsp;text2&nbsp;string.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1674">1674</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Start&nbsp;with&nbsp;text1&nbsp;(prepatch_text)&nbsp;and&nbsp;apply&nbsp;the&nbsp;diffs&nbsp;until&nbsp;we&nbsp;arrive&nbsp;at</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1675">1675</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;text2&nbsp;(postpatch_text).&nbsp;&nbsp;We&nbsp;recreate&nbsp;the&nbsp;patches&nbsp;one&nbsp;by&nbsp;one&nbsp;to&nbsp;determine</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1676">1676</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;context&nbsp;info.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1677">1677</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;prepatch_text&nbsp;=&nbsp;text1;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1678">1678</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;postpatch_text&nbsp;=&nbsp;text1;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1679">1679</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;foreach(Diff&nbsp;aDiff,&nbsp;diffs)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1680">1680</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(patch.diffs.isEmpty()&nbsp;&amp;&amp;&nbsp;aDiff.operation&nbsp;!=&nbsp;EQUAL)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1681">1681</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;A&nbsp;new&nbsp;patch&nbsp;starts&nbsp;here.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1682">1682</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.start1&nbsp;=&nbsp;char_count1;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1683">1683</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.start2&nbsp;=&nbsp;char_count2;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1684">1684</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1685">1685</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1686">1686</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;switch&nbsp;(aDiff.operation)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1687">1687</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;INSERT:</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1688">1688</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.diffs.append(aDiff);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1689">1689</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.length2&nbsp;+=&nbsp;aDiff.text.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1690">1690</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;postpatch_text&nbsp;=&nbsp;postpatch_text.left(char_count2)</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1691">1691</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;aDiff.text&nbsp;+&nbsp;safeMid(postpatch_text,&nbsp;char_count2);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1692">1692</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1693">1693</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;DELETE:</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1694">1694</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.length1&nbsp;+=&nbsp;aDiff.text.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1695">1695</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.diffs.append(aDiff);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1696">1696</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;postpatch_text&nbsp;=&nbsp;postpatch_text.left(char_count2)</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1697">1697</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;safeMid(postpatch_text,&nbsp;char_count2&nbsp;+&nbsp;aDiff.text.length());</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1698">1698</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1699">1699</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;EQUAL:</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1700">1700</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(aDiff.text.length()&nbsp;&lt;=&nbsp;2&nbsp;*&nbsp;Patch_Margin</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1701">1701</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;&nbsp;!patch.diffs.isEmpty()&nbsp;&amp;&amp;&nbsp;!(aDiff&nbsp;==&nbsp;diffs.back()))&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1702">1702</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Small&nbsp;equality&nbsp;inside&nbsp;a&nbsp;patch.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1703">1703</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.diffs.append(aDiff);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1704">1704</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.length1&nbsp;+=&nbsp;aDiff.text.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1705">1705</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.length2&nbsp;+=&nbsp;aDiff.text.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1706">1706</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1707">1707</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1708">1708</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(aDiff.text.length()&nbsp;&gt;=&nbsp;2&nbsp;*&nbsp;Patch_Margin)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1709">1709</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Time&nbsp;for&nbsp;a&nbsp;new&nbsp;patch.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1710">1710</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!patch.diffs.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1711">1711</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch_addContext(patch,&nbsp;prepatch_text);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1712">1712</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patches.append(patch);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1713">1713</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch&nbsp;=&nbsp;Patch();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1714">1714</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Unlike&nbsp;Unidiff,&nbsp;our&nbsp;patch&nbsp;lists&nbsp;have&nbsp;a&nbsp;rolling&nbsp;context.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1715">1715</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;http://code.google.com/p/google-diff-match-patch/wiki/Unidiff</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1716">1716</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Update&nbsp;prepatch&nbsp;text&nbsp;&amp;&nbsp;pos&nbsp;to&nbsp;reflect&nbsp;the&nbsp;application&nbsp;of&nbsp;the</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1717">1717</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;just&nbsp;completed&nbsp;patch.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1718">1718</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prepatch_text&nbsp;=&nbsp;postpatch_text;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1719">1719</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char_count1&nbsp;=&nbsp;char_count2;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1720">1720</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1721">1721</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1722">1722</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1723">1723</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1724">1724</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1725">1725</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Update&nbsp;the&nbsp;current&nbsp;character&nbsp;count.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1726">1726</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(aDiff.operation&nbsp;!=&nbsp;INSERT)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1727">1727</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char_count1&nbsp;+=&nbsp;aDiff.text.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1728">1728</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1729">1729</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(aDiff.operation&nbsp;!=&nbsp;DELETE)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1730">1730</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char_count2&nbsp;+=&nbsp;aDiff.text.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1731">1731</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1732">1732</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1733">1733</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Pick&nbsp;up&nbsp;the&nbsp;leftover&nbsp;patch&nbsp;if&nbsp;not&nbsp;empty.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1734">1734</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(!patch.diffs.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1735">1735</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;patch_addContext(patch,&nbsp;prepatch_text);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1736">1736</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;patches.append(patch);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1737">1737</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1738">1738</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1739">1739</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;patches;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1740">1740</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1741">1741</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1742">1742</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1743">1743</td><td wrap="wrap" class="diff_line">QList&lt;Patch&gt;&nbsp;diff_match_patch::patch_deepCopy(QList&lt;Patch&gt;&nbsp;&amp;patches)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1744">1744</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QList&lt;Patch&gt;&nbsp;patchesCopy;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1745">1745</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;foreach(Patch&nbsp;aPatch,&nbsp;patches)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1746">1746</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;Patch&nbsp;patchCopy&nbsp;=&nbsp;Patch();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1747">1747</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;foreach(Diff&nbsp;aDiff,&nbsp;aPatch.diffs)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1748">1748</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Diff&nbsp;diffCopy&nbsp;=&nbsp;Diff(aDiff.operation,&nbsp;aDiff.text);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1749">1749</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patchCopy.diffs.append(diffCopy);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1750">1750</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1751">1751</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;patchCopy.start1&nbsp;=&nbsp;aPatch.start1;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1752">1752</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;patchCopy.start2&nbsp;=&nbsp;aPatch.start2;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1753">1753</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;patchCopy.length1&nbsp;=&nbsp;aPatch.length1;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1754">1754</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;patchCopy.length2&nbsp;=&nbsp;aPatch.length2;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1755">1755</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;patchesCopy.append(patchCopy);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1756">1756</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1757">1757</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;patchesCopy;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1758">1758</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1759">1759</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1760">1760</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1761">1761</td><td wrap="wrap" class="diff_line">QPair&lt;QString,&nbsp;QVector&lt;bool&gt;&nbsp;&gt;&nbsp;diff_match_patch::patch_apply(</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1762">1762</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;QList&lt;Patch&gt;&nbsp;&amp;patches,&nbsp;const&nbsp;QString&nbsp;&amp;sourceText)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1763">1763</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;text&nbsp;=&nbsp;sourceText;&nbsp;&nbsp;//&nbsp;Copy&nbsp;to&nbsp;preserve&nbsp;original.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1764">1764</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(patches.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1765">1765</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;QPair&lt;QString,QVector&lt;bool&gt;&nbsp;&gt;(text,&nbsp;QVector&lt;bool&gt;(0));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1766">1766</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1767">1767</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1768">1768</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Deep&nbsp;copy&nbsp;the&nbsp;patches&nbsp;so&nbsp;that&nbsp;no&nbsp;changes&nbsp;are&nbsp;made&nbsp;to&nbsp;originals.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1769">1769</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QList&lt;Patch&gt;&nbsp;patchesCopy&nbsp;=&nbsp;patch_deepCopy(patches);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1770">1770</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1771">1771</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;nullPadding&nbsp;=&nbsp;patch_addPadding(patchesCopy);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1772">1772</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;text&nbsp;=&nbsp;nullPadding&nbsp;+&nbsp;text&nbsp;+&nbsp;nullPadding;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1773">1773</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;patch_splitMax(patchesCopy);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1774">1774</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1775">1775</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;x&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1776">1776</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;delta&nbsp;keeps&nbsp;track&nbsp;of&nbsp;the&nbsp;offset&nbsp;between&nbsp;the&nbsp;expected&nbsp;and&nbsp;actual&nbsp;location</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1777">1777</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;of&nbsp;the&nbsp;previous&nbsp;patch.&nbsp;&nbsp;If&nbsp;there&nbsp;are&nbsp;patches&nbsp;expected&nbsp;at&nbsp;positions&nbsp;10&nbsp;and</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1778">1778</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;20,&nbsp;but&nbsp;the&nbsp;first&nbsp;patch&nbsp;was&nbsp;found&nbsp;at&nbsp;12,&nbsp;delta&nbsp;is&nbsp;2&nbsp;and&nbsp;the&nbsp;second&nbsp;patch</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1779">1779</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;has&nbsp;an&nbsp;effective&nbsp;expected&nbsp;position&nbsp;of&nbsp;22.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1780">1780</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;delta&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1781">1781</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QVector&lt;bool&gt;&nbsp;results(patchesCopy.size());</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1782">1782</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;foreach(Patch&nbsp;aPatch,&nbsp;patchesCopy)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1783">1783</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;expected_loc&nbsp;=&nbsp;aPatch.start2&nbsp;+&nbsp;delta;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1784">1784</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;QString&nbsp;text1&nbsp;=&nbsp;diff_text1(aPatch.diffs);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1785">1785</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;start_loc;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1786">1786</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;end_loc&nbsp;=&nbsp;-1;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1787">1787</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(text1.length()&nbsp;&gt;&nbsp;Match_MaxBits)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1788">1788</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;patch_splitMax&nbsp;will&nbsp;only&nbsp;provide&nbsp;an&nbsp;oversized&nbsp;pattern&nbsp;in&nbsp;the&nbsp;case&nbsp;of</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1789">1789</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;a&nbsp;monster&nbsp;delete.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1790">1790</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_loc&nbsp;=&nbsp;match_main(text,&nbsp;text1.left(Match_MaxBits),&nbsp;expected_loc);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1791">1791</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(start_loc&nbsp;!=&nbsp;-1)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1792">1792</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end_loc&nbsp;=&nbsp;match_main(text,&nbsp;text1.right(Match_MaxBits),</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1793">1793</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expected_loc&nbsp;+&nbsp;text1.length()&nbsp;-&nbsp;Match_MaxBits);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1794">1794</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(end_loc&nbsp;==&nbsp;-1&nbsp;||&nbsp;start_loc&nbsp;&gt;=&nbsp;end_loc)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1795">1795</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Can't&nbsp;find&nbsp;valid&nbsp;trailing&nbsp;context.&nbsp;&nbsp;Drop&nbsp;this&nbsp;patch.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1796">1796</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_loc&nbsp;=&nbsp;-1;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1797">1797</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1798">1798</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1799">1799</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1800">1800</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_loc&nbsp;=&nbsp;match_main(text,&nbsp;text1,&nbsp;expected_loc);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1801">1801</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1802">1802</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(start_loc&nbsp;==&nbsp;-1)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1803">1803</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;No&nbsp;match&nbsp;found.&nbsp;&nbsp;:(</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1804">1804</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;results[x]&nbsp;=&nbsp;false;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1805">1805</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Subtract&nbsp;the&nbsp;delta&nbsp;for&nbsp;this&nbsp;failed&nbsp;patch&nbsp;from&nbsp;subsequent&nbsp;patches.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1806">1806</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delta&nbsp;-=&nbsp;aPatch.length2&nbsp;-&nbsp;aPatch.length1;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1807">1807</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1808">1808</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Found&nbsp;a&nbsp;match.&nbsp;&nbsp;:)</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1809">1809</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;results[x]&nbsp;=&nbsp;true;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1810">1810</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delta&nbsp;=&nbsp;start_loc&nbsp;-&nbsp;expected_loc;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1811">1811</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;QString&nbsp;text2;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1812">1812</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(end_loc&nbsp;==&nbsp;-1)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1813">1813</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text2&nbsp;=&nbsp;safeMid(text,&nbsp;start_loc,&nbsp;text1.length());</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1814">1814</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1815">1815</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text2&nbsp;=&nbsp;safeMid(text,&nbsp;start_loc,&nbsp;end_loc&nbsp;+&nbsp;Match_MaxBits&nbsp;-&nbsp;start_loc);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1816">1816</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1817">1817</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(text1&nbsp;==&nbsp;text2)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1818">1818</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Perfect&nbsp;match,&nbsp;just&nbsp;shove&nbsp;the&nbsp;replacement&nbsp;text&nbsp;in.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1819">1819</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text&nbsp;=&nbsp;text.left(start_loc)&nbsp;+&nbsp;diff_text2(aPatch.diffs)</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1820">1820</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;safeMid(text,&nbsp;start_loc&nbsp;+&nbsp;text1.length());</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1821">1821</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1822">1822</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Imperfect&nbsp;match.&nbsp;&nbsp;Run&nbsp;a&nbsp;diff&nbsp;to&nbsp;get&nbsp;a&nbsp;framework&nbsp;of&nbsp;equivalent</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1823">1823</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;indices.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1824">1824</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;QList&lt;Diff&gt;&nbsp;diffs&nbsp;=&nbsp;diff_main(text1,&nbsp;text2,&nbsp;false);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1825">1825</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(text1.length()&nbsp;&gt;&nbsp;Match_MaxBits</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1826">1826</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;&nbsp;diff_levenshtein(diffs)&nbsp;/&nbsp;static_cast&lt;float&gt;&nbsp;(text1.length())</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1827">1827</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;Patch_DeleteThreshold)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1828">1828</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;end&nbsp;points&nbsp;match,&nbsp;but&nbsp;the&nbsp;content&nbsp;is&nbsp;unacceptably&nbsp;bad.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1829">1829</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;results[x]&nbsp;=&nbsp;false;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1830">1830</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1831">1831</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;diff_cleanupSemanticLossless(diffs);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1832">1832</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;index1&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1833">1833</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach(Diff&nbsp;aDiff,&nbsp;aPatch.diffs)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1834">1834</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(aDiff.operation&nbsp;!=&nbsp;EQUAL)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1835">1835</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;index2&nbsp;=&nbsp;diff_xIndex(diffs,&nbsp;index1);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1836">1836</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(aDiff.operation&nbsp;==&nbsp;INSERT)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1837">1837</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Insertion</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1838">1838</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text&nbsp;=&nbsp;text.left(start_loc&nbsp;+&nbsp;index2)&nbsp;+&nbsp;aDiff.text</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1839">1839</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;safeMid(text,&nbsp;start_loc&nbsp;+&nbsp;index2);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1840">1840</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(aDiff.operation&nbsp;==&nbsp;DELETE)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1841">1841</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Deletion</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1842">1842</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text&nbsp;=&nbsp;text.left(start_loc&nbsp;+&nbsp;index2)</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1843">1843</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;safeMid(text,&nbsp;start_loc&nbsp;+&nbsp;diff_xIndex(diffs,</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1844">1844</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;index1&nbsp;+&nbsp;aDiff.text.length()));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1845">1845</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1846">1846</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1847">1847</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(aDiff.operation&nbsp;!=&nbsp;DELETE)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1848">1848</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;index1&nbsp;+=&nbsp;aDiff.text.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1849">1849</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1850">1850</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1851">1851</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1852">1852</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1853">1853</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1854">1854</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;x++;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1855">1855</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1856">1856</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Strip&nbsp;the&nbsp;padding&nbsp;off.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1857">1857</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;text&nbsp;=&nbsp;safeMid(text,&nbsp;nullPadding.length(),&nbsp;text.length()</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1858">1858</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;2&nbsp;*&nbsp;nullPadding.length());</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1859">1859</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;QPair&lt;QString,&nbsp;QVector&lt;bool&gt;&nbsp;&gt;(text,&nbsp;results);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1860">1860</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1861">1861</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1862">1862</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1863">1863</td><td wrap="wrap" class="diff_line">QString&nbsp;diff_match_patch::patch_addPadding(QList&lt;Patch&gt;&nbsp;&amp;patches)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1864">1864</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;short&nbsp;paddingLength&nbsp;=&nbsp;Patch_Margin;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1865">1865</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;nullPadding&nbsp;=&nbsp;"";</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1866">1866</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;for&nbsp;(short&nbsp;x&nbsp;=&nbsp;1;&nbsp;x&nbsp;&lt;=&nbsp;paddingLength;&nbsp;x++)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1867">1867</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;nullPadding&nbsp;+=&nbsp;QChar((ushort)x);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1868">1868</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1869">1869</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1870">1870</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Bump&nbsp;all&nbsp;the&nbsp;patches&nbsp;forward.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1871">1871</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QMutableListIterator&lt;Patch&gt;&nbsp;pointer(patches);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1872">1872</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;while&nbsp;(pointer.hasNext())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1873">1873</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;Patch&nbsp;&amp;aPatch&nbsp;=&nbsp;pointer.next();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1874">1874</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;aPatch.start1&nbsp;+=&nbsp;paddingLength;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1875">1875</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;aPatch.start2&nbsp;+=&nbsp;paddingLength;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1876">1876</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1877">1877</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1878">1878</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Add&nbsp;some&nbsp;padding&nbsp;on&nbsp;start&nbsp;of&nbsp;first&nbsp;diff.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1879">1879</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Patch&nbsp;&amp;firstPatch&nbsp;=&nbsp;patches.first();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1880">1880</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QList&lt;Diff&gt;&nbsp;&amp;firstPatchDiffs&nbsp;=&nbsp;firstPatch.diffs;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1881">1881</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(firstPatchDiffs.empty()&nbsp;||&nbsp;firstPatchDiffs.first().operation&nbsp;!=&nbsp;EQUAL)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1882">1882</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Add&nbsp;nullPadding&nbsp;equality.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1883">1883</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;firstPatchDiffs.prepend(Diff(EQUAL,&nbsp;nullPadding));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1884">1884</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;firstPatch.start1&nbsp;-=&nbsp;paddingLength;&nbsp;&nbsp;//&nbsp;Should&nbsp;be&nbsp;0.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1885">1885</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;firstPatch.start2&nbsp;-=&nbsp;paddingLength;&nbsp;&nbsp;//&nbsp;Should&nbsp;be&nbsp;0.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1886">1886</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;firstPatch.length1&nbsp;+=&nbsp;paddingLength;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1887">1887</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;firstPatch.length2&nbsp;+=&nbsp;paddingLength;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1888">1888</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(paddingLength&nbsp;&gt;&nbsp;firstPatchDiffs.first().text.length())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1889">1889</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Grow&nbsp;first&nbsp;equality.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1890">1890</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;Diff&nbsp;&amp;firstDiff&nbsp;=&nbsp;firstPatchDiffs.first();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1891">1891</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;extraLength&nbsp;=&nbsp;paddingLength&nbsp;-&nbsp;firstDiff.text.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1892">1892</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;firstDiff.text&nbsp;=&nbsp;safeMid(nullPadding,&nbsp;firstDiff.text.length(),</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1893">1893</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;paddingLength&nbsp;-&nbsp;firstDiff.text.length())&nbsp;+&nbsp;firstDiff.text;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1894">1894</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;firstPatch.start1&nbsp;-=&nbsp;extraLength;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1895">1895</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;firstPatch.start2&nbsp;-=&nbsp;extraLength;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1896">1896</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;firstPatch.length1&nbsp;+=&nbsp;extraLength;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1897">1897</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;firstPatch.length2&nbsp;+=&nbsp;extraLength;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1898">1898</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1899">1899</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1900">1900</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;//&nbsp;Add&nbsp;some&nbsp;padding&nbsp;on&nbsp;end&nbsp;of&nbsp;last&nbsp;diff.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1901">1901</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Patch&nbsp;&amp;lastPatch&nbsp;=&nbsp;patches.first();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1902">1902</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QList&lt;Diff&gt;&nbsp;&amp;lastPatchDiffs&nbsp;=&nbsp;lastPatch.diffs;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1903">1903</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(lastPatchDiffs.empty()&nbsp;||&nbsp;lastPatchDiffs.last().operation&nbsp;!=&nbsp;EQUAL)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1904">1904</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Add&nbsp;nullPadding&nbsp;equality.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1905">1905</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;lastPatchDiffs.append(Diff(EQUAL,&nbsp;nullPadding));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1906">1906</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;lastPatch.length1&nbsp;+=&nbsp;paddingLength;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1907">1907</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;lastPatch.length2&nbsp;+=&nbsp;paddingLength;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1908">1908</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(paddingLength&nbsp;&gt;&nbsp;lastPatchDiffs.last().text.length())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1909">1909</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Grow&nbsp;last&nbsp;equality.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1910">1910</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;Diff&nbsp;&amp;lastDiff&nbsp;=&nbsp;lastPatchDiffs.last();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1911">1911</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;extraLength&nbsp;=&nbsp;paddingLength&nbsp;-&nbsp;lastDiff.text.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1912">1912</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;lastDiff.text&nbsp;+=&nbsp;nullPadding.left(extraLength);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1913">1913</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;lastPatch.length1&nbsp;+=&nbsp;extraLength;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1914">1914</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;lastPatch.length2&nbsp;+=&nbsp;extraLength;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1915">1915</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1916">1916</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1917">1917</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;nullPadding;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1918">1918</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1919">1919</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1920">1920</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1921">1921</td><td wrap="wrap" class="diff_line">void&nbsp;diff_match_patch::patch_splitMax(QList&lt;Patch&gt;&nbsp;&amp;patches)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1922">1922</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;short&nbsp;patch_size&nbsp;=&nbsp;Match_MaxBits;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1923">1923</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;precontext,&nbsp;postcontext;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1924">1924</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Patch&nbsp;patch;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1925">1925</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;int&nbsp;start1,&nbsp;start2;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1926">1926</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;bool&nbsp;empty;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1927">1927</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Operation&nbsp;diff_type;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1928">1928</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;diff_text;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1929">1929</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QMutableListIterator&lt;Patch&gt;&nbsp;pointer(patches);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1930">1930</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Patch&nbsp;bigpatch;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1931">1931</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1932">1932</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(pointer.hasNext())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1933">1933</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;bigpatch&nbsp;=&nbsp;pointer.next();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1934">1934</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1935">1935</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1936">1936</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;while&nbsp;(!bigpatch.isNull())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1937">1937</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(bigpatch.length1&nbsp;&lt;=&nbsp;patch_size)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1938">1938</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bigpatch&nbsp;=&nbsp;pointer.hasNext()&nbsp;?&nbsp;pointer.next()&nbsp;:&nbsp;Patch();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1939">1939</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1940">1940</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1941">1941</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Remove&nbsp;the&nbsp;big&nbsp;old&nbsp;patch.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1942">1942</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;pointer.remove();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1943">1943</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;start1&nbsp;=&nbsp;bigpatch.start1;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1944">1944</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;start2&nbsp;=&nbsp;bigpatch.start2;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1945">1945</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;precontext&nbsp;=&nbsp;"";</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1946">1946</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(!bigpatch.diffs.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1947">1947</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Create&nbsp;one&nbsp;of&nbsp;several&nbsp;smaller&nbsp;patches.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1948">1948</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch&nbsp;=&nbsp;Patch();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1949">1949</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;empty&nbsp;=&nbsp;true;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1950">1950</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.start1&nbsp;=&nbsp;start1&nbsp;-&nbsp;precontext.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1951">1951</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.start2&nbsp;=&nbsp;start2&nbsp;-&nbsp;precontext.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1952">1952</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!precontext.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1953">1953</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.length1&nbsp;=&nbsp;patch.length2&nbsp;=&nbsp;precontext.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1954">1954</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.diffs.append(Diff(EQUAL,&nbsp;precontext));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1955">1955</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1956">1956</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(!bigpatch.diffs.isEmpty()</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1957">1957</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;&nbsp;patch.length1&nbsp;&lt;&nbsp;patch_size&nbsp;-&nbsp;Patch_Margin)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1958">1958</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;diff_type&nbsp;=&nbsp;bigpatch.diffs.front().operation;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1959">1959</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;diff_text&nbsp;=&nbsp;bigpatch.diffs.front().text;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1960">1960</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(diff_type&nbsp;==&nbsp;INSERT)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1961">1961</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Insertions&nbsp;are&nbsp;harmless.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1962">1962</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.length2&nbsp;+=&nbsp;diff_text.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1963">1963</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start2&nbsp;+=&nbsp;diff_text.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1964">1964</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.diffs.append(bigpatch.diffs.front());</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1965">1965</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bigpatch.diffs.removeFirst();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1966">1966</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;empty&nbsp;=&nbsp;false;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1967">1967</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(diff_type&nbsp;==&nbsp;DELETE&nbsp;&amp;&amp;&nbsp;patch.diffs.size()&nbsp;==&nbsp;1</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1968">1968</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;&nbsp;patch.diffs.front().operation&nbsp;==&nbsp;EQUAL</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1969">1969</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;&nbsp;diff_text.length()&nbsp;&gt;&nbsp;2&nbsp;*&nbsp;patch_size)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1970">1970</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;This&nbsp;is&nbsp;a&nbsp;large&nbsp;deletion.&nbsp;&nbsp;Let&nbsp;it&nbsp;pass&nbsp;in&nbsp;one&nbsp;chunk.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1971">1971</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.length1&nbsp;+=&nbsp;diff_text.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1972">1972</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start1&nbsp;+=&nbsp;diff_text.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1973">1973</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;empty&nbsp;=&nbsp;false;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1974">1974</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.diffs.append(Diff(diff_type,&nbsp;diff_text));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1975">1975</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bigpatch.diffs.removeFirst();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1976">1976</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1977">1977</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Deletion&nbsp;or&nbsp;equality.&nbsp;&nbsp;Only&nbsp;take&nbsp;as&nbsp;much&nbsp;as&nbsp;we&nbsp;can&nbsp;stomach.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1978">1978</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;diff_text&nbsp;=&nbsp;diff_text.left(std::min(diff_text.length(),</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1979">1979</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch_size&nbsp;-&nbsp;patch.length1&nbsp;-&nbsp;Patch_Margin));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1980">1980</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.length1&nbsp;+=&nbsp;diff_text.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1981">1981</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start1&nbsp;+=&nbsp;diff_text.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1982">1982</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(diff_type&nbsp;==&nbsp;EQUAL)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1983">1983</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.length2&nbsp;+=&nbsp;diff_text.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1984">1984</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start2&nbsp;+=&nbsp;diff_text.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1985">1985</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1986">1986</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;empty&nbsp;=&nbsp;false;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1987">1987</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1988">1988</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.diffs.append(Diff(diff_type,&nbsp;diff_text));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1989">1989</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(diff_text&nbsp;==&nbsp;bigpatch.diffs.front().text)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1990">1990</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bigpatch.diffs.removeFirst();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1991">1991</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1992">1992</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bigpatch.diffs.front().text&nbsp;=&nbsp;safeMid(bigpatch.diffs.front().text,</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1993">1993</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;diff_text.length());</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1994">1994</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1995">1995</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1996">1996</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1997">1997</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Compute&nbsp;the&nbsp;head&nbsp;context&nbsp;for&nbsp;the&nbsp;next&nbsp;patch.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1998">1998</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;precontext&nbsp;=&nbsp;diff_text2(patch.diffs);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_1999">1999</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;precontext&nbsp;=&nbsp;safeMid(precontext,&nbsp;precontext.length()&nbsp;-&nbsp;Patch_Margin);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2000">2000</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Append&nbsp;the&nbsp;end&nbsp;context&nbsp;for&nbsp;this&nbsp;patch.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2001">2001</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(diff_text1(bigpatch.diffs).length()&nbsp;&gt;&nbsp;Patch_Margin)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2002">2002</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;postcontext&nbsp;=&nbsp;diff_text1(bigpatch.diffs).left(Patch_Margin);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2003">2003</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2004">2004</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;postcontext&nbsp;=&nbsp;diff_text1(bigpatch.diffs);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2005">2005</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2006">2006</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!postcontext.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2007">2007</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.length1&nbsp;+=&nbsp;postcontext.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2008">2008</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.length2&nbsp;+=&nbsp;postcontext.length();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2009">2009</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!patch.diffs.isEmpty()</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2010">2010</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;&nbsp;patch.diffs.back().operation&nbsp;==&nbsp;EQUAL)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2011">2011</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.diffs.back().text&nbsp;+=&nbsp;postcontext;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2012">2012</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2013">2013</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.diffs.append(Diff(EQUAL,&nbsp;postcontext));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2014">2014</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2015">2015</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2016">2016</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!empty)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2017">2017</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointer.insert(patch);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2018">2018</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2019">2019</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2020">2020</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;bigpatch&nbsp;=&nbsp;pointer.hasNext()&nbsp;?&nbsp;pointer.next()&nbsp;:&nbsp;Patch();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2021">2021</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2022">2022</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2023">2023</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2024">2024</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2025">2025</td><td wrap="wrap" class="diff_line">QString&nbsp;diff_match_patch::patch_toText(const&nbsp;QList&lt;Patch&gt;&nbsp;&amp;patches)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2026">2026</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2027">2027</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;foreach(Patch&nbsp;aPatch,&nbsp;patches)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2028">2028</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;text.append(aPatch.toString());</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2029">2029</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2030">2030</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;text;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2031">2031</td><td wrap="wrap" class="diff_line">}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2032">2032</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2033">2033</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2034">2034</td><td wrap="wrap" class="diff_line">QList&lt;Patch&gt;&nbsp;diff_match_patch::patch_fromText(const&nbsp;QString&nbsp;&amp;textline)&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2035">2035</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QList&lt;Patch&gt;&nbsp;patches;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2036">2036</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;if&nbsp;(textline.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2037">2037</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;patches;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2038">2038</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2039">2039</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QStringList&nbsp;text&nbsp;=&nbsp;textline.split("\n",&nbsp;QString::SkipEmptyParts);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2040">2040</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;Patch&nbsp;patch;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2041">2041</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QRegExp&nbsp;patchHeader("^@@&nbsp;-(\\d+),?(\\d*)&nbsp;\\+(\\d+),?(\\d*)&nbsp;@@$");</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2042">2042</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;char&nbsp;sign;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2043">2043</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;QString&nbsp;line;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2044">2044</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;while&nbsp;(!text.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2045">2045</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!patchHeader.exactMatch(text.front()))&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2046">2046</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;QString("Invalid&nbsp;patch&nbsp;string:&nbsp;%1").arg(text.front());</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2047">2047</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2048">2048</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2049">2049</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;patch&nbsp;=&nbsp;Patch();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2050">2050</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;patch.start1&nbsp;=&nbsp;patchHeader.cap(1).toInt();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2051">2051</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(patchHeader.cap(2).isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2052">2052</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.start1--;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2053">2053</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.length1&nbsp;=&nbsp;1;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2054">2054</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(patchHeader.cap(2)&nbsp;==&nbsp;"0")&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2055">2055</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.length1&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2056">2056</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2057">2057</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.start1--;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2058">2058</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.length1&nbsp;=&nbsp;patchHeader.cap(2).toInt();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2059">2059</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2060">2060</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2061">2061</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;patch.start2&nbsp;=&nbsp;patchHeader.cap(3).toInt();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2062">2062</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(patchHeader.cap(4).isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2063">2063</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.start2--;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2064">2064</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.length2&nbsp;=&nbsp;1;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2065">2065</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(patchHeader.cap(4)&nbsp;==&nbsp;"0")&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2066">2066</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.length2&nbsp;=&nbsp;0;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2067">2067</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2068">2068</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.start2--;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2069">2069</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.length2&nbsp;=&nbsp;patchHeader.cap(4).toInt();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2070">2070</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2071">2071</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;text.removeFirst();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2072">2072</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2073">2073</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(!text.isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2074">2074</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(text.front().isEmpty())&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2075">2075</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text.removeFirst();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2076">2076</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2077">2077</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2078">2078</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sign&nbsp;=&nbsp;text.front()[0].toAscii();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2079">2079</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;line&nbsp;=&nbsp;safeMid(text.front(),&nbsp;1);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2080">2080</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;line&nbsp;=&nbsp;line.replace("+",&nbsp;"%2B");&nbsp;&nbsp;//&nbsp;decode&nbsp;would&nbsp;change&nbsp;all&nbsp;"+"&nbsp;to&nbsp;"&nbsp;"</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2081">2081</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;line&nbsp;=&nbsp;QUrl::fromPercentEncoding(qPrintable(line));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2082">2082</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(sign&nbsp;==&nbsp;'-')&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2083">2083</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Deletion.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2084">2084</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.diffs.append(Diff(DELETE,&nbsp;line));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2085">2085</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(sign&nbsp;==&nbsp;'+')&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2086">2086</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Insertion.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2087">2087</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.diffs.append(Diff(INSERT,&nbsp;line));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2088">2088</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(sign&nbsp;==&nbsp;'&nbsp;')&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2089">2089</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Minor&nbsp;equality.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2090">2090</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch.diffs.append(Diff(EQUAL,&nbsp;line));</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2091">2091</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(sign&nbsp;==&nbsp;'@')&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2092">2092</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Start&nbsp;of&nbsp;next&nbsp;patch.</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2093">2093</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2094">2094</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2095">2095</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;WTF?</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2096">2096</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;QString("Invalid&nbsp;patch&nbsp;mode&nbsp;'%1'&nbsp;in:&nbsp;%2").arg(sign).arg(line);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2097">2097</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;QList&lt;Patch&gt;();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2098">2098</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2099">2099</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text.removeFirst();</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2100">2100</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2101">2101</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2102">2102</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;&nbsp;&nbsp;patches.append(patch);</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2103">2103</td><td wrap="wrap" class="diff_line"></td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2104">2104</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;}</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2105">2105</td><td wrap="wrap" class="diff_line">&nbsp;&nbsp;return&nbsp;patches;</td><tr><td class="diff_next"></td><td class="diff_num" id="to0_2106">2106</td><td wrap="wrap" class="diff_line">}</td>        
    </table></div></div>
</body>

</html>